(()=>{var t={2:(t,e,n)=>{var i=n(2199),r=n(4664),s=n(5950);t.exports=function(t){return i(t,s,r)}},79:(t,e,n)=>{var i=n(3702),r=n(80),s=n(4739),o=n(8655),a=n(1175);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,t.exports=l},80:(t,e,n)=>{var i=n(6025),r=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():r.call(e,n,1),--this.size,0))}},104:(t,e,n)=>{var i=n(3661);function r(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(r.Cache||i),n}r.Cache=i,t.exports=r},181:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},270:(t,e,n)=>{var i=n(7068),r=n(346);t.exports=function t(e,n,s,o,a){return e===n||(null==e||null==n||!r(e)&&!r(n)?e!=e&&n!=n:i(e,n,s,o,t,a))}},289:(t,e,n)=>{var i=n(2651);t.exports=function(t){return i(this,t).get(t)}},294:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},317:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},346:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},361:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var i=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==i||"symbol"!=i&&e.test(t))&&t>-1&&t%1==0&&t<n}},392:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},426:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t,n){return null!=t&&e.call(t,n)}},583:(t,e,n)=>{var i=n(7237),r=n(7255),s=n(8586),o=n(7797);t.exports=function(t){return s(t)?i(o(t)):r(t)}},631:(t,e,n)=>{var i=n(8077),r=n(9326);t.exports=function(t,e){return null!=t&&r(t,e,i)}},641:(t,e,n)=>{var i=n(6649),r=n(5950);t.exports=function(t,e){return t&&i(t,e,r)}},659:(t,e,n)=>{var i=n(1873),r=Object.prototype,s=r.hasOwnProperty,o=r.toString,a=i?i.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),n=t[a];try{t[a]=void 0;var i=!0}catch(t){}var r=o.call(t);return i&&(e?t[a]=n:delete t[a]),r}},689:(t,e,n)=>{var i=n(2),r=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,s,o,a){var l=1&n,c=i(t),d=c.length;if(d!=i(e).length&&!l)return!1;for(var u=d;u--;){var h=c[u];if(!(l?h in e:r.call(e,h)))return!1}var p=a.get(t),f=a.get(e);if(p&&f)return p==e&&f==t;var g=!0;a.set(t,e),a.set(e,t);for(var m=l;++u<d;){var v=t[h=c[u]],b=e[h];if(s)var y=l?s(b,v,h,e,t,a):s(v,b,h,t,e,a);if(!(void 0===y?v===b||o(v,b,n,s,a):y)){g=!1;break}m||(m="constructor"==h)}if(g&&!m){var w=t.constructor,x=e.constructor;w==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(g=!1)}return a.delete(t),a.delete(e),g}},695:(t,e,n)=>{var i=n(8096),r=n(2428),s=n(6449),o=n(3656),a=n(361),l=n(7167),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=s(t),d=!n&&r(t),u=!n&&!d&&o(t),h=!n&&!d&&!u&&l(t),p=n||d||u||h,f=p?i(t.length,String):[],g=f.length;for(var m in t)!e&&!c.call(t,m)||p&&("length"==m||u&&("offset"==m||"parent"==m)||h&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||f.push(m);return f}},756:(t,e,n)=>{var i=n(3805);t.exports=function(t){return t==t&&!i(t)}},776:(t,e,n)=>{var i=n(756),r=n(5950);t.exports=function(t){for(var e=r(t),n=e.length;n--;){var s=e[n],o=t[s];e[n]=[s,o,i(o)]}return e}},828:(t,e,n)=>{var i=n(4647),r=n(3222),s=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,o=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");t.exports=function(t){return(t=r(t))&&t.replace(s,i).replace(o,"")}},882:t=>{t.exports=function(t,e,n,i){var r=-1,s=null==t?0:t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}},909:(t,e,n)=>{var i=n(641),r=n(8329)(i);t.exports=r},938:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},945:(t,e,n)=>{var i=n(79),r=n(8223),s=n(3661);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var o=n.__data__;if(!r||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new s(o)}return n.set(t,e),this.size=n.size,this}},999:(t,e,n)=>{var i=n(9302),r=n(6800);t.exports=function(t){return i((function(e,n){var i=-1,s=n.length,o=s>1?n[s-1]:void 0,a=s>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(s--,o):void 0,a&&r(n[0],n[1],a)&&(o=s<3?void 0:o,s=1),e=Object(e);++i<s;){var l=n[i];l&&t(e,l,i,o)}return e}))}},1033:t=>{t.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},1042:(t,e,n)=>{var i=n(6110)(Object,"create");t.exports=i},1074:t=>{t.exports=function(t){return t.split("")}},1175:(t,e,n)=>{var i=n(6025);t.exports=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}},1234:t=>{t.exports=function(t,e,n){for(var i=-1,r=t.length,s=e.length,o={};++i<r;){var a=i<s?e[i]:void 0;n(o,t[i],a)}return o}},1331:(t,e,n)=>{var i=n(2552),r=n(8879),s=n(346),o=Function.prototype,a=Object.prototype,l=o.toString,c=a.hasOwnProperty,d=l.call(Object);t.exports=function(t){if(!s(t)||"[object Object]"!=i(t))return!1;var e=r(t);if(null===e)return!0;var n=c.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==d}},1380:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},1420:(t,e,n)=>{var i=n(79);t.exports=function(){this.__data__=new i,this.size=0}},1448:(t,e,n)=>{var i=n(426),r=n(9326);t.exports=function(t,e){return null!=t&&r(t,e,i)}},1459:t=>{t.exports=function(t){return this.__data__.has(t)}},1489:(t,e,n)=>{var i=n(7400);t.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},1549:(t,e,n)=>{var i=n(2032),r=n(3862),s=n(6721),o=n(2749),a=n(5749);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,t.exports=l},1733:t=>{var e=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;t.exports=function(t){return t.match(e)||[]}},1769:(t,e,n)=>{var i=n(6449),r=n(8586),s=n(1802),o=n(3222);t.exports=function(t,e){return i(t)?t:r(t,e)?[t]:s(o(t))}},1791:(t,e,n)=>{var i=n(6547),r=n(3360);t.exports=function(t,e,n,s){var o=!n;n||(n={});for(var a=-1,l=e.length;++a<l;){var c=e[a],d=s?s(n[c],t[c],c,n,t):void 0;void 0===d&&(d=t[c]),o?r(n,c,d):i(n,c,d)}return n}},1799:(t,e,n)=>{var i=n(7217),r=n(270);t.exports=function(t,e,n,s){var o=n.length,a=o,l=!s;if(null==t)return!a;for(t=Object(t);o--;){var c=n[o];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<a;){var d=(c=n[o])[0],u=t[d],h=c[1];if(l&&c[2]){if(void 0===u&&!(d in t))return!1}else{var p=new i;if(s)var f=s(u,h,d,t,e,p);if(!(void 0===f?r(h,u,3,s,p):f))return!1}}return!0}},1800:t=>{var e=/\s/;t.exports=function(t){for(var n=t.length;n--&&e.test(t.charAt(n)););return n}},1802:(t,e,n)=>{var i=n(2224),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,s=/\\(\\)?/g,o=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,n,i,r){e.push(i?r.replace(s,"$1"):n||t)})),e}));t.exports=o},1811:t=>{var e=Date.now;t.exports=function(t){var n=0,i=0;return function(){var r=e(),s=16-(r-i);if(i=r,s>0){if(++n>=800)return arguments[0]}else n=0;return t.apply(void 0,arguments)}}},1873:(t,e,n)=>{var i=n(9325).Symbol;t.exports=i},1882:(t,e,n)=>{var i=n(2552),r=n(3805);t.exports=function(t){if(!r(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1961:(t,e,n)=>{var i=n(9653);t.exports=function(t,e){var n=e?i(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},1986:(t,e,n)=>{var i=n(1873),r=n(7828),s=n(5288),o=n(5911),a=n(317),l=n(4247),c=i?i.prototype:void 0,d=c?c.valueOf:void 0;t.exports=function(t,e,n,i,c,u,h){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!u(new r(t),new r(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return s(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=a;case"[object Set]":var f=1&i;if(p||(p=l),t.size!=e.size&&!f)return!1;var g=h.get(t);if(g)return g==e;i|=2,h.set(t,e);var m=o(p(t),p(e),i,c,u,h);return h.delete(t),m;case"[object Symbol]":if(d)return d.call(t)==d.call(e)}return!1}},2032:(t,e,n)=>{var i=n(1042);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},2054:t=>{var e="\\ud800-\\udfff",n="["+e+"]",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",r="\\ud83c[\\udffb-\\udfff]",s="[^"+e+"]",o="(?:\\ud83c[\\udde6-\\uddff]){2}",a="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+i+"|"+r+")?",c="[\\ufe0e\\ufe0f]?",d=c+l+"(?:\\u200d(?:"+[s,o,a].join("|")+")"+c+l+")*",u="(?:"+[s+i+"?",i,o,a,n].join("|")+")",h=RegExp(r+"(?="+r+")|"+u+d,"g");t.exports=function(t){return t.match(h)||[]}},2199:(t,e,n)=>{var i=n(4528),r=n(6449);t.exports=function(t,e,n){var s=e(t);return r(t)?s:i(s,n(t))}},2224:(t,e,n)=>{var i=n(104);t.exports=function(t){var e=i(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},2225:t=>{var e="\\ud800-\\udfff",n="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",r="A-Z\\xc0-\\xd6\\xd8-\\xde",s="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",o="["+s+"]",a="\\d+",l="["+n+"]",c="["+i+"]",d="[^"+e+s+a+n+i+r+"]",u="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="["+r+"]",f="(?:"+c+"|"+d+")",g="(?:"+p+"|"+d+")",m="(?:['’](?:d|ll|m|re|s|t|ve))?",v="(?:['’](?:D|LL|M|RE|S|T|VE))?",b="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",y="[\\ufe0e\\ufe0f]?",w=y+b+"(?:\\u200d(?:"+["[^"+e+"]",u,h].join("|")+")"+y+b+")*",x="(?:"+[l,u,h].join("|")+")"+w,C=RegExp([p+"?"+c+"+"+m+"(?="+[o,p,"$"].join("|")+")",g+"+"+v+"(?="+[o,p+f,"$"].join("|")+")",p+"?"+f+"+"+m,p+"+"+v,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",a,x].join("|"),"g");t.exports=function(t){return t.match(C)||[]}},2428:(t,e,n)=>{var i=n(7534),r=n(346),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return r(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},2493:(t,e,n)=>{var i=n(4051),r=n(6800),s=n(1489),o=n(3222);t.exports=function(t,e,n){return e=(n?r(t,e,n):void 0===e)?1:s(e),i(o(t),e)}},2507:(t,e,n)=>{var i=n(8754),r=n(9698),s=n(3912),o=n(3222);t.exports=function(t){return function(e){e=o(e);var n=r(e)?s(e):void 0,a=n?n[0]:e.charAt(0),l=n?i(n,1).join(""):e.slice(1);return a[t]()+l}}},2523:t=>{t.exports=function(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}},2552:(t,e,n)=>{var i=n(1873),r=n(659),s=n(9350),o=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):s(t)}},2651:(t,e,n)=>{var i=n(4218);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},2660:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const i=n(5606),r=n(7193),s=n(8142),o=n(9106);e.AttributeMap=o.default;const a=n(5759);e.Op=a.default;const l=n(8317);e.OpIterator=l.default;const c=String.fromCharCode(0),d=(t,e)=>{if("object"!=typeof t||null===t)throw new Error("cannot retain a "+typeof t);if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);const n=Object.keys(t)[0];if(!n||n!==Object.keys(e)[0])throw new Error(`embed types not matched: ${n} != ${Object.keys(e)[0]}`);return[n,t[n],e[n]]};class u{constructor(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){const e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){const n={};return"string"==typeof t&&0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if("number"==typeof t&&t<=0)return this;const n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)}push(t){let e=this.ops.length,n=this.ops[e-1];if(t=r(t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,n=this.ops[e-1],"object"!=typeof n))return this.ops.unshift(t),this;if(s(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){const t=this.ops[this.ops.length-1];return t&&"number"==typeof t.retain&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){const e=[],n=[];return this.forEach((i=>{(t(i)?e:n).push(i)})),[e,n]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce(((t,e)=>e.insert?t+a.default.length(e):e.delete?t-e.delete:t),0)}length(){return this.reduce(((t,e)=>t+a.default.length(e)),0)}slice(t=0,e=1/0){const n=[],i=new l.default(this.ops);let r=0;for(;r<e&&i.hasNext();){let s;r<t?s=i.next(t-r):(s=i.next(e-r),n.push(s)),r+=a.default.length(s)}return new u(n)}compose(t){const e=new l.default(this.ops),n=new l.default(t.ops),i=[],r=n.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){let t=r.retain;for(;"insert"===e.peekType()&&e.peekLength()<=t;)t-=e.peekLength(),i.push(e.next());r.retain-t>0&&n.next(r.retain-t)}const a=new u(i);for(;e.hasNext()||n.hasNext();)if("insert"===n.peekType())a.push(n.next());else if("delete"===e.peekType())a.push(e.next());else{const t=Math.min(e.peekLength(),n.peekLength()),i=e.next(t),r=n.next(t);if(r.retain){const l={};if("number"==typeof i.retain)l.retain="number"==typeof r.retain?t:r.retain;else if("number"==typeof r.retain)null==i.retain?l.insert=i.insert:l.retain=i.retain;else{const t=null==i.retain?"insert":"retain",[e,n,s]=d(i[t],r.retain),o=u.getHandler(e);l[t]={[e]:o.compose(n,s,"retain"===t)}}const c=o.default.compose(i.attributes,r.attributes,"number"==typeof i.retain);if(c&&(l.attributes=c),a.push(l),!n.hasNext()&&s(a.ops[a.ops.length-1],l)){const t=new u(e.rest());return a.concat(t).chop()}}else"number"==typeof r.delete&&("number"==typeof i.retain||"object"==typeof i.retain&&null!==i.retain)&&a.push(r)}return a.chop()}concat(t){const e=new u(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new u;const n=[this,t].map((e=>e.map((n=>{if(null!=n.insert)return"string"==typeof n.insert?n.insert:c;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join(""))),r=new u,a=i(n[0],n[1],e,!0),d=new l.default(this.ops),h=new l.default(t.ops);return a.forEach((t=>{let e=t[1].length;for(;e>0;){let n=0;switch(t[0]){case i.INSERT:n=Math.min(h.peekLength(),e),r.push(h.next(n));break;case i.DELETE:n=Math.min(e,d.peekLength()),d.next(n),r.delete(n);break;case i.EQUAL:n=Math.min(d.peekLength(),h.peekLength(),e);const t=d.next(n),a=h.next(n);s(t.insert,a.insert)?r.retain(n,o.default.diff(t.attributes,a.attributes)):r.push(a).delete(n)}e-=n}})),r.chop()}eachLine(t,e="\n"){const n=new l.default(this.ops);let i=new u,r=0;for(;n.hasNext();){if("insert"!==n.peekType())return;const s=n.peek(),o=a.default.length(s)-n.peekLength(),l="string"==typeof s.insert?s.insert.indexOf(e,o)-o:-1;if(l<0)i.push(n.next());else if(l>0)i.push(n.next(l));else{if(!1===t(i,n.next(1).attributes||{},r))return;r+=1,i=new u}}i.length()>0&&t(i,{},r)}invert(t){const e=new u;return this.reduce(((n,i)=>{if(i.insert)e.delete(a.default.length(i));else{if("number"==typeof i.retain&&null==i.attributes)return e.retain(i.retain),n+i.retain;if(i.delete||"number"==typeof i.retain){const r=i.delete||i.retain;return t.slice(n,n+r).forEach((t=>{i.delete?e.push(t):i.retain&&i.attributes&&e.retain(a.default.length(t),o.default.invert(i.attributes,t.attributes))})),n+r}if("object"==typeof i.retain&&null!==i.retain){const r=t.slice(n,n+1),s=new l.default(r.ops).next(),[a,c,h]=d(i.retain,s.insert),p=u.getHandler(a);return e.retain({[a]:p.invert(c,h)},o.default.invert(i.attributes,s.attributes)),n+1}}return n}),0),e.chop()}transform(t,e=!1){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);const n=t,i=new l.default(this.ops),r=new l.default(n.ops),s=new u;for(;i.hasNext()||r.hasNext();)if("insert"!==i.peekType()||!e&&"insert"===r.peekType())if("insert"===r.peekType())s.push(r.next());else{const t=Math.min(i.peekLength(),r.peekLength()),n=i.next(t),a=r.next(t);if(n.delete)continue;if(a.delete)s.push(a);else{const i=n.retain,r=a.retain;let l="object"==typeof r&&null!==r?r:t;if("object"==typeof i&&null!==i&&"object"==typeof r&&null!==r){const t=Object.keys(i)[0];if(t===Object.keys(r)[0]){const n=u.getHandler(t);n&&(l={[t]:n.transform(i[t],r[t],e)})}}s.retain(l,o.default.transform(n.attributes,a.attributes,e))}}else s.retain(a.default.length(i.next()));return s.chop()}transformPosition(t,e=!1){e=!!e;const n=new l.default(this.ops);let i=0;for(;n.hasNext()&&i<=t;){const r=n.peekLength(),s=n.peekType();n.next(),"delete"!==s?("insert"===s&&(i<t||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t}}u.Op=a.default,u.OpIterator=l.default,u.AttributeMap=o.default,u.handlers={},e.default=u,t.exports=u,t.exports.default=u},2749:(t,e,n)=>{var i=n(1042),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:r.call(e,t)}},2804:(t,e,n)=>{var i=n(6110)(n(9325),"Promise");t.exports=i},2824:(t,e,n)=>{var i=n(7805),r=n(3290),s=n(1961),o=n(3007),a=n(5529),l=n(2428),c=n(6449),d=n(3693),u=n(3656),h=n(1882),p=n(3805),f=n(1331),g=n(7167),m=n(4974),v=n(9884);t.exports=function(t,e,n,b,y,w,x){var C=m(t,n),E=m(e,n),T=x.get(E);if(T)i(t,n,T);else{var A=w?w(C,E,n+"",t,e,x):void 0,N=void 0===A;if(N){var S=c(E),L=!S&&u(E),I=!S&&!L&&g(E);A=E,S||L||I?c(C)?A=C:d(C)?A=o(C):L?(N=!1,A=r(E,!0)):I?(N=!1,A=s(E,!0)):A=[]:f(E)||l(E)?(A=C,l(C)?A=v(C):p(C)&&!h(C)||(A=a(E))):N=!1}N&&(x.set(E,A),y(A,E,b,w,x),x.delete(E)),i(t,n,A)}}},2865:(t,e,n)=>{var i=n(9570),r=n(1811)(i);t.exports=r},2903:(t,e,n)=>{var i=n(3805),r=n(5527),s=n(181),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return s(t);var e=r(t),n=[];for(var a in t)("constructor"!=a||!e&&o.call(t,a))&&n.push(a);return n}},2949:(t,e,n)=>{var i=n(2651);t.exports=function(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}},3007:t=>{t.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},3031:(t,e,n)=>{var i=n(3120),r=n(6155),s=n(9302),o=n(6800),a=s((function(t,e){if(null==t)return[];var n=e.length;return n>1&&o(t,e[0],e[1])?e=[]:n>2&&o(e[0],e[1],e[2])&&(e=[e[0]]),r(t,i(e,1),[])}));t.exports=a},3040:(t,e,n)=>{var i=n(1549),r=n(79),s=n(8223);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(s||r),string:new i}}},3120:(t,e,n)=>{var i=n(4528),r=n(5891);t.exports=function t(e,n,s,o,a){var l=-1,c=e.length;for(s||(s=r),a||(a=[]);++l<c;){var d=e[l];n>0&&s(d)?n>1?t(d,n-1,s,o,a):i(a,d):o||(a[a.length]=d)}return a}},3181:(t,e,n)=>{var i=n(5508)();t.exports=i},3221:t=>{t.exports=function(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(!1===n(s[l],l,s))break}return e}}},3222:(t,e,n)=>{var i=n(7556);t.exports=function(t){return null==t?"":i(t)}},3243:(t,e,n)=>{var i=n(6110),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=r},3290:(t,e,n)=>{t=n.nmd(t);var i=n(9325),r=e&&!e.nodeType&&e,s=r&&t&&!t.nodeType&&t,o=s&&s.exports===r?i.Buffer:void 0,a=o?o.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=a?a(n):new t.constructor(n);return t.copy(i),i}},3345:t=>{t.exports=function(){return[]}},3360:(t,e,n)=>{var i=n(3243);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},3375:(t,e,n)=>{var i=n(5765);t.exports=function(t){return t&&t.length?i(t):[]}},3488:t=>{t.exports=function(t){return t}},3605:t=>{t.exports=function(t){return this.__data__.get(t)}},3650:(t,e,n)=>{var i=n(4335)(Object.keys,Object);t.exports=i},3656:(t,e,n)=>{t=n.nmd(t);var i=n(9325),r=n(9935),s=e&&!e.nodeType&&e,o=s&&t&&!t.nodeType&&t,a=o&&o.exports===s?i.Buffer:void 0,l=(a?a.isBuffer:void 0)||r;t.exports=l},3661:(t,e,n)=>{var i=n(3040),r=n(7670),s=n(289),o=n(4509),a=n(2949);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=r,l.prototype.get=s,l.prototype.has=o,l.prototype.set=a,t.exports=l},3663:(t,e,n)=>{var i=n(1799),r=n(776),s=n(7197);t.exports=function(t){var e=r(t);return 1==e.length&&e[0][2]?s(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},3693:(t,e,n)=>{var i=n(4894),r=n(346);t.exports=function(t){return r(t)&&i(t)}},3697:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function s(t,e,i,s,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,s||t,o),l=n?n+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],a]:t._events[l].push(a):(t._events[l]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function a(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,s=i.length,o=new Array(s);r<s;r++)o[r]=i[r].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,r,s,o){var a=n?n+t:t;if(!this._events[a])return!1;var l,c,d=this._events[a],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(t,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,e),!0;case 3:return d.fn.call(d.context,e,i),!0;case 4:return d.fn.call(d.context,e,i,r),!0;case 5:return d.fn.call(d.context,e,i,r,s),!0;case 6:return d.fn.call(d.context,e,i,r,s,o),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(t,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,e);break;case 3:d[c].fn.call(d[c].context,e,i);break;case 4:d[c].fn.call(d[c].context,e,i,r);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},a.prototype.on=function(t,e,n){return s(this,t,e,n,!1)},a.prototype.once=function(t,e,n){return s(this,t,e,n,!0)},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||o(this,s);else{for(var l=0,c=[],d=a.length;l<d;l++)(a[l].fn!==e||r&&!a[l].once||i&&a[l].context!==i)&&c.push(a[l]);c.length?this._events[s]=1===c.length?c[0]:c:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},3702:t=>{t.exports=function(){this.__data__=[],this.size=0}},3714:(t,e,n)=>{var i=n(3730);t.exports=function(t,e,n){for(var r=-1,s=t.criteria,o=e.criteria,a=s.length,l=n.length;++r<a;){var c=i(s[r],o[r]);if(c)return r>=l?c:c*("desc"==n[r]?-1:1)}return t.index-e.index}},3730:(t,e,n)=>{var i=n(4394);t.exports=function(t,e){if(t!==e){var n=void 0!==t,r=null===t,s=t==t,o=i(t),a=void 0!==e,l=null===e,c=e==e,d=i(e);if(!l&&!d&&!o&&t>e||o&&a&&c&&!l&&!d||r&&a&&c||!n&&c||!s)return 1;if(!r&&!o&&!d&&t<e||d&&n&&s&&!r&&!o||l&&n&&s||!a&&s||!c)return-1}return 0}},3805:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3862:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},3912:(t,e,n)=>{var i=n(1074),r=n(9698),s=n(2054);t.exports=function(t){return r(t)?s(t):i(t)}},3937:t=>{t.exports=function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}},3950:t=>{t.exports=function(){}},4051:t=>{var e=Math.floor;t.exports=function(t,n){var i="";if(!t||n<1||n>9007199254740991)return i;do{n%2&&(i+=t),(n=e(n/2))&&(t+=t)}while(n);return i}},4058:(t,e,n)=>{var i=n(4792),r=n(5539)((function(t,e,n){return e=e.toLowerCase(),t+(n?i(e):e)}));t.exports=r},4128:(t,e,n)=>{var i=n(1800),r=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(r,""):t}},4218:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},4247:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},4248:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},4335:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},4394:(t,e,n)=>{var i=n(2552),r=n(346);t.exports=function(t){return"symbol"==typeof t||r(t)&&"[object Symbol]"==i(t)}},4509:(t,e,n)=>{var i=n(2651);t.exports=function(t){return i(this,t).has(t)}},4517:(t,e,n)=>{var i=n(6545),r=n(3950),s=n(4247),o=i&&1/s(new i([,-0]))[1]==1/0?function(t){return new i(t)}:r;t.exports=o},4528:t=>{t.exports=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}},4552:t=>{t.exports=function(t){return function(e){return null==t?void 0:t[e]}}},4647:(t,e,n)=>{var i=n(4552)({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});t.exports=i},4664:(t,e,n)=>{var i=n(9770),r=n(3345),s=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(t){return null==t?[]:(t=Object(t),i(o(t),(function(e){return s.call(t,e)})))}:r;t.exports=a},4739:(t,e,n)=>{var i=n(6025);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},4792:(t,e,n)=>{var i=n(3222),r=n(5808);t.exports=function(t){return r(i(t).toLowerCase())}},4840:(t,e,n)=>{var i="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=i},4894:(t,e,n)=>{var i=n(1882),r=n(294);t.exports=function(t){return null!=t&&r(t.length)&&!i(t)}},4901:(t,e,n)=>{var i=n(2552),r=n(294),s=n(346),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(t){return s(t)&&r(t.length)&&!!o[i(t)]}},4932:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}},4974:t=>{t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},5083:(t,e,n)=>{var i=n(1882),r=n(7296),s=n(3805),o=n(7473),a=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,d=l.toString,u=c.hasOwnProperty,h=RegExp("^"+d.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!s(t)||r(t))&&(i(t)?h:a).test(o(t))}},5128:(t,e,n)=>{var i=n(909),r=n(4894);t.exports=function(t,e){var n=-1,s=r(t)?Array(t.length):[];return i(t,(function(t,i,r){s[++n]=e(t,i,r)})),s}},5160:t=>{t.exports=function(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var s=Array(r);++i<r;)s[i]=t[i+e];return s}},5250:(t,e,n)=>{var i=n(7217),r=n(7805),s=n(6649),o=n(2824),a=n(3805),l=n(7241),c=n(4974);t.exports=function t(e,n,d,u,h){e!==n&&s(n,(function(s,l){if(h||(h=new i),a(s))o(e,n,l,d,t,u,h);else{var p=u?u(c(e,l),s,l+"",e,n,h):void 0;void 0===p&&(p=s),r(e,l,p)}}),l)}},5288:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},5325:(t,e,n)=>{var i=n(6131);t.exports=function(t,e){return!(null==t||!t.length)&&i(t,e,0)>-1}},5364:(t,e,n)=>{var i=n(5250),r=n(999)((function(t,e,n){i(t,e,n)}));t.exports=r},5389:(t,e,n)=>{var i=n(3663),r=n(7978),s=n(3488),o=n(6449),a=n(583);t.exports=function(t){return"function"==typeof t?t:null==t?s:"object"==typeof t?o(t)?r(t[0],t[1]):i(t):a(t)}},5434:t=>{var e=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;t.exports=function(t){return e.test(t)}},5463:t=>{t.exports=function(t){return t!=t}},5481:(t,e,n)=>{var i=n(9325)["__core-js_shared__"];t.exports=i},5508:(t,e,n)=>{var i=n(6151),r=n(6800),s=n(7400);t.exports=function(t){return function(e,n,o){return o&&"number"!=typeof o&&r(e,n,o)&&(n=o=void 0),e=s(e),void 0===n?(n=e,e=0):n=s(n),o=void 0===o?e<n?1:-1:s(o),i(e,n,o,t)}}},5527:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},5529:(t,e,n)=>{var i=n(9344),r=n(8879),s=n(5527);t.exports=function(t){return"function"!=typeof t.constructor||s(t)?{}:i(r(t))}},5539:(t,e,n)=>{var i=n(882),r=n(828),s=n(6645),o=RegExp("['’]","g");t.exports=function(t){return function(e){return i(s(r(e).replace(o,"")),t,"")}}},5580:(t,e,n)=>{var i=n(6110)(n(9325),"DataView");t.exports=i},5606:t=>{var e=-1;function n(t,p,f,g,m){if(t===p)return t?[[0,t]]:[];if(null!=f){var b=function(t,e,n){var i="number"==typeof n?{index:n,length:0}:n.oldRange,r="number"==typeof n?null:n.newRange,s=t.length,o=e.length;if(0===i.length&&(null===r||0===r.length)){var a=i.index,l=t.slice(0,a),c=t.slice(a),d=r?r.index:null,u=a+o-s;if((null===d||d===u)&&!(u<0||u>o)){var h=e.slice(0,u);if((g=e.slice(u))===c){var p=Math.min(a,u);if((b=l.slice(0,p))===(w=h.slice(0,p)))return v(b,l.slice(p),h.slice(p),c)}}if(null===d||d===a){var f=a,g=(h=e.slice(0,f),e.slice(f));if(h===l){var m=Math.min(s-f,o-f);if((y=c.slice(c.length-m))===(x=g.slice(g.length-m)))return v(l,c.slice(0,c.length-m),g.slice(0,g.length-m),y)}}}if(i.length>0&&r&&0===r.length){var b=t.slice(0,i.index),y=t.slice(i.index+i.length);if(!(o<(p=b.length)+(m=y.length))){var w=e.slice(0,p),x=e.slice(o-m);if(b===w&&y===x)return v(b,t.slice(p,s-m),e.slice(p,o-m),y)}}return null}(t,p,f);if(b)return b}var y=r(t,p),w=t.substring(0,y);y=o(t=t.substring(y),p=p.substring(y));var x=t.substring(t.length-y),C=function(t,s){var a;if(!t)return[[1,s]];if(!s)return[[e,t]];var l=t.length>s.length?t:s,c=t.length>s.length?s:t,d=l.indexOf(c);if(-1!==d)return a=[[1,l.substring(0,d)],[0,c],[1,l.substring(d+c.length)]],t.length>s.length&&(a[0][0]=a[2][0]=e),a;if(1===c.length)return[[e,t],[1,s]];var u=function(t,e){var n=t.length>e.length?t:e,i=t.length>e.length?e:t;if(n.length<4||2*i.length<n.length)return null;function s(t,e,n){for(var i,s,a,l,c=t.substring(n,n+Math.floor(t.length/4)),d=-1,u="";-1!==(d=e.indexOf(c,d+1));){var h=r(t.substring(n),e.substring(d)),p=o(t.substring(0,n),e.substring(0,d));u.length<p+h&&(u=e.substring(d-p,d)+e.substring(d,d+h),i=t.substring(0,n-p),s=t.substring(n+h),a=e.substring(0,d-p),l=e.substring(d+h))}return 2*u.length>=t.length?[i,s,a,l,u]:null}var a,l,c,d,u,h=s(n,i,Math.ceil(n.length/4)),p=s(n,i,Math.ceil(n.length/2));return h||p?(a=p?h&&h[4].length>p[4].length?h:p:h,t.length>e.length?(l=a[0],c=a[1],d=a[2],u=a[3]):(d=a[0],u=a[1],l=a[2],c=a[3]),[l,c,d,u,a[4]]):null}(t,s);if(u){var h=u[0],p=u[1],f=u[2],g=u[3],m=u[4],v=n(h,f),b=n(p,g);return v.concat([[0,m]],b)}return function(t,n){for(var r=t.length,s=n.length,o=Math.ceil((r+s)/2),a=o,l=2*o,c=new Array(l),d=new Array(l),u=0;u<l;u++)c[u]=-1,d[u]=-1;c[a+1]=0,d[a+1]=0;for(var h=r-s,p=h%2!=0,f=0,g=0,m=0,v=0,b=0;b<o;b++){for(var y=-b+f;y<=b-g;y+=2){for(var w=a+y,x=(N=y===-b||y!==b&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1)-y;N<r&&x<s&&t.charAt(N)===n.charAt(x);)N++,x++;if(c[w]=N,N>r)g+=2;else if(x>s)f+=2;else if(p&&(T=a+h-y)>=0&&T<l&&-1!==d[T]&&N>=(E=r-d[T]))return i(t,n,N,x)}for(var C=-b+m;C<=b-v;C+=2){for(var E,T=a+C,A=(E=C===-b||C!==b&&d[T-1]<d[T+1]?d[T+1]:d[T-1]+1)-C;E<r&&A<s&&t.charAt(r-E-1)===n.charAt(s-A-1);)E++,A++;if(d[T]=E,E>r)v+=2;else if(A>s)m+=2;else if(!p){var N;if((w=a+h-C)>=0&&w<l&&-1!==c[w])if(x=a+(N=c[w])-w,N>=(E=r-E))return i(t,n,N,x)}}}return[[e,t],[1,n]]}(t,s)}(t=t.substring(0,t.length-y),p=p.substring(0,p.length-y));return w&&C.unshift([0,w]),x&&C.push([0,x]),h(C,m),g&&function(t){for(var n=!1,i=[],r=0,p=null,f=0,g=0,m=0,v=0,b=0;f<t.length;)0==t[f][0]?(i[r++]=f,g=v,m=b,v=0,b=0,p=t[f][1]):(1==t[f][0]?v+=t[f][1].length:b+=t[f][1].length,p&&p.length<=Math.max(g,m)&&p.length<=Math.max(v,b)&&(t.splice(i[r-1],0,[e,p]),t[i[r-1]+1][0]=1,r--,f=--r>0?i[r-1]:-1,g=0,m=0,v=0,b=0,p=null,n=!0)),f++;for(n&&h(t),function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),i=e.charAt(0),r=n.match(a),s=i.match(a),o=r&&n.match(l),h=s&&i.match(l),p=o&&n.match(c),f=h&&i.match(c),g=p&&t.match(d),m=f&&e.match(u);return g||m?5:p||f?4:r&&!o&&h?3:o||h?2:r||s?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var i=t[n-1][1],r=t[n][1],s=t[n+1][1],h=o(i,r);if(h){var p=r.substring(r.length-h);i=i.substring(0,i.length-h),r=p+r.substring(0,r.length-h),s=p+s}for(var f=i,g=r,m=s,v=e(i,r)+e(r,s);r.charAt(0)===s.charAt(0);){i+=r.charAt(0),r=r.substring(1)+s.charAt(0),s=s.substring(1);var b=e(i,r)+e(r,s);b>=v&&(v=b,f=i,g=r,m=s)}t[n-1][1]!=f&&(f?t[n-1][1]=f:(t.splice(n-1,1),n--),t[n][1]=g,m?t[n+1][1]=m:(t.splice(n+1,1),n--))}n++}}(t),f=1;f<t.length;){if(t[f-1][0]==e&&1==t[f][0]){var y=t[f-1][1],w=t[f][1],x=s(y,w),C=s(w,y);x>=C?(x>=y.length/2||x>=w.length/2)&&(t.splice(f,0,[0,w.substring(0,x)]),t[f-1][1]=y.substring(0,y.length-x),t[f+1][1]=w.substring(x),f++):(C>=y.length/2||C>=w.length/2)&&(t.splice(f,0,[0,y.substring(0,C)]),t[f-1][0]=1,t[f-1][1]=w.substring(0,w.length-C),t[f+1][0]=e,t[f+1][1]=y.substring(C),f++),f++}f++}}(C),C}function i(t,e,i,r){var s=t.substring(0,i),o=e.substring(0,r),a=t.substring(i),l=e.substring(r),c=n(s,o),d=n(a,l);return c.concat(d)}function r(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,s=0;n<r;)t.substring(s,r)==e.substring(s,r)?s=n=r:i=r,r=Math.floor((i-n)/2+n);return p(t.charCodeAt(r-1))&&r--,r}function s(t,e){var n=t.length,i=e.length;if(0==n||0==i)return 0;n>i?t=t.substring(n-i):n<i&&(e=e.substring(0,n));var r=Math.min(n,i);if(t==e)return r;for(var s=0,o=1;;){var a=t.substring(r-o),l=e.indexOf(a);if(-1==l)return s;o+=l,0!=l&&t.substring(r-o)!=e.substring(0,o)||(s=o,o++)}}function o(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,s=0;n<r;)t.substring(t.length-r,t.length-s)==e.substring(e.length-r,e.length-s)?s=n=r:i=r,r=Math.floor((i-n)/2+n);return f(t.charCodeAt(t.length-r))&&r--,r}var a=/[^a-zA-Z0-9]/,l=/\s/,c=/[\r\n]/,d=/\n\r?\n$/,u=/^\r?\n\r?\n/;function h(t,n){t.push([0,""]);for(var i,s=0,a=0,l=0,c="",d="";s<t.length;)if(s<t.length-1&&!t[s][1])t.splice(s,1);else switch(t[s][0]){case 1:l++,d+=t[s][1],s++;break;case e:a++,c+=t[s][1],s++;break;case 0:var u=s-l-a-1;if(n){if(u>=0&&m(t[u][1])){var p=t[u][1].slice(-1);if(t[u][1]=t[u][1].slice(0,-1),c=p+c,d=p+d,!t[u][1]){t.splice(u,1),s--;var f=u-1;t[f]&&1===t[f][0]&&(l++,d=t[f][1]+d,f--),t[f]&&t[f][0]===e&&(a++,c=t[f][1]+c,f--),u=f}}g(t[s][1])&&(p=t[s][1].charAt(0),t[s][1]=t[s][1].slice(1),c+=p,d+=p)}if(s<t.length-1&&!t[s][1]){t.splice(s,1);break}if(c.length>0||d.length>0){c.length>0&&d.length>0&&(0!==(i=r(d,c))&&(u>=0?t[u][1]+=d.substring(0,i):(t.splice(0,0,[0,d.substring(0,i)]),s++),d=d.substring(i),c=c.substring(i)),0!==(i=o(d,c))&&(t[s][1]=d.substring(d.length-i)+t[s][1],d=d.substring(0,d.length-i),c=c.substring(0,c.length-i)));var v=l+a;0===c.length&&0===d.length?(t.splice(s-v,v),s-=v):0===c.length?(t.splice(s-v,v,[1,d]),s=s-v+1):0===d.length?(t.splice(s-v,v,[e,c]),s=s-v+1):(t.splice(s-v,v,[e,c],[1,d]),s=s-v+2)}0!==s&&0===t[s-1][0]?(t[s-1][1]+=t[s][1],t.splice(s,1)):s++,l=0,a=0,c="",d=""}""===t[t.length-1][1]&&t.pop();var b=!1;for(s=1;s<t.length-1;)0===t[s-1][0]&&0===t[s+1][0]&&(t[s][1].substring(t[s][1].length-t[s-1][1].length)===t[s-1][1]?(t[s][1]=t[s-1][1]+t[s][1].substring(0,t[s][1].length-t[s-1][1].length),t[s+1][1]=t[s-1][1]+t[s+1][1],t.splice(s-1,1),b=!0):t[s][1].substring(0,t[s+1][1].length)==t[s+1][1]&&(t[s-1][1]+=t[s+1][1],t[s][1]=t[s][1].substring(t[s+1][1].length)+t[s+1][1],t.splice(s+1,1),b=!0)),s++;b&&h(t,n)}function p(t){return t>=55296&&t<=56319}function f(t){return t>=56320&&t<=57343}function g(t){return f(t.charCodeAt(0))}function m(t){return p(t.charCodeAt(t.length-1))}function v(t,n,i,r){return m(t)||g(r)?null:function(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}([[0,t],[e,n],[1,i],[0,r]])}function b(t,e,i,r){return n(t,e,i,r,!0)}b.INSERT=1,b.DELETE=e,b.EQUAL=0,t.exports=b},5749:(t,e,n)=>{var i=n(1042);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},5759:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"object"==typeof t.retain&&null!==t.retain?1:"string"==typeof t.insert?t.insert.length:1}}(n||(n={})),e.default=n},5765:(t,e,n)=>{var i=n(8859),r=n(5325),s=n(9905),o=n(9219),a=n(4517),l=n(4247);t.exports=function(t,e,n){var c=-1,d=r,u=t.length,h=!0,p=[],f=p;if(n)h=!1,d=s;else if(u>=200){var g=e?null:a(t);if(g)return l(g);h=!1,d=o,f=new i}else f=e?[]:p;t:for(;++c<u;){var m=t[c],v=e?e(m):m;if(m=n||0!==m?m:0,h&&v==v){for(var b=f.length;b--;)if(f[b]===v)continue t;e&&f.push(v),p.push(m)}else d(f,v,n)||(f!==p&&f.push(v),p.push(m))}return p}},5808:(t,e,n)=>{var i=n(2507)("toUpperCase");t.exports=i},5861:(t,e,n)=>{var i=n(5580),r=n(8223),s=n(2804),o=n(6545),a=n(8303),l=n(2552),c=n(7473),d="[object Map]",u="[object Promise]",h="[object Set]",p="[object WeakMap]",f="[object DataView]",g=c(i),m=c(r),v=c(s),b=c(o),y=c(a),w=l;(i&&w(new i(new ArrayBuffer(1)))!=f||r&&w(new r)!=d||s&&w(s.resolve())!=u||o&&w(new o)!=h||a&&w(new a)!=p)&&(w=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,i=n?c(n):"";if(i)switch(i){case g:return f;case m:return d;case v:return u;case b:return h;case y:return p}return e}),t.exports=w},5891:(t,e,n)=>{var i=n(1873),r=n(2428),s=n(6449),o=i?i.isConcatSpreadable:void 0;t.exports=function(t){return s(t)||r(t)||!!(o&&t&&t[o])}},5911:(t,e,n)=>{var i=n(8859),r=n(4248),s=n(9219);t.exports=function(t,e,n,o,a,l){var c=1&n,d=t.length,u=e.length;if(d!=u&&!(c&&u>d))return!1;var h=l.get(t),p=l.get(e);if(h&&p)return h==e&&p==t;var f=-1,g=!0,m=2&n?new i:void 0;for(l.set(t,e),l.set(e,t);++f<d;){var v=t[f],b=e[f];if(o)var y=c?o(b,v,f,e,t,l):o(v,b,f,t,e,l);if(void 0!==y){if(y)continue;g=!1;break}if(m){if(!r(e,(function(t,e){if(!s(m,e)&&(v===t||a(v,t,n,o,l)))return m.push(e)}))){g=!1;break}}else if(v!==b&&!a(v,b,n,o,l)){g=!1;break}}return l.delete(t),l.delete(e),g}},5950:(t,e,n)=>{var i=n(695),r=n(8984),s=n(4894);t.exports=function(t){return s(t)?i(t):r(t)}},6009:(t,e,n)=>{t=n.nmd(t);var i=n(4840),r=e&&!e.nodeType&&e,s=r&&t&&!t.nodeType&&t,o=s&&s.exports===r&&i.process,a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}();t.exports=a},6025:(t,e,n)=>{var i=n(5288);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},6110:(t,e,n)=>{var i=n(5083),r=n(392);t.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},6131:(t,e,n)=>{var i=n(2523),r=n(5463),s=n(6959);t.exports=function(t,e,n){return e==e?s(t,e,n):i(t,r,n)}},6151:t=>{var e=Math.ceil,n=Math.max;t.exports=function(t,i,r,s){for(var o=-1,a=n(e((i-t)/(r||1)),0),l=Array(a);a--;)l[s?a:++o]=t,t+=r;return l}},6155:(t,e,n)=>{var i=n(4932),r=n(7422),s=n(5389),o=n(5128),a=n(3937),l=n(7301),c=n(3714),d=n(3488),u=n(6449);t.exports=function(t,e,n){e=e.length?i(e,(function(t){return u(t)?function(e){return r(e,1===t.length?t[0]:t)}:t})):[d];var h=-1;e=i(e,l(s));var p=o(t,(function(t,n,r){return{criteria:i(e,(function(e){return e(t)})),index:++h,value:t}}));return a(p,(function(t,e){return c(t,e,n)}))}},6449:t=>{var e=Array.isArray;t.exports=e},6545:(t,e,n)=>{var i=n(6110)(n(9325),"Set");t.exports=i},6547:(t,e,n)=>{var i=n(3360),r=n(5288),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var o=t[e];s.call(t,e)&&r(o,n)&&(void 0!==n||e in t)||i(t,e,n)}},6645:(t,e,n)=>{var i=n(1733),r=n(5434),s=n(3222),o=n(2225);t.exports=function(t,e,n){return t=s(t),void 0===(e=n?void 0:e)?r(t)?o(t):i(t):t.match(e)||[]}},6649:(t,e,n)=>{var i=n(3221)();t.exports=i},6721:(t,e,n)=>{var i=n(1042),r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return r.call(e,t)?e[t]:void 0}},6757:(t,e,n)=>{var i=n(1033),r=Math.max;t.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var s=arguments,o=-1,a=r(s.length-e,0),l=Array(a);++o<a;)l[o]=s[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=s[o];return c[e]=n(l),i(t,this,c)}}},6800:(t,e,n)=>{var i=n(5288),r=n(4894),s=n(361),o=n(3805);t.exports=function(t,e,n){if(!o(n))return!1;var a=typeof e;return!!("number"==a?r(n)&&s(e,n.length):"string"==a&&e in n)&&i(n[e],t)}},6959:t=>{t.exports=function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}},7068:(t,e,n)=>{var i=n(7217),r=n(5911),s=n(1986),o=n(689),a=n(5861),l=n(6449),c=n(3656),d=n(7167),u="[object Arguments]",h="[object Array]",p="[object Object]",f=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,g,m,v){var b=l(t),y=l(e),w=b?h:a(t),x=y?h:a(e),C=(w=w==u?p:w)==p,E=(x=x==u?p:x)==p,T=w==x;if(T&&c(t)){if(!c(e))return!1;b=!0,C=!1}if(T&&!C)return v||(v=new i),b||d(t)?r(t,e,n,g,m,v):s(t,e,w,n,g,m,v);if(!(1&n)){var A=C&&f.call(t,"__wrapped__"),N=E&&f.call(e,"__wrapped__");if(A||N){var S=A?t.value():t,L=N?e.value():e;return v||(v=new i),m(S,L,n,g,v)}}return!!T&&(v||(v=new i),o(t,e,n,g,m,v))}},7167:(t,e,n)=>{var i=n(4901),r=n(7301),s=n(6009),o=s&&s.isTypedArray,a=o?r(o):i;t.exports=a},7193:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object Boolean]",a="[object Date]",l="[object Function]",c="[object GeneratorFunction]",d="[object Map]",u="[object Number]",h="[object Object]",p="[object Promise]",f="[object RegExp]",g="[object Set]",m="[object String]",v="[object Symbol]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",x="[object Float32Array]",C="[object Float64Array]",E="[object Int8Array]",T="[object Int16Array]",A="[object Int32Array]",N="[object Uint8Array]",S="[object Uint8ClampedArray]",L="[object Uint16Array]",I="[object Uint32Array]",_=/\w*$/,O=/^\[object .+?Constructor\]$/,k=/^(?:0|[1-9]\d*)$/,j={};j[s]=j["[object Array]"]=j[y]=j[w]=j[o]=j[a]=j[x]=j[C]=j[E]=j[T]=j[A]=j[d]=j[u]=j[h]=j[f]=j[g]=j[m]=j[v]=j[N]=j[S]=j[L]=j[I]=!0,j["[object Error]"]=j[l]=j[b]=!1;var P="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,M="object"==typeof self&&self&&self.Object===Object&&self,q=P||M||Function("return this")(),B=e&&!e.nodeType&&e,D=B&&t&&!t.nodeType&&t,$=D&&D.exports===B;function R(t,e){return t.set(e[0],e[1]),t}function U(t,e){return t.add(e),t}function V(t,e,n,i){var r=-1,s=t?t.length:0;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function F(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function H(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function z(t,e){return function(n){return t(e(n))}}function G(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var Z,W=Array.prototype,K=Function.prototype,J=Object.prototype,Y=q["__core-js_shared__"],X=(Z=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",Q=K.toString,tt=J.hasOwnProperty,et=J.toString,nt=RegExp("^"+Q.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),it=$?q.Buffer:void 0,rt=q.Symbol,st=q.Uint8Array,ot=z(Object.getPrototypeOf,Object),at=Object.create,lt=J.propertyIsEnumerable,ct=W.splice,dt=Object.getOwnPropertySymbols,ut=it?it.isBuffer:void 0,ht=z(Object.keys,Object),pt=qt(q,"DataView"),ft=qt(q,"Map"),gt=qt(q,"Promise"),mt=qt(q,"Set"),vt=qt(q,"WeakMap"),bt=qt(Object,"create"),yt=Ut(pt),wt=Ut(ft),xt=Ut(gt),Ct=Ut(mt),Et=Ut(vt),Tt=rt?rt.prototype:void 0,At=Tt?Tt.valueOf:void 0;function Nt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function St(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Lt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function It(t){this.__data__=new St(t)}function _t(t,e,n){var i=t[e];tt.call(t,e)&&Vt(i,n)&&(void 0!==n||e in t)||(t[e]=n)}function Ot(t,e){for(var n=t.length;n--;)if(Vt(t[n][0],e))return n;return-1}function kt(t,e,n,i,r,p,b){var O;if(i&&(O=p?i(t,r,p,b):i(t)),void 0!==O)return O;if(!Zt(t))return t;var k=Ft(t);if(k){if(O=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(t,O)}else{var P=Dt(t),M=P==l||P==c;if(zt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(P==h||P==s||M&&!p){if(F(t))return p?t:{};if(O=function(t){return"function"!=typeof t.constructor||Rt(t)?{}:Zt(e=ot(t))?at(e):{};var e}(M?{}:t),!e)return function(t,e){return Pt(t,Bt(t),e)}(t,function(t,e){return t&&Pt(e,Wt(e),t)}(O,t))}else{if(!j[P])return p?t:{};O=function(t,e,n,i){var r,s=t.constructor;switch(e){case y:return jt(t);case o:case a:return new s(+t);case w:return function(t,e){var n=e?jt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,i);case x:case C:case E:case T:case A:case N:case S:case L:case I:return function(t,e){var n=e?jt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,i);case d:return function(t,e,n){return V(e?n(H(t),!0):H(t),R,new t.constructor)}(t,i,n);case u:case m:return new s(t);case f:return function(t){var e=new t.constructor(t.source,_.exec(t));return e.lastIndex=t.lastIndex,e}(t);case g:return function(t,e,n){return V(e?n(G(t),!0):G(t),U,new t.constructor)}(t,i,n);case v:return r=t,At?Object(At.call(r)):{}}}(t,P,kt,e)}}b||(b=new It);var q=b.get(t);if(q)return q;if(b.set(t,O),!k)var B=n?function(t){return function(t,e,n){var i=e(t);return Ft(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,Wt,Bt)}(t):Wt(t);return function(t,e){for(var n=-1,i=t?t.length:0;++n<i&&!1!==e(t[n],n););}(B||t,(function(r,s){B&&(r=t[s=r]),_t(O,s,kt(r,e,n,i,s,t,b))})),O}function jt(t){var e=new t.constructor(t.byteLength);return new st(e).set(new st(t)),e}function Pt(t,e,n,i){n||(n={});for(var r=-1,s=e.length;++r<s;){var o=e[r],a=i?i(n[o],t[o],o,n,t):void 0;_t(n,o,void 0===a?t[o]:a)}return n}function Mt(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function qt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Zt(t)||(e=t,X&&X in e))&&(Gt(t)||F(t)?nt:O).test(Ut(t));var e}(n)?n:void 0}Nt.prototype.clear=function(){this.__data__=bt?bt(null):{}},Nt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Nt.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return n===i?void 0:n}return tt.call(e,t)?e[t]:void 0},Nt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:tt.call(e,t)},Nt.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?i:e,this},St.prototype.clear=function(){this.__data__=[]},St.prototype.delete=function(t){var e=this.__data__,n=Ot(e,t);return!(n<0||(n==e.length-1?e.pop():ct.call(e,n,1),0))},St.prototype.get=function(t){var e=this.__data__,n=Ot(e,t);return n<0?void 0:e[n][1]},St.prototype.has=function(t){return Ot(this.__data__,t)>-1},St.prototype.set=function(t,e){var n=this.__data__,i=Ot(n,t);return i<0?n.push([t,e]):n[i][1]=e,this},Lt.prototype.clear=function(){this.__data__={hash:new Nt,map:new(ft||St),string:new Nt}},Lt.prototype.delete=function(t){return Mt(this,t).delete(t)},Lt.prototype.get=function(t){return Mt(this,t).get(t)},Lt.prototype.has=function(t){return Mt(this,t).has(t)},Lt.prototype.set=function(t,e){return Mt(this,t).set(t,e),this},It.prototype.clear=function(){this.__data__=new St},It.prototype.delete=function(t){return this.__data__.delete(t)},It.prototype.get=function(t){return this.__data__.get(t)},It.prototype.has=function(t){return this.__data__.has(t)},It.prototype.set=function(t,e){var n=this.__data__;if(n instanceof St){var i=n.__data__;if(!ft||i.length<199)return i.push([t,e]),this;n=this.__data__=new Lt(i)}return n.set(t,e),this};var Bt=dt?z(dt,Object):function(){return[]},Dt=function(t){return et.call(t)};function $t(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||k.test(t))&&t>-1&&t%1==0&&t<e}function Rt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||J)}function Ut(t){if(null!=t){try{return Q.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Vt(t,e){return t===e||t!=t&&e!=e}(pt&&Dt(new pt(new ArrayBuffer(1)))!=w||ft&&Dt(new ft)!=d||gt&&Dt(gt.resolve())!=p||mt&&Dt(new mt)!=g||vt&&Dt(new vt)!=b)&&(Dt=function(t){var e=et.call(t),n=e==h?t.constructor:void 0,i=n?Ut(n):void 0;if(i)switch(i){case yt:return w;case wt:return d;case xt:return p;case Ct:return g;case Et:return b}return e});var Ft=Array.isArray;function Ht(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}(t.length)&&!Gt(t)}var zt=ut||function(){return!1};function Gt(t){var e=Zt(t)?et.call(t):"";return e==l||e==c}function Zt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Wt(t){return Ht(t)?function(t,e){var n=Ft(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Ht(t)}(t)&&tt.call(t,"callee")&&(!lt.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],i=n.length,r=!!i;for(var o in t)!e&&!tt.call(t,o)||r&&("length"==o||$t(o,i))||n.push(o);return n}(t):function(t){if(!Rt(t))return ht(t);var e=[];for(var n in Object(t))tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return kt(t,!0,!0)}},7197:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},7217:(t,e,n)=>{var i=n(79),r=n(1420),s=n(938),o=n(3605),a=n(9817),l=n(945);function c(t){var e=this.__data__=new i(t);this.size=e.size}c.prototype.clear=r,c.prototype.delete=s,c.prototype.get=o,c.prototype.has=a,c.prototype.set=l,t.exports=c},7237:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},7241:(t,e,n)=>{var i=n(695),r=n(2903),s=n(4894);t.exports=function(t){return s(t)?i(t,!0):r(t)}},7248:(t,e,n)=>{var i=n(6547),r=n(1234);t.exports=function(t,e){return r(t||[],e||[],i)}},7255:(t,e,n)=>{var i=n(7422);t.exports=function(t){return function(e){return i(e,t)}}},7296:(t,e,n)=>{var i,r=n(5481),s=(i=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!s&&s in t}},7301:t=>{t.exports=function(t){return function(e){return t(e)}}},7334:t=>{t.exports=function(t){return function(){return t}}},7400:(t,e,n)=>{var i=n(9374),r=1/0;t.exports=function(t){return t?(t=i(t))===r||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},7422:(t,e,n)=>{var i=n(1769),r=n(7797);t.exports=function(t,e){for(var n=0,s=(e=i(e,t)).length;null!=t&&n<s;)t=t[r(e[n++])];return n&&n==s?t:void 0}},7473:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},7534:(t,e,n)=>{var i=n(2552),r=n(346);t.exports=function(t){return r(t)&&"[object Arguments]"==i(t)}},7556:(t,e,n)=>{var i=n(1873),r=n(4932),s=n(6449),o=n(4394),a=i?i.prototype:void 0,l=a?a.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(s(e))return r(e,t)+"";if(o(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},7670:(t,e,n)=>{var i=n(2651);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},7797:(t,e,n)=>{var i=n(4394);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},7805:(t,e,n)=>{var i=n(3360),r=n(5288);t.exports=function(t,e,n){(void 0!==n&&!r(t[e],n)||void 0===n&&!(e in t))&&i(t,e,n)}},7828:(t,e,n)=>{var i=n(9325).Uint8Array;t.exports=i},7978:(t,e,n)=>{var i=n(270),r=n(8156),s=n(631),o=n(8586),a=n(756),l=n(7197),c=n(7797);t.exports=function(t,e){return o(t)&&a(e)?l(c(t),e):function(n){var o=r(n,t);return void 0===o&&o===e?s(n,t):i(e,o,3)}}},8077:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},8096:t=>{t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},8142:(t,e,n)=>{t=n.nmd(t);var i="__lodash_hash_undefined__",r=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",l="[object Date]",c="[object Error]",d="[object Function]",u="[object Map]",h="[object Number]",p="[object Object]",f="[object Promise]",g="[object RegExp]",m="[object Set]",v="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",w="[object DataView]",x=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E[s]=E[o]=E[y]=E[a]=E[w]=E[l]=E[c]=E[d]=E[u]=E[h]=E[p]=E[g]=E[m]=E[v]=E[b]=!1;var T="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,A="object"==typeof self&&self&&self.Object===Object&&self,N=T||A||Function("return this")(),S=e&&!e.nodeType&&e,L=S&&t&&!t.nodeType&&t,I=L&&L.exports===S,_=I&&T.process,O=function(){try{return _&&_.binding&&_.binding("util")}catch(t){}}(),k=O&&O.isTypedArray;function j(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function P(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}function M(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var q,B,D,$=Array.prototype,R=Function.prototype,U=Object.prototype,V=N["__core-js_shared__"],F=R.toString,H=U.hasOwnProperty,z=(q=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",G=U.toString,Z=RegExp("^"+F.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),W=I?N.Buffer:void 0,K=N.Symbol,J=N.Uint8Array,Y=U.propertyIsEnumerable,X=$.splice,Q=K?K.toStringTag:void 0,tt=Object.getOwnPropertySymbols,et=W?W.isBuffer:void 0,nt=(B=Object.keys,D=Object,function(t){return B(D(t))}),it=Lt(N,"DataView"),rt=Lt(N,"Map"),st=Lt(N,"Promise"),ot=Lt(N,"Set"),at=Lt(N,"WeakMap"),lt=Lt(Object,"create"),ct=kt(it),dt=kt(rt),ut=kt(st),ht=kt(ot),pt=kt(at),ft=K?K.prototype:void 0,gt=ft?ft.valueOf:void 0;function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function vt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function yt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bt;++e<n;)this.add(t[e])}function wt(t){var e=this.__data__=new vt(t);this.size=e.size}function xt(t,e){for(var n=t.length;n--;)if(jt(t[n][0],e))return n;return-1}function Ct(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Q&&Q in Object(t)?function(t){var e=H.call(t,Q),n=t[Q];try{t[Q]=void 0;var i=!0}catch(t){}var r=G.call(t);return i&&(e?t[Q]=n:delete t[Q]),r}(t):function(t){return G.call(t)}(t)}function Et(t){return Rt(t)&&Ct(t)==s}function Tt(t,e,n,i,r){return t===e||(null==t||null==e||!Rt(t)&&!Rt(e)?t!=t&&e!=e:function(t,e,n,i,r,d){var f=Mt(t),b=Mt(e),x=f?o:_t(t),C=b?o:_t(e),E=(x=x==s?p:x)==p,T=(C=C==s?p:C)==p,A=x==C;if(A&&qt(t)){if(!qt(e))return!1;f=!0,E=!1}if(A&&!E)return d||(d=new wt),f||Ut(t)?At(t,e,n,i,r,d):function(t,e,n,i,r,s,o){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case y:return!(t.byteLength!=e.byteLength||!s(new J(t),new J(e)));case a:case l:case h:return jt(+t,+e);case c:return t.name==e.name&&t.message==e.message;case g:case v:return t==e+"";case u:var d=P;case m:var p=1&i;if(d||(d=M),t.size!=e.size&&!p)return!1;var f=o.get(t);if(f)return f==e;i|=2,o.set(t,e);var b=At(d(t),d(e),i,r,s,o);return o.delete(t),b;case"[object Symbol]":if(gt)return gt.call(t)==gt.call(e)}return!1}(t,e,x,n,i,r,d);if(!(1&n)){var N=E&&H.call(t,"__wrapped__"),S=T&&H.call(e,"__wrapped__");if(N||S){var L=N?t.value():t,I=S?e.value():e;return d||(d=new wt),r(L,I,n,i,d)}}return!!A&&(d||(d=new wt),function(t,e,n,i,r,s){var o=1&n,a=Nt(t),l=a.length;if(l!=Nt(e).length&&!o)return!1;for(var c=l;c--;){var d=a[c];if(!(o?d in e:H.call(e,d)))return!1}var u=s.get(t);if(u&&s.get(e))return u==e;var h=!0;s.set(t,e),s.set(e,t);for(var p=o;++c<l;){var f=t[d=a[c]],g=e[d];if(i)var m=o?i(g,f,d,e,t,s):i(f,g,d,t,e,s);if(!(void 0===m?f===g||r(f,g,n,i,s):m)){h=!1;break}p||(p="constructor"==d)}if(h&&!p){var v=t.constructor,b=e.constructor;v==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(h=!1)}return s.delete(t),s.delete(e),h}(t,e,n,i,r,d))}(t,e,n,i,Tt,r))}function At(t,e,n,i,r,s){var o=1&n,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t);if(c&&s.get(e))return c==e;var d=-1,u=!0,h=2&n?new yt:void 0;for(s.set(t,e),s.set(e,t);++d<a;){var p=t[d],f=e[d];if(i)var g=o?i(f,p,d,e,t,s):i(p,f,d,t,e,s);if(void 0!==g){if(g)continue;u=!1;break}if(h){if(!j(e,(function(t,e){if(o=e,!h.has(o)&&(p===t||r(p,t,n,i,s)))return h.push(e);var o}))){u=!1;break}}else if(p!==f&&!r(p,f,n,i,s)){u=!1;break}}return s.delete(t),s.delete(e),u}function Nt(t){return function(t,e,n){var i=e(t);return Mt(t)?i:function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}(i,n(t))}(t,Vt,It)}function St(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Lt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!$t(t)||function(t){return!!z&&z in t}(t))&&(Bt(t)?Z:x).test(kt(t))}(n)?n:void 0}mt.prototype.clear=function(){this.__data__=lt?lt(null):{},this.size=0},mt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mt.prototype.get=function(t){var e=this.__data__;if(lt){var n=e[t];return n===i?void 0:n}return H.call(e,t)?e[t]:void 0},mt.prototype.has=function(t){var e=this.__data__;return lt?void 0!==e[t]:H.call(e,t)},mt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=lt&&void 0===e?i:e,this},vt.prototype.clear=function(){this.__data__=[],this.size=0},vt.prototype.delete=function(t){var e=this.__data__,n=xt(e,t);return!(n<0||(n==e.length-1?e.pop():X.call(e,n,1),--this.size,0))},vt.prototype.get=function(t){var e=this.__data__,n=xt(e,t);return n<0?void 0:e[n][1]},vt.prototype.has=function(t){return xt(this.__data__,t)>-1},vt.prototype.set=function(t,e){var n=this.__data__,i=xt(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},bt.prototype.clear=function(){this.size=0,this.__data__={hash:new mt,map:new(rt||vt),string:new mt}},bt.prototype.delete=function(t){var e=St(this,t).delete(t);return this.size-=e?1:0,e},bt.prototype.get=function(t){return St(this,t).get(t)},bt.prototype.has=function(t){return St(this,t).has(t)},bt.prototype.set=function(t,e){var n=St(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},yt.prototype.add=yt.prototype.push=function(t){return this.__data__.set(t,i),this},yt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.clear=function(){this.__data__=new vt,this.size=0},wt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},wt.prototype.get=function(t){return this.__data__.get(t)},wt.prototype.has=function(t){return this.__data__.has(t)},wt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof vt){var i=n.__data__;if(!rt||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new bt(i)}return n.set(t,e),this.size=n.size,this};var It=tt?function(t){return null==t?[]:(t=Object(t),function(e){for(var n=-1,i=null==e?0:e.length,r=0,s=[];++n<i;){var o=e[n];a=o,Y.call(t,a)&&(s[r++]=o)}var a;return s}(tt(t)))}:function(){return[]},_t=Ct;function Ot(t,e){return!!(e=null==e?r:e)&&("number"==typeof t||C.test(t))&&t>-1&&t%1==0&&t<e}function kt(t){if(null!=t){try{return F.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function jt(t,e){return t===e||t!=t&&e!=e}(it&&_t(new it(new ArrayBuffer(1)))!=w||rt&&_t(new rt)!=u||st&&_t(st.resolve())!=f||ot&&_t(new ot)!=m||at&&_t(new at)!=b)&&(_t=function(t){var e=Ct(t),n=e==p?t.constructor:void 0,i=n?kt(n):"";if(i)switch(i){case ct:return w;case dt:return u;case ut:return f;case ht:return m;case pt:return b}return e});var Pt=Et(function(){return arguments}())?Et:function(t){return Rt(t)&&H.call(t,"callee")&&!Y.call(t,"callee")},Mt=Array.isArray,qt=et||function(){return!1};function Bt(t){if(!$t(t))return!1;var e=Ct(t);return e==d||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Dt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=r}function $t(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Rt(t){return null!=t&&"object"==typeof t}var Ut=k?function(t){return function(e){return t(e)}}(k):function(t){return Rt(t)&&Dt(t.length)&&!!E[Ct(t)]};function Vt(t){return null!=(e=t)&&Dt(e.length)&&!Bt(e)?function(t,e){var n=Mt(t),i=!n&&Pt(t),r=!n&&!i&&qt(t),s=!n&&!i&&!r&&Ut(t),o=n||i||r||s,a=o?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)!e&&!H.call(t,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ot(c,l))||a.push(c);return a}(t):function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||U))return nt(t);var e,n,i=[];for(var r in Object(t))H.call(t,r)&&"constructor"!=r&&i.push(r);return i}(t);var e}t.exports=function(t,e){return Tt(t,e)}},8156:(t,e,n)=>{var i=n(7422);t.exports=function(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}},8223:(t,e,n)=>{var i=n(6110)(n(9325),"Map");t.exports=i},8303:(t,e,n)=>{var i=n(6110)(n(9325),"WeakMap");t.exports=i},8317:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(5759);e.default=class{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(t){t||(t=1/0);const e=this.ops[this.index];if(e){const n=this.offset,r=i.default.length(e);if(t>=r-n?(t=r-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};{const i={};return e.attributes&&(i.attributes=e.attributes),"number"==typeof e.retain?i.retain=t:"object"==typeof e.retain&&null!==e.retain?i.retain=e.retain:"string"==typeof e.insert?i.insert=e.insert.substr(n,t):i.insert=e.insert,i}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?i.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?"number"==typeof t.delete?"delete":"number"==typeof t.retain||"object"==typeof t.retain&&null!==t.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const t=this.offset,e=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(i)}}return[]}}},8329:(t,e,n)=>{var i=n(4894);t.exports=function(t,e){return function(n,r){if(null==n)return n;if(!i(n))return t(n,r);for(var s=n.length,o=e?s:-1,a=Object(n);(e?o--:++o<s)&&!1!==r(a[o],o,a););return n}}},8586:(t,e,n)=>{var i=n(6449),r=n(4394),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||o.test(t)||!s.test(t)||null!=e&&t in Object(e)}},8655:(t,e,n)=>{var i=n(6025);t.exports=function(t){return i(this.__data__,t)>-1}},8754:(t,e,n)=>{var i=n(5160);t.exports=function(t,e,n){var r=t.length;return n=void 0===n?r:n,!e&&n>=r?t:i(t,e,n)}},8859:(t,e,n)=>{var i=n(3661),r=n(1380),s=n(1459);function o(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}o.prototype.add=o.prototype.push=r,o.prototype.has=s,t.exports=o},8879:(t,e,n)=>{var i=n(4335)(Object.getPrototypeOf,Object);t.exports=i},8984:(t,e,n)=>{var i=n(5527),r=n(3650),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))s.call(t,n)&&"constructor"!=n&&e.push(n);return e}},9106:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(7193),r=n(8142);var s;!function(t){t.compose=function(t={},e={},n=!1){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});let r=i(e);n||(r=Object.keys(r).reduce(((t,e)=>(null!=r[e]&&(t[e]=r[e]),t)),{}));for(const n in t)void 0!==t[n]&&void 0===e[n]&&(r[n]=t[n]);return Object.keys(r).length>0?r:void 0},t.diff=function(t={},e={}){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});const n=Object.keys(t).concat(Object.keys(e)).reduce(((n,i)=>(r(t[i],e[i])||(n[i]=void 0===e[i]?null:e[i]),n)),{});return Object.keys(n).length>0?n:void 0},t.invert=function(t={},e={}){t=t||{};const n=Object.keys(e).reduce(((n,i)=>(e[i]!==t[i]&&void 0!==t[i]&&(n[i]=e[i]),n)),{});return Object.keys(t).reduce(((n,i)=>(t[i]!==e[i]&&void 0===e[i]&&(n[i]=null),n)),n)},t.transform=function(t,e,n=!1){if("object"!=typeof t)return e;if("object"!=typeof e)return;if(!n)return e;const i=Object.keys(e).reduce(((n,i)=>(void 0===t[i]&&(n[i]=e[i]),n)),{});return Object.keys(i).length>0?i:void 0}}(s||(s={})),e.default=s},9219:t=>{t.exports=function(t,e){return t.has(e)}},9302:(t,e,n)=>{var i=n(3488),r=n(6757),s=n(2865);t.exports=function(t,e){return s(r(t,e,i),t+"")}},9325:(t,e,n)=>{var i=n(4840),r="object"==typeof self&&self&&self.Object===Object&&self,s=i||r||Function("return this")();t.exports=s},9326:(t,e,n)=>{var i=n(1769),r=n(2428),s=n(6449),o=n(361),a=n(294),l=n(7797);t.exports=function(t,e,n){for(var c=-1,d=(e=i(e,t)).length,u=!1;++c<d;){var h=l(e[c]);if(!(u=null!=t&&n(t,h)))break;t=t[h]}return u||++c!=d?u:!!(d=null==t?0:t.length)&&a(d)&&o(h,d)&&(s(t)||r(t))}},9344:(t,e,n)=>{var i=n(3805),r=Object.create,s=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=s},9350:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},9374:(t,e,n)=>{var i=n(4128),r=n(3805),s=n(4394),o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(s(t))return NaN;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=a.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):o.test(t)?NaN:+t}},9570:(t,e,n)=>{var i=n(7334),r=n(3243),s=n(3488),o=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:s;t.exports=o},9653:(t,e,n)=>{var i=n(7828);t.exports=function(t){var e=new t.constructor(t.byteLength);return new i(e).set(new i(t)),e}},9698:t=>{var e=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return e.test(t)}},9770:t=>{t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}},9817:t=>{t.exports=function(t){return this.__data__.has(t)}},9884:(t,e,n)=>{var i=n(1791),r=n(7241);t.exports=function(t){return i(t,r(t))}},9905:t=>{t.exports=function(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}},9935:t=>{t.exports=function(){return!1}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,loaded:!1,exports:{}};return t[i](s,s.exports,n),s.loaded=!0,s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};n.r(t),n.d(t,{Attributor:()=>Ke,AttributorStore:()=>rn,BlockBlot:()=>mn,ClassAttributor:()=>tn,ContainerBlot:()=>bn,EmbedBlot:()=>yn,InlineBlot:()=>fn,LeafBlot:()=>ln,ParentBlot:()=>hn,Registry:()=>Xe,Scope:()=>We,ScrollBlot:()=>Cn,StyleAttributor:()=>nn,TextBlot:()=>Tn});class e{constructor(){this._themes=[],this._services=[],this._forms=[],this._media=[],this._currentThemeId=null,this._organisationLogo=null,this.currentLanguage="en",this._isInitialized=!1}static getInstance(){return e.instance||(e.instance=new e),e.instance}init(t,e,n,i,r,s,o,a){this._isInitialized?console.warn("AppConfig already initialized - ignoring new data"):(this._themes=t,this._services=e,this._forms=n,this._media=i,this._currentThemeId=r,this._organisationLogo=s,this.addServiceButtonEvent=a,this.currentLanguage=o,this._isInitialized=!0)}get themes(){return this._themes}get services(){return this._services}get forms(){return this._forms}get media(){return this._media}set media(t){this._media=t}get currentThemeId(){return this._currentThemeId}set currentThemeId(t){this._currentThemeId=t}get organisationLogo(){return this._organisationLogo}get isInitialized(){return this._isInitialized}}e.instance=null;class i{constructor(t,e=300){this.preloaderElement=t,this.minDuration=e,this._loading=!1,this._startTime=0,this.transitionDuration=200}get loading(){return this._loading}set loading(t){this._loading=t,t?(this._startTime=performance.now(),this.showPreloader()):this.hidePreloader()}showPreloader(){this.preloaderElement.style.display="flex",requestAnimationFrame((()=>{this.preloaderElement.style.transform=`opacity ${this.transitionDuration}ms ease-in-out 0s`,this.preloaderElement.style.opacity="1"}))}hidePreloader(){const t=performance.now()-this._startTime;t>=this.minDuration?(this.preloaderElement.style.transition=`opacity ${this.transitionDuration}ms ease-in-out`,this.preloaderElement.style.opacity="0",setTimeout((()=>{this.preloaderElement.style.display="none"}),this.transitionDuration)):setTimeout((()=>{this.hidePreloader()}),this.minDuration-t)}}var r=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};const s=window.location.origin+(window.location.origin.startsWith("http://localhost")?"/Comforta_version20DevelopmentNETPostgreSQL":"");class o{constructor(){this.services=[],this.forms=[],this.media=[],this.pages=[],this.preloaderEl=document.getElementById("preloader"),this.config=e.getInstance(),this.init()}init(){this.services=this.config.services,this.forms=this.config.forms,this.media=[],this.pages=[],this.getPages(),this.getMediaFiles(),this.loadingManager=new i(this.preloaderEl)}fetchAPI(t){return r(this,arguments,void 0,(function*(t,e={},n=!1){const i={headers:{"Content-Type":"application/json"}};try{n||(this.loadingManager.loading=!0);const r=yield fetch(`${s}${t}`,Object.assign(Object.assign({},i),e));if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return yield r.json()}catch(e){throw console.error(`API Error (${t}):`,e),e}finally{n||(this.loadingManager.loading=!1)}}))}debugApp(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/debug",{method:"POST",body:JSON.stringify({PageUrlList:t})},!0)}))}getVersions(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/appversions",{},!0)}))}createVersion(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-appversion",{method:"POST",body:JSON.stringify({AppVersionName:t})})}))}duplicateVersion(t,e){return r(this,void 0,void 0,(function*(){return console.log("AppVersionId:",t,"versionName: ",e),yield this.fetchAPI("/api/toolbox/v2/copy-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t,AppVersionName:e})})}))}activateVersion(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/activate-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t})})}))}createMenuPage(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-menu-page",{method:"POST",body:JSON.stringify({appVersionId:t,pageName:e})})}))}createServicePage(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/create-service-page",{method:"POST",body:JSON.stringify({appVersionId:t,ProductServiceId:e})})}))}createContentPage(t,e){return r(this,void 0,void 0,(function*(){return alert(t),yield this.fetchAPI("/api/toolbox/v2/create-content-page",{method:"POST",body:JSON.stringify({appVersionId:t,PageName:e})})}))}createServiceCTA(t){return r(this,void 0,void 0,(function*(){const e=yield this.fetchAPI("/api/toolbox/v2/create-service-cta",{method:"POST",body:JSON.stringify(t)});return console.log(e),e}))}autoSavePage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/save-page",{method:"POST",body:JSON.stringify(t)},!0)}))}publishAppVersion(t){return r(this,arguments,void 0,(function*(t,e=!1){return yield this.fetchAPI("/api/toolbox/v2/publish-appversion",{method:"POST",body:JSON.stringify({AppVersionId:t,Notify:e})},!0)}))}getPages(){return r(this,void 0,void 0,(function*(){const t=yield this.fetchAPI("/api/toolbox/pages/list",{},!0);return this.pages=t.SDT_PageCollection,t.SDT_PageCollection}))}getServices(){return r(this,void 0,void 0,(function*(){const t=yield this.fetchAPI("/api/toolbox/services",{},!0);return this.services=t.SDT_ProductServiceCollection,this.services}))}getSinglePage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/toolbox/singlepage?Pageid=${t}`)}))}deletePage(t,e){return r(this,void 0,void 0,(function*(){return console.log({AppVersionId:t,PageId:e}),yield this.fetchAPI("/api/toolbox/V2/delete-page",{method:"POST",body:JSON.stringify({AppVersionId:t,PageId:e})})}))}getPagesService(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/pages/tree")}))}createNewPage(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/create-page",{method:"POST",body:JSON.stringify({PageName:t,PageJsonContent:JSON.stringify({})})})}))}updatePage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-page",{method:"POST",body:JSON.stringify(t)},!0)}))}updatePagesBatch(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-pages-batch",{method:"POST",body:JSON.stringify(t)})}))}addPageChild(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/add-page-children",{method:"POST",body:JSON.stringify({ParentPageId:e,ChildPageId:t})})}))}createDynamicFormPage(t,e){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/create-dynamic-form-page",{method:"POST",body:JSON.stringify({FormId:t,PageName:e})})}))}getLocationTheme(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/location-theme")}))}updateLocationTheme(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/update-location-theme",{method:"POST",body:JSON.stringify({ThemeId:t})})}))}getMediaFiles(){return r(this,void 0,void 0,(function*(){const t=yield this.fetchAPI("/api/toolbox/media",{},!0);return this.media=t.SDT_MediaCollection,t.SDT_MediaCollection}))}deleteMedia(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/media/delete?MediaId=${t}`)}))}uploadFile(t,e,n,i){return r(this,void 0,void 0,(function*(){if(!t)throw new Error("Please select a file!");return yield this.fetchAPI("/api/media/upload",{method:"POST",headers:{"Content-Type":"multipart/form-data"},body:JSON.stringify({MediaName:e,MediaImageData:t,MediaSize:n,MediaType:i})},!0)}))}uploadLogo(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/media/upload/logo",{method:"POST",body:JSON.stringify({LogoUrl:t})})}))}uploadProfileImage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/media/upload/profile",{method:"POST",body:JSON.stringify({ProfileImageUrl:t})})}))}getContentPageData(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI(`/api/productservice?Productserviceid=${t}`,{},!0)}))}updateDescription(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-service",{method:"POST",body:JSON.stringify(t)})}))}updateContentImage(t){return r(this,void 0,void 0,(function*(){return console.log(t),yield this.fetchAPI("/api/toolbox/v2/update-service",{method:"POST",body:JSON.stringify(t)})}))}deleteContentImage(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/delete-service-image",{method:"POST",body:JSON.stringify(t)})}))}getLocationData(){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/get-location",{},!0)}))}updateLocationInfo(t){return r(this,void 0,void 0,(function*(){return yield this.fetchAPI("/api/toolbox/v2/update-location",{method:"POST",body:JSON.stringify(t)})}))}}class a{constructor(t){this.pageId=t}updateTime(){const t=new Date;let e=t.getHours();const n=e>=12?"PM":"AM";return e%=12,e=e||12,`${e}:${t.getMinutes().toString().padStart(2,"0")} ${n}`}}class l{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("header");const t=new a("clock"),e=document.createElement("span");e.id="clock",e.textContent=t.updateTime();const n=document.createElement("span");n.classList.add("icons");const i=document.createElement("i");i.classList.add("fas","fa-signal");const r=document.createElement("i");r.classList.add("fas","fa-wifi");const s=document.createElement("i");s.classList.add("fas","fa-battery"),n.appendChild(i),n.appendChild(r),n.appendChild(s),this.container.appendChild(e),this.container.appendChild(n)}render(t){t.appendChild(this.container)}}class c{constructor(){this.container=document.createElement("div"),this.editor=new sa,this.init()}init(){this.container.classList.add("home-app-bar");const t=document.createElement("div");t.classList.add("logo-added");const e=document.createElement("img");e.src=this.editor.organisationLogo||"/Resources/ComfortaLogo1.png",e.style.height="35px",t.appendChild(e);const n=document.createElement("div");n.classList.add("profile-section"),n.style.display="flex",n.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="18" viewBox="0 0 19.422 21.363">\n                <path id="Path_1327" data-name="Path 1327" d="M15.711,5a6.8,6.8,0,0,0-3.793,12.442A9.739,9.739,0,0,0,6,26.364H7.942a7.769,7.769,0,1,1,15.537,0h1.942A9.739,9.739,0,0,0,19.5,17.442,6.8,6.8,0,0,0,15.711,5Zm0,1.942A4.855,4.855,0,1,1,10.855,11.8,4.841,4.841,0,0,1,15.711,6.942Z" transform="translate(-6 -5)" fill="#fff"></path>\n            </svg>\n        ',this.container.appendChild(t),this.container.appendChild(n)}render(t){t.appendChild(this.container)}}class d{constructor(t,e){this.containerId=e,this.paletteContainer=document.createElement("div"),this.paletteContainer.className="color-palette",this.paletteContainer.id=e,Object.entries(t).forEach((([t,e])=>{const n=document.createElement("div");n.className="color-item";const i=document.createElement("input");i.type="radio",i.id=`color-${t}`,i.name="theme-color",i.value=e;const r=document.createElement("label");r.htmlFor=`color-${t}`,r.className="color-box",r.setAttribute("data-tile-bgcolor",e),r.style.backgroundColor=e,n.appendChild(i),n.appendChild(r),n.addEventListener("click",(n=>{n.preventDefault();const r=globalThis.selectedComponent;if(!r)return;const s=r.parent(),o=s.parent(),a=globalThis.tileMapper.getTile(o.getId(),s.getId());if(null==a?void 0:a.BGImageUrl)return;const l=r.getStyle()["background-color"];r.addStyle({"background-color":l===e?"transparent":e}),console.log("Tile Attributes",e),r.getEl().style.backgroundColor=l===e?"transparent":e,globalThis.tileMapper.updateTile(r.parent().getId(),"BGColor",t),i.checked=l!==e})),this.paletteContainer.appendChild(n)}))}render(t){t.appendChild(this.paletteContainer)}refresh(t){const e=document.getElementById(this.containerId);e?e.replaceWith(this.paletteContainer):t.appendChild(this.paletteContainer)}}const u='\n    data-gjs-draggable="false"\n    data-gjs-selectable="true"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',h='\n    data-gjs-draggable="true"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n    data-gjs-type="tile-wrapper"\n',p='\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',f='\n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type=\'tile-wrapper\']"\n',g='\n    data-gjs-draggable="true"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-droppable="false"\n    data-gjs-highlightable="false"\n    data-gjs-hoverable="false"\n',m='\n    data-gjs-draggable="true"\n    data-gjs-selectable="true"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n',v='\n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type=\'cta-buttons\']"\n';const b=t=>{let e="";for(let n=0;n<t;n++)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".charAt(Math.floor(52*Math.random()));return e+(new Date).toISOString().replace(/[-:.TZ]/g,"")};function y(t){return e=this,n=void 0,r=function*(){const e=yield fetch(t),n=yield e.blob();return new Promise(((t,e)=>{const i=new FileReader;i.onloadend=()=>t(i.result),i.onerror=e,i.readAsDataURL(n)}))},new((i=void 0)||(i=Promise))((function(t,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(o,a)}l((r=r.apply(e,n||[])).next())}));var e,n,i,r}function w(t,e){return t.length>e?t.slice(0,e)+"...":t}class x{constructor(t){this.pageId=t}contentRow(t){return JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),{ContentType:t.ContentType,ContentValue:t.Content}}moveContentRow(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Content))return;const r=i.PageContentStructure.Content,s=r.findIndex((e=>e.ContentId===t));if(-1===s||e<0||e>=r.length)return;const[o]=r.splice(s,1);r.splice(e,0,o),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i))}updateContentDescription(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Content))return!1;const r=i.PageContentStructure.Content.find((e=>e.ContentId===t));return!!r&&(r.ContentValue=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),!0)}updateContentImage(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Content))return!1;const r=i.PageContentStructure.Content.find((e=>e.ContentId===t));return!!r&&(r.ContentValue=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),!0)}moveCta(t,e){var n;const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(!(null===(n=null==i?void 0:i.PageContentStructure)||void 0===n?void 0:n.Cta))return;const r=i.PageContentStructure.Cta,s=r.findIndex((e=>e.CtaId===t));if(-1===s||e<0||e>=r.length)return;const[o]=r.splice(s,1);r.splice(e,0,o),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i))}addContentCta(t){var e;const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),i={CtaId:t.CtaId,CtaType:t.CtaType,CtaLabel:t.CtaLabel,CtaAction:t.CtaAction,CtaBGColor:t.CtaBGColor,CtaButtonType:t.CtaButtonType,CtaButtonImgUrl:t.CtaButtonImgUrl};n.PageContentStructure.Cta||(n.PageContentStructure.Cta=[]),null===(e=null==n?void 0:n.PageContentStructure)||void 0===e||e.Cta.push(i),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n))}removeContentCta(t){const e=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(e&&e.PageContentStructure&&e.PageContentStructure.Cta){const n=e.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==n&&e.PageContentStructure.Cta[n])return e.PageContentStructure.Cta.splice(n,1),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(e)),!0}}updateContentCtaBGColor(t,e){const n=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(n&&n.PageContentStructure&&n.PageContentStructure.Cta){const i=n.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==i&&n.PageContentStructure.Cta[i])return n.PageContentStructure.Cta[i].CtaBGColor=e,localStorage.setItem(`data-${this.pageId}`,JSON.stringify(n)),!0}}updateContentButtonType(t,e,n){const i=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(i&&i.PageContentStructure&&i.PageContentStructure.Cta){const r=i.PageContentStructure.Cta.findIndex((e=>e.CtaId===t));if(-1!==r&&i.PageContentStructure.Cta[r])return i.PageContentStructure.Cta[r].CtaButtonType=e,n&&(i.PageContentStructure.Cta[r].CtaButtonImgUrl=n),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(i)),!0}}getContentCta(t){const e=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(e&&e.PageContentStructure&&e.PageContentStructure.Cta)return e.PageContentStructure.Cta.find((e=>e.CtaId===t))}}class C{constructor(){this.themeManager=new I}getTypeSVG(t){let e;switch(t){case"Phone":e=`\n            <svg ${p} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                        viewBox="0 0 49.417 49.418">\n                <path ${p} id="call" data-gjs-type="svg-in"\n                    d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                    transform="translate(-4 -3)" fill="#fff"></path>\n            </svg>\n            `;break;case"Email":e=`\n            <svg ${p} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n                height="28" viewBox="0 0 41 32.8">\n                <path ${p} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                    d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                    transform="translate(-2 -4)" fill="#fff"></path>\n            </svg>\n            `;break;case"SiteUrl":e=`\n            <svg ${p} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n                <path${p} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n            </svg>\n            `;break;case"Form":e=`\n            <svg ${p} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n                  viewBox="0 0 13 16">\n                  <path ${p} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                      d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                      transform="translate(-8 -4)" fill="#fff"></path>\n              </svg>\n            `}return e}phoneCta(t,e){return`\n        <div ${m} data-gjs-type="cta-buttons" button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${p} data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${p} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                            viewBox="0 0 49.417 49.418">\n                            <path ${p} id="call" data-gjs-type="svg-in"\n                                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                                transform="translate(-4 -3)" fill="#fff"></path>\n                        </svg>\n                        <div ${p} id="it1cq" data-gjs-type="default" class="cta-badge">\n                            <i ${p} id="ityrb" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                    </div>\n                    <div ${p} id="irtak" data-gjs-type="text" class="cta-label">${t.CallToActionName}</div>\n        </div>\n        `}emailCta(t,e){return`\n        <div ${m} data-gjs-type="cta-buttons"  button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${p} id="i4iaf" data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${p} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n                            height="28" viewBox="0 0 41 32.8">\n                            <path ${p} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                                transform="translate(-2 -4)" fill="#fff"></path>\n                        </svg>\n                        <div ${p} id="i2knu" data-gjs-type="default" class="cta-badge">\n                            <i ${p} id="idkak" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                    </div>\n                    <div ${p} id="irtak" data-gjs-type="text" class="cta-label">${t.CallToActionName}</div>\n        </div>\n        `}formCta(t,e){return`\n        <div ${m} data-gjs-type="cta-buttons"  button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n                    <div ${p} id="i9rww" data-gjs-type="default" class="cta-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                        <svg ${p} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n                            viewBox="0 0 13 16">\n                            <path ${p} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                                d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                                transform="translate(-8 -4)" fill="#fff"></path>\n                        </svg>\n                        <div ${p} id="iina3" data-gjs-type="default" class="cta-badge">\n                            <i ${p} id="iw1yc" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div>\n                    </div>\n                    <div ${p} id="irtak" data-gjs-type="text" class="cta-label">${t.CallToActionName}</div>\n        </div>\n        `}urlCta(t,e){return`\n        <div ${m} data-gjs-type="cta-buttons"  button-type="${t.CallToActionType}" class="cta-container-child cta-child" id="${e}">\n            <div ${p} id="i4iaf" data-gjs-type="default" class="cta-button cta-styled-btn"\n                style="background-color: ${this.themeManager.getThemeCtaColor("CtaColorOne")}">\n                <svg ${p} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n                    <path${p} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n                </svg>\n                <div ${p} id="i2knu" data-gjs-type="default" class="cta-badge">\n                    <i ${p} id="idkak" data-gjs-type="default" class="fa fa-minus"></i>\n                </div>\n            </div>\n            <div ${p} id="irtak" data-gjs-type="text" class="cta-label">${t.CallToActionName}</div>\n        </div>\n        `}}class E{constructor(){this.editor=globalThis.activeEditor;const t=globalThis.currentPageId;this.contentMapper=new x(t),this.themeManager=new I,this.ctaSvgManager=new C}addCtaButton(t){const e=this.editor.Components.getWrapper().find(".cta-button-container")[0];if(e){const n=b(12),{ctaButtonEl:i,ctaAction:r}=this.getIconAndAction(t,n),s={CtaId:n,CtaLabel:t.CallToActionName,CtaType:t.CallToActionType,CtaButtonType:"Round",CtaBGColor:"CtaColorOne",CtaAction:r};if(this.checkIfExisting(i)){const t=globalThis.selectedComponent;return void(t&&t.parent().getClasses().includes("cta-button-container")&&(this.contentMapper.removeContentCta(t.getId()),t.replaceWith(i),this.contentMapper.addContentCta(s)))}e.append(i),this.contentMapper.addContentCta(s)}}checkIfExisting(t){const e=document.createElement("div");e.innerHTML=t;const n=e.querySelector("[button-type]");if(!n)return!1;const i=n.getAttribute("button-type"),r=this.editor.Components.getWrapper().getEl().querySelectorAll(".cta-button-container [button-type]");return Array.from(r).some((t=>t.getAttribute("button-type")===i))}changeCtaColor(t){const e=globalThis.selectedComponent;if(!e)return;const n=e.find(".cta-styled-btn")[0];if(n){n.addStyle({"background-color":t.CtaColorCode}),n.getEl().style.backgroundColor=t.CtaColorCode;const e=n.parent();this.contentMapper.updateContentCtaBGColor(e.getId(),t.CtaColorName)}}changeToPlainButton(){const t=globalThis.selectedComponent;if(!t)return;const e=this.contentMapper.getContentCta(t.getId());if(e&&t){const n=`\n                <div id="${e.CtaId}" \n                    button-type="${e.CtaType}"\n                    class="plain-button-container"\n                     ${m}>\n                    <button ${p} class="plain-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <div ${p} id="ihd0f" class="cta-badge">\n                                <i ${p} id="i7o62" data-gjs-type="default" class="fa fa-minus"></i>\n                        </div> ${e.CtaLabel} \n                    </button>\n                </div>\n            `;this.selectComponentAfterAdd(e.CtaId,t,n),this.contentMapper.updateContentButtonType(e.CtaId,"FullWidth")}}changeToIconButton(){const t=globalThis.selectedComponent;if(!t)return;const e=this.contentMapper.getContentCta(t.getId()),n=this.ctaSvgManager.getTypeSVG(null==e?void 0:e.CtaType);if(e&&t){const i=`\n                <div id="${e.CtaId}" \n                    button-type="${e.CtaType}"\n                    ${m} \n                    data-gjs-type="cta-buttons" \n                    class="img-button-container">\n                    <div ${p} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <span ${p} class="img-button-icon">\n                            ${n} \n                        </span>\n                        <div${p} class="cta-badge">\n                            <i ${p} class="fa fa-minus"></i>\n                        </div>\n                        <span ${p} class="img-button-label">${e.CtaLabel}</span>\n                        <i ${p} class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>\n            `;this.selectComponentAfterAdd(e.CtaId,t,i),this.contentMapper.updateContentButtonType(e.CtaId,"Icon")}}changeToImgButton(){const t=globalThis.selectedComponent;if(!t)return;const e=this.contentMapper.getContentCta(t.getId());if(e&&t){const n=`\n                <div id="${e.CtaId}" \n                    button-type="${e.CtaType}"\n                    ${m} \n                    data-gjs-type="cta-buttons" \n                    class="img-button-container">\n                    <div ${p} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(e.CtaBGColor)}">\n                        <span ${p} class="img-button-section">\n                            <img ${p} \n                                src="${e.CtaButtonImgUrl?e.CtaButtonImgUrl:"/Resources/UCGrapes1/src/images/image.png"}" \n                            />\n                            <span ${p} class="edit-cta-image">\n                                ${e.CtaButtonImgUrl?`\n                                  <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                                        <g ${p} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                            <circle ${p} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                            <circle ${p} cx="16.5" cy="16.5" r="16" fill="none"/>\n                                        </g>\n                                        <path ${p} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                                    </svg>\n                                    `:`\n                                    <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                                        <g ${p} id="Group_2309" data-name="Group 2309">\n                                            <g ${p} id="Group_2307" data-name="Group 2307">\n                                            <g ${p} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                                                <circle ${p} cx="11" cy="11" r="11" stroke="none"/>\n                                                <circle ${p} cx="11" cy="11" r="10.5" fill="none"/>\n                                            </g>\n                                            </g>\n                                        </g>\n                                        <path ${p} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n                                    </svg>\n                                `}\n                            </span>\n                        </span>\n                        <div${p} class="cta-badge">\n                            <i ${p} class="fa fa-minus"></i>\n                        </div>\n                        <span ${p} class="img-button-label">${e.CtaLabel}</span>\n                        <i ${p} class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>\n            `;this.selectComponentAfterAdd(e.CtaId,t,n),this.contentMapper.updateContentButtonType(e.CtaId,"Image","/Resources/UCGrapes1/src/images/image.png")}}selectComponentAfterAdd(t,e,n){this.editor.once("component:add",(()=>{const e=this.editor.getWrapper().find(`#${t}`)[0];e&&this.editor.select(e)})),e.replaceWith(n)}removeCta(t){const e=t.parentElement,n=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0];if(n){const t=n.parent();null==t||t.remove(),this.contentMapper.removeContentCta(t.getId())}}getIconAndAction(t,e){let n,i;switch(null==t?void 0:t.CallToActionType){case"Phone":n=this.ctaSvgManager.phoneCta(t,e),i=null==t?void 0:t.CallToActionPhoneNumber;break;case"Email":n=this.ctaSvgManager.emailCta(t,e),i=null==t?void 0:t.CallToActionEmail;break;case"SiteUrl":n=this.ctaSvgManager.urlCta(t,e),i=null==t?void 0:t.CallToActionUrl;break;case"Form":n=this.ctaSvgManager.formCta(t,e),i=null==t?void 0:t.CallToActionUrl}return{ctaButtonEl:n,ctaAction:i}}}class T{constructor(t){this.colorList=t,this.ctaManager=new E,this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("cta-style"),this.container.id="cta-style",this.container.style.display="flex";const t=document.createElement("div");t.classList.add("text-color-palette"),t.classList.add("text-colors"),t.id="cta-color-palette",this.colorList.forEach((e=>{const n=document.createElement("div");n.classList.add("color-item");const i=document.createElement("input");i.type="radio",i.name="cta-color",i.value=e.CtaColorCode,i.id=e.CtaColorCode;const r=document.createElement("label");r.setAttribute("for",e.CtaColorCode),r.classList.add("color-box"),r.style.backgroundColor=e.CtaColorCode,n.appendChild(i),n.appendChild(r),t.appendChild(n),r.addEventListener("click",(()=>{this.ctaManager.changeCtaColor(e)})),t.appendChild(n)})),this.container.appendChild(t)}render(t){t.appendChild(this.container)}refresh(t){const e=document.getElementById("cta-style");e?e.replaceWith(this.container):t.appendChild(this.container)}}class A{constructor(t,e){this.icons=[],this.iconsCategory="General",this.themeManager=t,this.iconsCategory=e,this.init()}init(){this.icons=[],this.themeManager.getActiveThemeIcons().filter((t=>t.IconCategory===this.iconsCategory)).forEach((t=>{const e=document.createElement("div");e.classList.add("icon"),e.title=t.IconName,e.innerHTML=`${t.IconSVG}`,e.addEventListener("click",(e=>{var n;e.preventDefault();const i=globalThis.selectedComponent;if(!i)return;const r=i.find(".tile-icon")[0];if(!r)return;const s=null===(n=i.getStyle())||void 0===n?void 0:n.color,o=t.IconSVG.replace(/fill="#[^"]*"/g,`fill="${s||"white"}"`).replace("<svg",`<svg ${p}`);r.components(o),r.parent().addStyle({display:"block"}),globalThis.tileMapper.updateTile(i.parent().getId(),"Icon",t.IconName)})),this.icons.push(e)}))}render(t){this.icons.forEach((e=>t.appendChild(e)))}}var N=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class S{constructor(){this.themes=[],this.config=e.getInstance()}getActiveVersion(){return N(this,void 0,void 0,(function*(){var t;const e=new o,n=yield e.getVersions();return(null===(t=null==n?void 0:n.AppVersions)||void 0===t?void 0:t.find((t=>t.IsActive)))||null}))}getActiveVersionId(){return N(this,void 0,void 0,(function*(){return(yield this.getActiveVersion()).AppVersionId}))}}var L=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class I{constructor(){this.themes=[],this.config=e.getInstance(),this.appVersionManager=new S,this.setThemes(this.config.themes)}setThemes(t){this.themes=t,this.currentTheme=this.getThemes().find((t=>t.ThemeId===this.config.currentThemeId))}getThemes(){return this.themes}getActiveThemeIcons(){return this.currentTheme?this.currentTheme.ThemeIcons:[]}getActiveThemeColors(){return this.currentTheme?this.currentTheme.ThemeColors:{}}getActiveThemeCtaColors(){return this.currentTheme?this.currentTheme.ThemeCtaColors:{}}setTheme(t){this.currentTheme=t,this.config.currentThemeId=t.ThemeId,this.updateColorPallete(t.ThemeColors),this.updateCtaColorPallete(t.ThemeCtaColors),this.updateThemeIcons(),this.applyTheme(t)}updateColorPallete(t){const e=new d(t,"theme-color-palette"),n=document.querySelector(".sidebar-section .theme-section");e&&e.refresh(n)}updateCtaColorPallete(t){const e=new T(t),n=document.getElementById("content-page-section");n&&e.refresh(n)}updateThemeIcons(){const t=document.getElementById("icons-list");t.classList.add("icons-list"),t.id="icons-list",t.innerHTML="",new A(this,"General").render(t)}getThemeColor(t){return this.currentTheme&&this.currentTheme.ThemeColors?this.currentTheme.ThemeColors[t]||"transparent":(console.error("ThemeColors is undefined or invalid:",this.currentTheme),null)}getThemeCtaColor(t){var e;return t||(t="CtaColorOne"),this.currentTheme&&this.currentTheme.ThemeCtaColors?(null===(e=this.currentTheme.ThemeCtaColors.find((e=>e.CtaColorName===t)))||void 0===e?void 0:e.CtaColorCode)||"#5068a8":(console.error("ThemeColors is undefined or invalid:",this.currentTheme),null)}getThemeIcon(t){var e,n;return(null===(n=null===(e=this.getActiveThemeIcons())||void 0===e?void 0:e.find((e=>e.IconName===t)))||void 0===n?void 0:n.IconSVG)||null}applyTheme(t){return L(this,void 0,void 0,(function*(){const e=document.querySelectorAll(".mobile-frame iframe");if(!e.length)return;const n=yield this.appVersionManager.getActiveVersion();n&&n.Pages.forEach((n=>L(this,void 0,void 0,(function*(){var i,r;const s=`data-${n.PageId}`,o=JSON.parse(localStorage.getItem(s)||"{}");if(o.PageMenuStructure&&(null===(i=o.PageMenuStructure)||void 0===i?void 0:i.Rows).forEach((n=>{n.Tiles.forEach((n=>{n.BGColor&&e.forEach((e=>{var i,r;const s=e.contentDocument||(null===(i=e.contentWindow)||void 0===i?void 0:i.document);if(s){this.updateFontFamily(s,t.ThemeFontFamily);const e=s.getElementById(n.Id);if(e){const i=e.querySelector(".template-block");i&&(i.style.backgroundColor=null===(r=null==t?void 0:t.ThemeColors)||void 0===r?void 0:r[n.BGColor]),this.updateTileIcon(n,e)}}}))}))})),o.PageContentStructure){const t=null===(r=o.PageContentStructure)||void 0===r?void 0:r.Cta;null==t||t.forEach(((t,n)=>{e.forEach((e=>{var n;const i=e.contentDocument||(null===(n=e.contentWindow)||void 0===n?void 0:n.document);if(i){const e=i.querySelector(`#${t.CtaId}`);e&&(e.querySelector(".cta-styled-btn").style.backgroundColor=this.getThemeCtaColor(t.CtaBGColor))}}))}))}}))))}))}updateTileIcon(t,e){if(t&&e){const n=e.querySelector(".tile-icon");if(n){const e=n.querySelector("svg");if(e){let i=this.getThemeIcon(t.Icon);if(i){i=i.replace('fill="#7c8791"',`fill="${t.Color}"`);const r=document.createElement("div");r.innerHTML=i.trim();const s=r.firstChild;s&&(e.remove(),n.appendChild(s))}}}}}updateFontFamily(t,e="Comic Sans MS"){try{t.documentElement.style.setProperty("--font-family",e)}catch(t){console.error("Error updating font family:",t)}}}class _{constructor(){this.ctaManager=new E,this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("cta-button-layout-container"),this.container.style.display="none";const t=document.createElement("button");t.classList.add("tb-btn","cta-button-layout"),t.id="plain-button-layout",t.innerText="Plain";const e=document.createElement("button");e.classList.add("tb-btn","cta-button-layout"),e.id="image-button-layout",e.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40.999 28.865">\n                <path id="Path_1040" data-name="Path 1040" d="M21.924,11.025a3.459,3.459,0,0,0-3.287,3.608,3.459,3.459,0,0,0,3.287,3.608,3.459,3.459,0,0,0,3.287-3.608A3.459,3.459,0,0,0,21.924,11.025ZM36.716,21.849l-11.5,14.432-8.218-9.02L8.044,39.89h41Z" transform="translate(-8.044 -11.025)" fill="#4c5357"></path>\n            </svg>\n            Image\n        ';const n=document.createElement("button");n.classList.add("tb-btn","cta-button-layout"),n.id="image-button-layout",n.innerHTML='\n            <svg width="800px" height="800px" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n                <path d="M8.135 12.736l-.764 1.058A6.297 6.297 0 1 1 13.281 5h-1.138a5.286 5.286 0 1 0-4.644 7.8 5.201 5.201 0 0 0 .636-.064zM11 6v6.923l1 1.385V7h10v10h-8.056l.723 1H23V6zm6.044 17H1.956L9.5 12.554zM9.5 14.262L3.911 22H15.09z"/>\n                <path fill="none" d="M0 0h24v24H0z"/>\n            </svg>\n            Icon\n        ',t.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToPlainButton()})),n.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToIconButton()})),e.addEventListener("click",(t=>{t.preventDefault(),this.ctaManager.changeToImgButton()})),this.container.appendChild(t),this.container.appendChild(n),this.container.appendChild(e)}render(t){t.appendChild(this.container)}}class O{constructor(t){this.iconsList=t,this.ctaManager=new E,this.container=document.createElement("div"),this.init()}init(){var t;this.container.id="call-to-actions",null===(t=this.iconsList)||void 0===t||t.forEach((t=>{const e=document.createElement("div");e.className="call-to-action-item",e.title=t.CallToActionName,"Phone"===t.CallToActionType?e.innerHTML=k.phone:"Email"===t.CallToActionType?e.innerHTML=k.email:"SiteUrl"===t.CallToActionType?e.innerHTML=k.website_url:"Map"===t.CallToActionType||"Form"===t.CallToActionType&&(e.innerHTML=k.form),e.addEventListener("click",(()=>{this.ctaManager.addCtaButton(t)})),this.container.appendChild(e)}))}render(t){const e=t.querySelector("#call-to-actions");e&&e.remove(),t.appendChild(this.container)}}const k={phone:'<svg data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 49.417 49.418">\n                <path data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" id="call" d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z" transform="translate(-4 -3)" fill="#fff"></path>\n            </svg>',email:'<svg data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" xmlns="http://www.w3.org/2000/svg" width="32" height="28" viewBox="0 0 41 32.8">\n                <path data-gjs-draggable="false" data-gjs-selectable="false" data-gjs-editable="false" data-gjs-highlightable="false" data-gjs-droppable="false" data-gjs-resizable="false" data-gjs-hoverable="false" id="Path_1218" data-name="Path 1218" d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z" transform="translate(-2 -4)" fill="#fff"></path>\n            </svg>',form:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 16">\n            <path id="Path_1209" data-name="Path 1209" d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z" transform="translate(-8 -4)" fill="#747474"/>\n          </svg>',website_url:'\n            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n                <path id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#747474"/>\n            </svg>'};var j=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class P{constructor(t){this.page=t,this.themeManager=new I,this.container=document.createElement("div"),this.initializeContentSection()}initializeContentSection(){return j(this,void 0,void 0,(function*(){try{if(this.checkIfRendered())return;this.toggleSideBar(),yield this.prepareContentData(),this.setupContainerStyles(),this.renderComponents()}catch(t){console.error("Error initializing Content Section:",t)}}))}checkIfRendered(){const t=document.getElementById("pages-content");return!(!t||!t.querySelector("#content-page-section"))}prepareContentData(){return j(this,void 0,void 0,(function*(){var t;const e=new o;if("Location"===this.page.PageName||"Reception"===this.page.PageName){const t=yield e.getLocationData();if(!t)return;const n=null==t?void 0:t.BC_Trn_Location;this.iconsList=[{CallToActionName:"Phone",CallToActionPhone:null==n?void 0:n.LocationPhone,CallToActionType:"Phone"},{CallToActionName:"Email",CallToActionEmail:null==n?void 0:n.LocationEmail,CallToActionType:"Email"}]}else{const n=yield e.getContentPageData(null===(t=this.page)||void 0===t?void 0:t.PageId);n&&(this.iconsList=n.SDT_ProductService.CallToActions)}}))}setupContainerStyles(){this.container.classList.add("sidebar-section","content-page-section"),this.container.id="content-page-section",this.container.style.display="block"}renderComponents(){const t=new _,e=new O(this.iconsList),n=this.themeManager.currentTheme.ThemeCtaColors,i=new T(n);this.container.innerHTML="",t.render(this.container),e.render(this.container),i.render(this.container),this.render()}toggleSideBar(){const t=document.getElementById("menu-page-section");t&&(t.style.display="none")}render(){const t=document.getElementById("pages-content");if(t){const e=t.querySelector("#content-page-section");e&&t.removeChild(e),t.appendChild(this.container)}}}class M{constructor(t){this.data=t,this.themeManager=new I}generateCta(t){return"Image"===t.CtaButtonType?`<div id="${t.CtaId}" data-gjs-type="cta-buttons"\n                ${m} \n                  button-type="${t.CtaType}"\n                  class="img-button-container">\n                    <div ${p} class="img-button cta-styled-btn"\n                        style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                        <span ${p} class="img-button-section">\n                            <img ${p} src="${t.CtaButtonImgUrl}" />\n                            <span ${p} class="edit-cta-image">\n                                ${t.CtaButtonImgUrl?`\n                                <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                                  <g ${p} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                                    <circle ${p} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                                    <circle ${p} cx="16.5" cy="16.5" r="16" fill="none"/>\n                                  </g>\n                                  <path ${p} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                                </svg>\n                                `:`\n                                 <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_53_4" data-name="Component 53 – 4" width="22" height="22" viewBox="0 0 22 22">\n                                    <g ${p} id="Group_2309" data-name="Group 2309">\n                                        <g ${p} id="Group_2307" data-name="Group 2307">\n                                        <g ${p} id="Ellipse_6" data-name="Ellipse 6" fill="#fdfdfd" stroke="#5068a8" stroke-width="1">\n                                            <circle ${p} cx="11" cy="11" r="11" stroke="none"/>\n                                            <circle ${p} cx="11" cy="11" r="10.5" fill="none"/>\n                                        </g>\n                                        </g>\n                                    </g>\n                                    <path ${p} id="Icon_ionic-ios-add" data-name="Icon ionic-ios-add" d="M18.342,13.342H14.587V9.587a.623.623,0,1,0-1.245,0v3.755H9.587a.623.623,0,0,0,0,1.245h3.755v3.755a.623.623,0,1,0,1.245,0V14.587h3.755a.623.623,0,1,0,0-1.245Z" transform="translate(-2.965 -2.965)" fill="#5068a8"/>\n                                </svg>\n                                `}\n                            </span>\n                        </span>\n                        <div${p} class="cta-badge">\n                            <i ${p} class="fa fa-minus"></i>\n                        </div>\n                        <span ${p} class="img-button-label">${t.CtaLabel}</span>\n                        <i ${p} class="fa fa-angle-right img-button-arrow"></i>\n                    </div>\n                </div>`:"FullWidth"===t.CtaButtonType?`\n            <div\n                id="${t.CtaId}"\n                ${m} \n                data-gjs-type="cta-buttons"\n                button-type="${t.CtaType}"\n                class="plain-button-container"\n            >\n                <button ${p} id="ibob6" data-gjs-type="default" class="plain-button cta-styled-btn"\n                  style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                    <div ${p} id="iyocy" data-gjs-type="default" class="cta-badge">\n                        <i ${p} id="ifxn6" data-gjs-type="default" class="fa fa-minus"></i>\n                    </div>\n                    Form\n                </button>\n            </div>\n            `:"Icon"===t.CtaButtonType?`\n          <div id="${t.CtaId}" data-gjs-type="cta-buttons"\n            ${m} \n              button-type="${t.CtaType}"\n              class="img-button-container">\n                <div ${p} class="img-button cta-styled-btn"\n                    style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                    <span ${p} class="img-button-icon">\n                      ${this.ctaIcon(t)}\n                    </span>\n                    <div${p} class="cta-badge">\n                        <i ${p} class="fa fa-minus"></i>\n                    </div>\n                    <span ${p} class="img-button-label">${t.CtaLabel}</span>\n                    <i ${p} class="fa fa-angle-right img-button-arrow"></i>\n                </div>\n            </div>\n      `:"Round"===t.CtaButtonType?`\n            <div ${m} \n              data-gjs-type="cta-buttons" \n              button-type="${t.CtaType}" \n              class="cta-container-child cta-child"\n              id="${t.CtaId}">              \n                <div class="cta-button cta-styled-btn" ${p}\n                  style="background-color: ${this.themeManager.getThemeCtaColor(t.CtaBGColor)}">\n                    ${this.ctaIcon(t)}\n                    <div class="cta-badge" ${p}><i ${p} data-gjs-type="default" class="fa fa-minus"></i></div>\n                </div>\n                <div class="cta-label" ${p}>${t.CtaLabel}</div>\n            </div>\n            `:void 0}ctaIcon(t){let e;switch(t.CtaType){case"Phone":e=`\n        <svg ${p} id="ixdtl" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32" height="32"\n                    viewBox="0 0 49.417 49.418">\n            <path ${p} id="call" data-gjs-type="svg-in"\n                d="M29.782,3a2.149,2.149,0,1,0,0,4.3A19.3,19.3,0,0,1,49.119,26.634a2.149,2.149,0,1,0,4.3,0A23.667,23.667,0,0,0,29.782,3ZM12.032,7.305a2.548,2.548,0,0,0-.818.067,8.342,8.342,0,0,0-3.9,2.342C2.775,14.254.366,21.907,17.437,38.98S42.16,53.643,46.7,49.1a8.348,8.348,0,0,0,2.346-3.907,2.524,2.524,0,0,0-1.179-2.786c-2.424-1.418-7.654-4.484-10.08-5.9a2.523,2.523,0,0,0-2.568.012l-4.012,2.392a2.517,2.517,0,0,1-2.845-.168,65.811,65.811,0,0,1-5.711-4.981,65.07,65.07,0,0,1-4.981-5.711A2.512,2.512,0,0,1,17.5,25.2L19.9,21.191a2.533,2.533,0,0,0,.008-2.577L14.012,8.556A2.543,2.543,0,0,0,12.032,7.305Zm17.751,4.289a2.149,2.149,0,1,0,0,4.3A10.709,10.709,0,0,1,40.525,26.634a2.149,2.149,0,1,0,4.3,0A15.072,15.072,0,0,0,29.782,11.594Zm0,8.594a2.149,2.149,0,1,0,0,4.3,2.114,2.114,0,0,1,2.149,2.148,2.149,2.149,0,1,0,4.3,0A6.479,6.479,0,0,0,29.782,20.188Z"\n                transform="translate(-4 -3)" fill="#fff"></path>\n        </svg>\n        `;break;case"Email":e=`\n        <svg ${p} id="inavf" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="32"\n            height="28" viewBox="0 0 41 32.8">\n            <path ${p} id="Path_1218" data-gjs-type="svg-in" data-name="Path 1218"\n                d="M6.1,4A4.068,4.068,0,0,0,2.789,5.7a1.5,1.5,0,0,0,.444,2.126l18,11.219a2.387,2.387,0,0,0,2.531,0L41.691,7.732a1.5,1.5,0,0,0,.384-2.2A4.063,4.063,0,0,0,38.9,4Zm35.907,8.376a.963.963,0,0,0-.508.152L23.765,23.711a2.392,2.392,0,0,1-2.531,0L3.5,12.656a.98.98,0,0,0-1.5.833V32.7a4.1,4.1,0,0,0,4.1,4.1H38.9A4.1,4.1,0,0,0,43,32.7V13.357A.981.981,0,0,0,42.007,12.376Z"\n                transform="translate(-2 -4)" fill="#fff"></path>\n        </svg>\n        `;break;case"SiteUrl":e=`\n        <svg ${p} xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16">\n          <path${p} id="Path_1213" data-name="Path 1213" d="M15.833,4a4.163,4.163,0,0,0-2.958,1.229l-.979.979a4.168,4.168,0,0,0-1.229,2.958,4.1,4.1,0,0,0,.292,1.521L12.042,9.6a2.857,2.857,0,0,1,.792-2.458l.979-.979a2.853,2.853,0,0,1,2.021-.833,2.805,2.805,0,0,1,2,.833,2.85,2.85,0,0,1,0,4.021l-.979.979A2.853,2.853,0,0,1,14.833,12a2.439,2.439,0,0,1-.437-.042l-1.083,1.083a4.1,4.1,0,0,0,1.521.292A4.163,4.163,0,0,0,17.792,12.1l.979-.979A4.168,4.168,0,0,0,20,8.167,4.2,4.2,0,0,0,15.833,4ZM14.188,8.854,8.854,14.188l.958.958,5.333-5.333ZM9.167,10.667A4.163,4.163,0,0,0,6.208,11.9l-.979.979A4.168,4.168,0,0,0,4,15.833,4.2,4.2,0,0,0,8.167,20a4.163,4.163,0,0,0,2.958-1.229l.979-.979a4.168,4.168,0,0,0,1.229-2.958,4.1,4.1,0,0,0-.292-1.521L11.958,14.4a2.857,2.857,0,0,1-.792,2.458l-.979.979a2.853,2.853,0,0,1-2.021.833,2.805,2.805,0,0,1-2-.833,2.85,2.85,0,0,1,0-4.021l.979-.979A2.853,2.853,0,0,1,9.167,12a2.44,2.44,0,0,1,.438.042l1.083-1.083A4.1,4.1,0,0,0,9.167,10.667Z" transform="translate(-4 -4)" fill="#fff"></path>\n        </svg>\n        `;break;case"Form":e=`\n        <svg ${p} id="igqdh" data-gjs-type="svg" xmlns="http://www.w3.org/2000/svg" width="26" height="30"\n              viewBox="0 0 13 16">\n              <path ${p} id="Path_1209" data-gjs-type="svg-in" data-name="Path 1209"\n                  d="M9.828,4A1.823,1.823,0,0,0,8,5.8V18.2A1.823,1.823,0,0,0,9.828,20h9.344A1.823,1.823,0,0,0,21,18.2V9.8a.6.6,0,0,0-.179-.424l-.006-.006L15.54,4.176A.614.614,0,0,0,15.109,4Zm0,1.2H14.5V8.6a1.823,1.823,0,0,0,1.828,1.8h3.453v7.8a.6.6,0,0,1-.609.6H9.828a.6.6,0,0,1-.609-.6V5.8A.6.6,0,0,1,9.828,5.2Zm5.891.848L18.92,9.2H16.328a.6.6,0,0,1-.609-.6Z"\n                  transform="translate(-8 -4)" fill="#fff"></path>\n          </svg>\n        `}return e}generateContent(t){return"Image"===t.ContentType&&""!==t.ContentValue?this.contentImage(t):"Description"===t.ContentType&&""!==t.ContentValue?this.contentDescription(t):""}generateHTML(){var t,e,n,i;let r="",s="";return(null===(e=null===(t=this.data)||void 0===t?void 0:t.PageContentStructure)||void 0===e?void 0:e.Content)&&Array.isArray(this.data.PageContentStructure.Content)&&(r=this.data.PageContentStructure.Content.map((t=>this.generateContent(t))).join("")),(null===(i=null===(n=this.data)||void 0===n?void 0:n.PageContentStructure)||void 0===i?void 0:i.Cta)&&Array.isArray(this.data.PageContentStructure.Cta)&&(s=this.data.PageContentStructure.Cta.map((t=>this.generateCta(t))).join("")),`\n            <div ${p} id="frame-container" data-gjs-type="template-wrapper" class="content-frame-container">\n                <div ${p} class="container-column">\n                    <div ${p} class="container-row">\n                        <div ${p} data-gjs-type="default" class="template-wrapper">\n                            <div \n    data-gjs-type="template-wrapper"\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="true"\n    data-gjs-droppable="[data-gjs-type='product-service-description'], [data-gjs-type='product-service-image']"\n data-gjs-type="default" class="content-page-wrapper">\n                                ${r}\n                            </div>\n                        </div>\n                    </div> \n                    ${s?`\n                      <div ${v} class="cta-button-container" style="gap: 0.2rem;">\n                          ${s}\n                      </div>`:`\n                      <div ${v} class="cta-button-container" style="gap: 0.2rem;"></div>`}         \n                      <i class="fa fa-pencil></i>\n                </div>\n            </div>\n        `}addGrapesAttributes(t){const e=document.createElement("div");return"string"==typeof t&&(e.innerHTML=t),e.querySelectorAll("*").forEach((t=>{t.setAttribute("data-gjs-draggable","false"),t.setAttribute("data-gjs-selectable","false"),t.setAttribute("data-gjs-editable","false"),t.setAttribute("data-gjs-highlightable","false"),t.setAttribute("data-gjs-droppable","false"),t.setAttribute("data-gjs-resizable","false"),t.setAttribute("data-gjs-hoverable","false")})),e.innerHTML}contentImage(t){return`\n    <div ${g} class="content-image" id="${null==t?void 0:t.ContentId}" data-gjs-type="product-service-image">\n        <button ${p} class="tb-edit-image-icon">\n            <svg ${p} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n              <path ${p} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n            </svg>\n          </button>\n          <button ${p} class="tb-delete-image-icon">\n            <svg fill="#5068a8" ${p} width="14px" height="14px" viewBox="0 0 36 36" version="1.1"  preserveAspectRatio="xMidYMid meet" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n                <title ${p}>delete</title>\n                <path fill="#5068a8" ${p} class="clr-i-outline clr-i-outline-path-1" d="M27.14,34H8.86A2.93,2.93,0,0,1,6,31V11.23H8V31a.93.93,0,0,0,.86,1H27.14A.93.93,0,0,0,28,31V11.23h2V31A2.93,2.93,0,0,1,27.14,34Z"></path><path class="clr-i-outline clr-i-outline-path-2" d="M30.78,9H5A1,1,0,0,1,5,7H30.78a1,1,0,0,1,0,2Z"></path>\n                <rect fill="#5068a8" ${p} class="clr-i-outline clr-i-outline-path-3" x="21" y="13" width="2" height="15"></rect>\n                <rect fill="#5068a8" ${p} class="clr-i-outline clr-i-outline-path-4" x="13" y="13" width="2" height="15"></rect>\n                <path fill="#5068a8" ${p} class="clr-i-outline clr-i-outline-path-5" d="M23,5.86H21.1V4H14.9V5.86H13V4a2,2,0,0,1,1.9-2h6.2A2,2,0,0,1,23,4Z"></path>\n                <rect fill="#5068a8" ${p} x="0" y="0" width="36" height="36" fill-opacity="0"/>\n            </svg>\n          </button>\n        <img\n            id="product-service-image"\n            ${p}\n            src="${null==t?void 0:t.ContentValue}"\n            data-gjs-type="default"\n            alt="Full-width Image"\n        />\n      </div>\n    `}contentDescription(t){return`\n    <div\n        style="flex: 1; padding: 0; margin: 0; height: auto; white-space: normal;"\n        class="content-page-block"\n        ${g} \n        id="${null==t?void 0:t.ContentId}"\n        data-gjs-type="product-service-description"\n    >\n      <button ${p} class="tb-edit-content-icon">\n        <svg ${p} width="14px" height="14px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path ${p} fill-rule="evenodd" clip-rule="evenodd" d="M18.4324 4C18.2266 4 18.0227 4.04055 17.8325 4.11933C17.6423 4.19811 17.4695 4.31358 17.3239 4.45914L5.25659 16.5265L4.42524 19.5748L7.47353 18.7434L19.5409 6.67608C19.6864 6.53051 19.8019 6.3577 19.8807 6.16751C19.9595 5.97732 20 5.77348 20 5.56761C20 5.36175 19.9595 5.1579 19.8807 4.96771C19.8019 4.77752 19.6864 4.60471 19.5409 4.45914C19.3953 4.31358 19.2225 4.19811 19.0323 4.11933C18.8421 4.04055 18.6383 4 18.4324 4ZM17.0671 2.27157C17.5 2.09228 17.9639 2 18.4324 2C18.9009 2 19.3648 2.09228 19.7977 2.27157C20.2305 2.45086 20.6238 2.71365 20.9551 3.04493C21.2864 3.37621 21.5492 3.7695 21.7285 4.20235C21.9077 4.63519 22 5.09911 22 5.56761C22 6.03611 21.9077 6.50003 21.7285 6.93288C21.5492 7.36572 21.2864 7.75901 20.9551 8.09029L8.69996 20.3454C8.57691 20.4685 8.42387 20.5573 8.25597 20.6031L3.26314 21.9648C2.91693 22.0592 2.54667 21.9609 2.29292 21.7071C2.03917 21.4534 1.94084 21.0831 2.03526 20.7369L3.39694 15.7441C3.44273 15.5762 3.53154 15.4231 3.6546 15.3001L15.9097 3.04493C16.241 2.71365 16.6343 2.45086 17.0671 2.27157Z" fill="#5068a8"/>\n        </svg>\n      </button>\n      ${this.addGrapesAttributes(`<div ${p} id="contentDescription">${null==t?void 0:t.ContentValue}</div>`)}      \n    </div>\n    `}}class q{constructor(t){this.data=t,this.themeManager=new I}generateTile(t,e,n){return`\n      <div ${e?'\n    data-gjs-draggable="false"\n    data-gjs-selectable="false"\n    data-gjs-editable="false"\n    data-gjs-highlightable="false"\n    data-gjs-droppable="false"\n    data-gjs-resizable="false"\n    data-gjs-hoverable="false"\n    data-gjs-type="tile-wrapper"\n':h} class="template-wrapper" id="${t.Id}">\n        <div ${u} class="template-block${e?" first-tile high-priority-template":""}" \n          style="color: ${t.Color}; text-align: ${t.Align};\n        ${n?"align-items: center; justify-content: center;":`align-items: ${"left"===t.Align?"start":t.Align}; justify-content: ${"left"===t.Align?"start":t.Align};`}; \n        ${t.BGImageUrl?`background-color: rgba(0,0,0, ${t.Opacity/100});\n               background-image: url('${t.BGImageUrl}');\n               background-size: cover;\n               background-position: center;\n               background-blend-mode: overlay;`:`\n            background-color: ${this.themeManager.getThemeColor(t.BGColor)}; \n            `}">\n        \n        <div ${p} class="tile-icon-section" ${t.Icon?'style="display: block;"':""}>\n          <span ${p} class="tile-close-icon top-right">×</span>\n          <span ${p} title="${t.Icon}" class="tile-icon">\n            ${this.getTileIcon(t)}\n          </span>\n        </div>\n                \n                <div ${p} class="tile-title-section" style="${n?"text-align: center;":"text-align: left"}">\n                  <span ${p} class="tile-close-title top-right">×</span>\n                  <span ${p} class="tile-title" title="${t.Text}">${this.truncateText(t.Text,n)}</span>\n        </div>\n      </div>\n      ${e?"":`\n        <button ${p} title="Delete tile" class="action-button delete-button">−</button>`}\n      <button ${p} title="Add tile right" class="action-button add-button-right">+</button>\n      <button ${p} title="Add tile below" class="action-button add-button-bottom">+</button>\n    </div>\n  `}truncateText(t,e){const n=window.innerWidth,i=3===length?11:2===length?15:20;return t.length>(n<=280?20:i+4)?t.substring(0,n<=280?i:i+4).trim()+"..":e?this.wrapTileTitle(t):t}wrapTileTitle(t){const e=t.split(" ");return e.length>1?e[0]+"<br>"+e[1]:t.replace("<br>","")}getTileIcon(t){const e=this.themeManager.getThemeIcon(t.Icon);let n;return e&&(n=e.replace('fill="#7c8791"',`fill="${t.Color}"`)),n}generateRow(t,e){const n=0===e&&1===t.Tiles.length,i=3===t.Tiles.length,r=t.Tiles.map(((t,e)=>this.generateTile(t,n&&0===e,i))).join("");return`<div id="${t.Id}" ${f} class="container-row">${r}</div>`}generateHTML(){const t=`\n    <div ${p} id="frame-container" data-gjs-type="template-wrapper" class="frame-container">\n      <div ${p} class="container-column">\n        ${this.data.PageMenuStructure.Rows.map(((t,e)=>this.generateRow(t,e))).join("")}\n      </div>\n    </div>\n  `;return this.filterHTML(t)}filterHTML(t){const e=document.createElement("div");return e.innerHTML=t,e.querySelectorAll(".container-row").forEach((t=>{3===t.querySelectorAll(".template-block").length&&t.querySelectorAll(".add-button-right").forEach((t=>{t.style.display="none"}))})),e.innerHTML}}class B{constructor(t){this.editor=t}load(){this.editor.setComponents(this.htmlData())}htmlData(){let t=`\n        <div class="tb-date-selector" ${p}>\n          <span class="tb-arrow" ${p}>❮</span>\n          <span class="tb-date-text" id="current-date" ${p}> ${this.formatDate()}</span>\n          <span class="tb-arrow" ${p}>❯</span>\n        </div>\n        <div class="tb-schedule" id="schedule-container" ${p}>\n      `;for(let e=0;e<24;e++){const n=e.toString().padStart(2,"0")+":00";t+=`\n            <div class="tb-time-slot" ${p}>\n              <div class="tb-time" ${p}>${n}</div>\n              <div class="tb-events" ${p}></div>\n              ${e===(new Date).getHours()?`\n                <div class="tb-current-time-indicator" ${p}></div>\n                <div class="tb-current-time-dot" ${p}></div>`:""}\n            </div>\n          `}return t+="</div>",t}formatDate(){return(new Date).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(/(\d{2} \w{3}) (\d{4})/,"$1, $2")}}class D{constructor(t,e){this.toolboxService=new o,this.editor=t,this.pageData=e}setupEditor(){return t=this,e=void 0,i=function*(){try{if(this.locationData=yield this.toolboxService.getLocationData(),!this.locationData)return void console.warn("Location data could not be retrieved.");const t=this.updatePageData(),e=new M(t).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageData.PageId}`,JSON.stringify(t))}catch(t){console.error("Error fetching location data:",t)}},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}updatePageData(){var t,e,n;if(!(null===(e=null===(t=this.pageData)||void 0===t?void 0:t.PageContentStructure)||void 0===e?void 0:e.Content))return this.pageData;const i=(null===(n=this.locationData)||void 0===n?void 0:n.BC_Trn_Location)||{};return this.pageData.PageContentStructure.Content=this.pageData.PageContentStructure.Content.map((t=>"Image"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.LocationImage||t.ContentValue}):"Description"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.LocationDescription||t.ContentValue}):t)),this.pageData}}class ${constructor(t){this.editor=t}load(){this.editor.setComponents(this.htmlData())}htmlData(){return`\n         <div class="tb-chat-container" ${p}>\n            <div class="tb-toggle-buttons"  ${p}>\n                <button style="background-color: #5068a8;border-radius: 6px;"  ${p}>Messages</button>\n                <button style="background-color: #e1e1e1;border-radius: 6px;color: #262626;"  ${p}>Requests</button>\n            </div>\n            <div class="tb-chat-body" ${p}>No messages yet</div>\n         </div>\n         `}}class R{constructor(t,e){this.toolboxService=new o,this.editor=t,this.pageData=e}setupEditor(){return t=this,e=void 0,i=function*(){try{if(this.locationData=yield this.toolboxService.getLocationData(),!this.locationData)return void console.warn("Location data could not be retrieved.");console.log("Location data retrieved:",this.locationData);const t=this.updatePageData(),e=new M(t).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageData.PageId}`,JSON.stringify(t))}catch(t){console.error("Error fetching location data:",t)}},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}updatePageData(){var t,e,n;if(!(null===(e=null===(t=this.pageData)||void 0===t?void 0:t.PageContentStructure)||void 0===e?void 0:e.Content))return this.pageData;const i=(null===(n=this.locationData)||void 0===n?void 0:n.BC_Trn_Location)||{};return this.pageData.PageContentStructure.Content=this.pageData.PageContentStructure.Content.map((t=>"Image"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.ReceptionImage?i.ReceptionImage:"https://staging.comforta.yukon.software/media/receptie-197@3x.png"}):"Description"===(null==t?void 0:t.ContentType)?Object.assign(Object.assign({},t),{ContentValue:i.ReceptionDescription?i.ReceptionDescription:"Welkom bij de receptie van onze app. Hier kunt u al uw vragen stellen en krijgt u direct hulp van ons team. Of het nu gaat om technische ondersteuning, informatie over diensten, of algemene vragen, wij zijn er om u te helpen."}):t)),this.pageData}}class U{constructor(t){this.editor=t}initialise(t){return e=this,n=void 0,r=function*(){const e=null==t?void 0:t.ObjectUrl;try{this.editor.DomComponents.clear(),this.editor.DomComponents.addType("object",{isComponent:t=>"OBJECT"===t.tagName,model:{defaults:{tagName:"object",draggable:!0,droppable:!1,attributes:{width:"100%",height:"300vh"},styles:"\n                  .form-frame-container {\n                    overflow-x: hidden;\n                    overflow-y: auto;\n                    position: relative;\n                    min-height: 300px;\n                  }\n      \n                  /* Preloader styles */\n                  .preloader-wrapper {\n                    position: absolute;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    z-index: 1000;\n                  }\n      \n                  .preloader {\n                    width: 32px;\n                    height: 32px;\n                    background-image: url('/Resources/UCGrapes1/src/images/spinner.gif');\n                    background-size: contain;\n                    background-repeat: no-repeat;\n                  }\n      \n                  /* Custom scrollbar styles */\n                  .form-frame-container::-webkit-scrollbar {\n                    width: 6px;\n                    height: 0;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-track {\n                    background: #f1f1f1;\n                    border-radius: 3px;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-thumb {\n                    background: #888;\n                    border-radius: 3px;\n                  }\n      \n                  .form-frame-container::-webkit-scrollbar-thumb:hover {\n                    background: #555;\n                  }\n      \n                  /* Firefox scrollbar styles */\n                  .form-frame-container {\n                    scrollbar-width: thin;\n                    scrollbar-color: #888 #f1f1f1;\n                  }\n                  .fallback-message {\n                    margin-bottom: 10px;\n                    color: #666;\n                  }\n                "}},view:{onRender({el:t,model:e}){const n=`\n                  <div class="fallback-content">\n                    <p class="fallback-message">${e.get("attributes").fallbackMessage||"Content cannot be displayed"}</p>\n                    <a href="${e.get("attributes").data}" \n                       target="_blank" \n                       class="fallback-link">\n                      Open in New Window\n                    </a>\n                  </div>\n                `;t.insertAdjacentHTML("beforeend",n),t.addEventListener("load",(()=>{const e=t.closest(".form-frame-container").querySelector(".preloader-wrapper");e&&(e.style.display="none"),t.querySelector(".fallback-content").style.display="none"})),t.addEventListener("error",(e=>{const n=t.closest(".form-frame-container").querySelector(".preloader-wrapper");n&&(n.style.display="none");const i=t.querySelector(".fallback-content");i&&(i.style.display="flex",i.style.flexDirection="column",i.style.justifyContent="start")}))}}}),this.editor.setComponents(`\n            <div class="form-frame-container" id="frame-container">\n              <div class="preloader-wrapper">\n                <div class="preloader"></div>\n              </div>\n              <object \n                data="${e}"\n                type="text/html"\n                width="100%"\n                height="800px"\n                fallbackMessage="Unable to load the content. Please try opening it in a new window.">\n              </object>\n            </div>\n          `)}catch(t){console.error("Error setting up object component:",t.message)}},new((i=void 0)||(i=Promise))((function(t,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(o,a)}l((r=r.apply(e,n||[])).next())}));var e,n,i,r}}class V{constructor(t,e){this.pageId=t,this.pageData=e,this.themeManager=new I,this.editorManager=new sa,this.editorEvents=new Xo}init(t){var e,n,i,r,s,o,a,l;let c=`gjs-${this.getEditorId()}`;this.pageTitle=t.Text,this.createNewEditor(c);const d=this.editorManager.initializeGrapesEditor(c),u=t=>{if(t){const e=t.generateHTML();d.setComponents(e),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(this.pageData))}else console.error("Invalid PageType or pageData is undefined:",this.pageData)};let h;"Menu"===(null===(e=this.pageData)||void 0===e?void 0:e.PageType)?(h=new q(this.pageData),u(h)):"Location"===(null===(n=this.pageData)||void 0===n?void 0:n.PageType)?new D(d,this.pageData).setupEditor():"Reception"===(null===(i=this.pageData)||void 0===i?void 0:i.PageType)?new R(d,this.pageData).setupEditor():"Content"===(null===(r=this.pageData)||void 0===r?void 0:r.PageType)?(h=new M(this.pageData),u(h)):"WebLink"===(null===(s=this.pageData)||void 0===s?void 0:s.PageType)||"DynamicForm"===(null===(o=this.pageData)||void 0===o?void 0:o.PageType)?new U(d).initialise(t.Action):"MyActivity"===(null===(a=this.pageData)||void 0===a?void 0:a.PageType)?new $(d).load():"Calendar"===(null===(l=this.pageData)||void 0===l?void 0:l.PageType)&&new B(d).load(),this.editorEvents.init(d,this.pageData,c),this.editorManager.finalizeEditorSetup(d),this.themeManager.applyTheme(this.themeManager.currentTheme)}createNewEditor(t){const e=document.getElementById("child-container");new ta(t,!1,this.pageData,this.pageTitle).render(e)}getEditorId(){let t=0;return document.querySelectorAll(".mobile-frame").forEach((e=>{t++})),t}addImageContent(t){const e=t.DomComponents.getWrapper().find(".content-page-wrapper");e.length>0&&e[0].append(`\n      <img ${g} id="${b(5)}" data-gjs-type="product-service-image" draggable="true" src="https://plus.unsplash.com/premium_photo-1686949554005-78d1370ab4f3?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxmZWF0dXJlZC1waG90b3MtZmVlZHw2fHx8ZW58MHx8fHx8" alt="Product Service Image" class="content-page-block">\n      `)}addDescriptionContent(t){const e=t.DomComponents.getWrapper().find(".content-page-wrapper");e.length>0&&e[0].append(`\n      <div ${g} id="${b(5)}" data-gjs-type="product-service-description" draggable="true" class="content-page-block">\n          lorem ipsum dolor sit amet consectetur adipiscing elit sed do eiusmod tempor incididunt ut labore et dolore magna aliqua\n      </div>\n      `)}}class F{constructor(t){this.modalContainer=document.createElement("div"),this.modalContainer.className="popup-modal-link",this.modalContainer.style.display="flex";const e=document.createElement("div");e.className="popup",t.width&&(e.style.width=t.width);const n=document.createElement("div");n.className="popup-header";const i=document.createElement("span");i.textContent=t.title;const r=document.createElement("hr");this.popupBody=document.createElement("div"),this.popupBody.className="popup-body",t.body&&("string"==typeof t.body?this.popupBody.innerHTML=t.body:this.popupBody.appendChild(t.body));const s=this.createCloseButton();n.appendChild(i),n.appendChild(s),e.appendChild(n),e.appendChild(r),e.appendChild(this.popupBody),this.modalContainer.appendChild(e)}createCloseButton(){const t=document.createElement("button");return t.className="close",t.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 21 21">\n                <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',t.addEventListener("click",(()=>this.close())),t}open(t){(t||document.body).appendChild(this.modalContainer)}close(){this.modalContainer.remove()}}const H=function(t,e){return t===e||t!=t&&e!=e},z=function(t,e){for(var n=t.length;n--;)if(H(t[n][0],e))return n;return-1};var G=Array.prototype.splice;function Z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Z.prototype.clear=function(){this.__data__=[],this.size=0},Z.prototype.delete=function(t){var e=this.__data__,n=z(e,t);return!(n<0||(n==e.length-1?e.pop():G.call(e,n,1),--this.size,0))},Z.prototype.get=function(t){var e=this.__data__,n=z(e,t);return n<0?void 0:e[n][1]},Z.prototype.has=function(t){return z(this.__data__,t)>-1},Z.prototype.set=function(t,e){var n=this.__data__,i=z(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};const W=Z,K="object"==typeof global&&global&&global.Object===Object&&global;var J="object"==typeof self&&self&&self.Object===Object&&self;const Y=K||J||Function("return this")(),X=Y.Symbol;var Q=Object.prototype,tt=Q.hasOwnProperty,et=Q.toString,nt=X?X.toStringTag:void 0;var it=Object.prototype.toString;var rt=X?X.toStringTag:void 0;const st=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":rt&&rt in Object(t)?function(t){var e=tt.call(t,nt),n=t[nt];try{t[nt]=void 0;var i=!0}catch(t){}var r=et.call(t);return i&&(e?t[nt]=n:delete t[nt]),r}(t):function(t){return it.call(t)}(t)},ot=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},at=function(t){if(!ot(t))return!1;var e=st(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},lt=Y["__core-js_shared__"];var ct,dt=(ct=/[^.]+$/.exec(lt&&lt.keys&&lt.keys.IE_PROTO||""))?"Symbol(src)_1."+ct:"";var ut=Function.prototype.toString;const ht=function(t){if(null!=t){try{return ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var pt=/^\[object .+?Constructor\]$/,ft=Function.prototype,gt=Object.prototype,mt=ft.toString,vt=gt.hasOwnProperty,bt=RegExp("^"+mt.call(vt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const yt=function(t){return!(!ot(t)||(e=t,dt&&dt in e))&&(at(t)?bt:pt).test(ht(t));var e},wt=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return yt(n)?n:void 0},xt=wt(Y,"Map"),Ct=wt(Object,"create");var Et=Object.prototype.hasOwnProperty;var Tt=Object.prototype.hasOwnProperty;function At(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}At.prototype.clear=function(){this.__data__=Ct?Ct(null):{},this.size=0},At.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},At.prototype.get=function(t){var e=this.__data__;if(Ct){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Et.call(e,t)?e[t]:void 0},At.prototype.has=function(t){var e=this.__data__;return Ct?void 0!==e[t]:Tt.call(e,t)},At.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ct&&void 0===e?"__lodash_hash_undefined__":e,this};const Nt=At,St=function(t,e){var n,i,r=t.__data__;return("string"==(i=typeof(n=e))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map};function Lt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Lt.prototype.clear=function(){this.size=0,this.__data__={hash:new Nt,map:new(xt||W),string:new Nt}},Lt.prototype.delete=function(t){var e=St(this,t).delete(t);return this.size-=e?1:0,e},Lt.prototype.get=function(t){return St(this,t).get(t)},Lt.prototype.has=function(t){return St(this,t).has(t)},Lt.prototype.set=function(t,e){var n=St(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};const It=Lt;function _t(t){var e=this.__data__=new W(t);this.size=e.size}_t.prototype.clear=function(){this.__data__=new W,this.size=0},_t.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},_t.prototype.get=function(t){return this.__data__.get(t)},_t.prototype.has=function(t){return this.__data__.has(t)},_t.prototype.set=function(t,e){var n=this.__data__;if(n instanceof W){var i=n.__data__;if(!xt||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new It(i)}return n.set(t,e),this.size=n.size,this};const Ot=_t,kt=function(){try{var t=wt(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),jt=function(t,e,n){"__proto__"==e&&kt?kt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Pt=function(t,e,n){(void 0!==n&&!H(t[e],n)||void 0===n&&!(e in t))&&jt(t,e,n)},Mt=function(t,e,n){for(var i=-1,r=Object(t),s=n(t),o=s.length;o--;){var a=s[++i];if(!1===e(r[a],a,r))break}return t};var qt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Bt=qt&&"object"==typeof module&&module&&!module.nodeType&&module,Dt=Bt&&Bt.exports===qt?Y.Buffer:void 0,$t=Dt?Dt.allocUnsafe:void 0;const Rt=function(t,e){if(e)return t.slice();var n=t.length,i=$t?$t(n):new t.constructor(n);return t.copy(i),i},Ut=Y.Uint8Array,Vt=function(t){var e=new t.constructor(t.byteLength);return new Ut(e).set(new Ut(t)),e},Ft=function(t,e){var n=e?Vt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Ht=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e};var zt=Object.create;const Gt=function(){function t(){}return function(e){if(!ot(e))return{};if(zt)return zt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Zt=function(t,e){return function(n){return t(e(n))}},Wt=Zt(Object.getPrototypeOf,Object);var Kt=Object.prototype;const Jt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Kt)},Yt=function(t){return"function"!=typeof t.constructor||Jt(t)?{}:Gt(Wt(t))},Xt=function(t){return null!=t&&"object"==typeof t},Qt=function(t){return Xt(t)&&"[object Arguments]"==st(t)};var te=Object.prototype,ee=te.hasOwnProperty,ne=te.propertyIsEnumerable;const ie=Qt(function(){return arguments}())?Qt:function(t){return Xt(t)&&ee.call(t,"callee")&&!ne.call(t,"callee")},re=Array.isArray,se=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},oe=function(t){return null!=t&&se(t.length)&&!at(t)};var ae="object"==typeof exports&&exports&&!exports.nodeType&&exports,le=ae&&"object"==typeof module&&module&&!module.nodeType&&module,ce=le&&le.exports===ae?Y.Buffer:void 0;const de=(ce?ce.isBuffer:void 0)||function(){return!1};var ue=Function.prototype,he=Object.prototype,pe=ue.toString,fe=he.hasOwnProperty,ge=pe.call(Object);var me={};me["[object Float32Array]"]=me["[object Float64Array]"]=me["[object Int8Array]"]=me["[object Int16Array]"]=me["[object Int32Array]"]=me["[object Uint8Array]"]=me["[object Uint8ClampedArray]"]=me["[object Uint16Array]"]=me["[object Uint32Array]"]=!0,me["[object Arguments]"]=me["[object Array]"]=me["[object ArrayBuffer]"]=me["[object Boolean]"]=me["[object DataView]"]=me["[object Date]"]=me["[object Error]"]=me["[object Function]"]=me["[object Map]"]=me["[object Number]"]=me["[object Object]"]=me["[object RegExp]"]=me["[object Set]"]=me["[object String]"]=me["[object WeakMap]"]=!1;const ve=function(t){return function(e){return t(e)}};var be="object"==typeof exports&&exports&&!exports.nodeType&&exports,ye=be&&"object"==typeof module&&module&&!module.nodeType&&module,we=ye&&ye.exports===be&&K.process;const xe=function(){try{return ye&&ye.require&&ye.require("util").types||we&&we.binding&&we.binding("util")}catch(t){}}();var Ce=xe&&xe.isTypedArray;const Ee=Ce?ve(Ce):function(t){return Xt(t)&&se(t.length)&&!!me[st(t)]},Te=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Ae=Object.prototype.hasOwnProperty;const Ne=function(t,e,n){var i=t[e];Ae.call(t,e)&&H(i,n)&&(void 0!==n||e in t)||jt(t,e,n)},Se=function(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),r?jt(n,a,l):Ne(n,a,l)}return n};var Le=/^(?:0|[1-9]\d*)$/;const Ie=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Le.test(t))&&t>-1&&t%1==0&&t<e};var _e=Object.prototype.hasOwnProperty;const Oe=function(t,e){var n=re(t),i=!n&&ie(t),r=!n&&!i&&de(t),s=!n&&!i&&!r&&Ee(t),o=n||i||r||s,a=o?function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)!e&&!_e.call(t,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ie(c,l))||a.push(c);return a};var ke=Object.prototype.hasOwnProperty;const je=function(t){if(!ot(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Jt(t),n=[];for(var i in t)("constructor"!=i||!e&&ke.call(t,i))&&n.push(i);return n},Pe=function(t){return oe(t)?Oe(t,!0):je(t)},Me=function(t,e,n,i,r,s,o){var a,l=Te(t,n),c=Te(e,n),d=o.get(c);if(d)Pt(t,n,d);else{var u=s?s(l,c,n+"",t,e,o):void 0,h=void 0===u;if(h){var p=re(c),f=!p&&de(c),g=!p&&!f&&Ee(c);u=c,p||f||g?re(l)?u=l:Xt(a=l)&&oe(a)?u=Ht(l):f?(h=!1,u=Rt(c,!0)):g?(h=!1,u=Ft(c,!0)):u=[]:function(t){if(!Xt(t)||"[object Object]"!=st(t))return!1;var e=Wt(t);if(null===e)return!0;var n=fe.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&pe.call(n)==ge}(c)||ie(c)?(u=l,ie(l)?u=function(t){return Se(t,Pe(t))}(l):ot(l)&&!at(l)||(u=Yt(c))):h=!1}h&&(o.set(c,u),r(u,c,i,s,o),o.delete(c)),Pt(t,n,u)}},qe=function t(e,n,i,r,s){e!==n&&Mt(n,(function(o,a){if(s||(s=new Ot),ot(o))Me(e,n,a,i,t,r,s);else{var l=r?r(Te(e,a),o,a+"",e,n,s):void 0;void 0===l&&(l=o),Pt(e,a,l)}}),Pe)},Be=function(t){return t};var De=Math.max;const $e=kt?function(t,e){return kt(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:Be;var Re=Date.now;const Ue=(Ve=$e,Fe=0,He=0,function(){var t=Re(),e=16-(t-He);if(He=t,e>0){if(++Fe>=800)return arguments[0]}else Fe=0;return Ve.apply(void 0,arguments)});var Ve,Fe,He;const ze=function(t,e){return Ue(function(t,e,n){return e=De(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=De(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,a)}}(t,e,Be),t+"")},Ge=(Ze=function(t,e,n){qe(t,e,n)},ze((function(t,e){var n=-1,i=e.length,r=i>1?e[i-1]:void 0,s=i>2?e[2]:void 0;for(r=Ze.length>3&&"function"==typeof r?(i--,r):void 0,s&&function(t,e,n){if(!ot(n))return!1;var i=typeof e;return!!("number"==i?oe(n)&&Ie(e,n.length):"string"==i&&e in n)&&H(n[e],t)}(e[0],e[1],s)&&(r=i<3?void 0:r,i=1),t=Object(t);++n<i;){var o=e[n];o&&Ze(t,o,n)}return t})));var Ze,We=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(We||{});class Ke{constructor(t,e,n={}){this.attrName=t,this.keyName=e;const i=We.TYPE&We.ATTRIBUTE;this.scope=null!=n.scope?n.scope&We.LEVEL|i:We.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}static keys(t){return Array.from(t.attributes).map((t=>t.name))}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class Je extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}const Ye=class t{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let n=null;try{n=t.parentNode}catch{return null}return this.find(n,e)}return null}create(e,n,i){const r=this.query(n);if(null==r)throw new Je(`Unable to create ${n} blot`);const s=r,o=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:s.create(i),a=new s(e,o,i);return t.blots.set(a.domNode,a),a}find(e,n=!1){return t.find(e,n)}query(t,e=We.ANY){let n;return"string"==typeof t?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:"number"==typeof t?t&We.LEVEL&We.BLOCK?n=this.types.block:t&We.LEVEL&We.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some((t=>(n=this.classes[t],!!n))),n=n||this.tags[t.tagName]),null==n?null:"scope"in n&&e&We.LEVEL&n.scope&&e&We.TYPE&n.scope?n:null}register(...t){return t.map((t=>{const e="blotName"in t,n="attrName"in t;if(!e&&!n)throw new Je("Invalid definition");if(e&&"abstract"===t.blotName)throw new Je("Cannot register abstract class");const i=e?t.blotName:n?t.attrName:void 0;return this.types[i]=t,n?"string"==typeof t.keyName&&(this.attributes[t.keyName]=t):e&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map((t=>t.toUpperCase())):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach((e=>{(null==this.tags[e]||null==t.className)&&(this.tags[e]=t)})))),t}))}};Ye.blots=new WeakMap;let Xe=Ye;function Qe(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((t=>0===t.indexOf(`${e}-`)))}const tn=class extends Ke{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map((t=>t.split("-").slice(0,-1).join("-")))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){Qe(t,this.keyName).forEach((e=>{t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(Qe(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}};function en(t){const e=t.split("-"),n=e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("");return e[0]+n}const nn=class extends Ke{static keys(t){return(t.getAttribute("style")||"").split(";").map((t=>t.split(":")[0].trim()))}add(t,e){return!!this.canAdd(t,e)&&(t.style[en(this.keyName)]=e,!0)}remove(t){t.style[en(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[en(this.keyName)];return this.canAdd(t,e)?e:""}},rn=class{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=Xe.find(this.domNode);if(null==t)return;const e=Ke.keys(this.domNode),n=tn.keys(this.domNode),i=nn.keys(this.domNode);e.concat(n).concat(i).forEach((e=>{const n=t.scroll.query(e,We.ATTRIBUTE);n instanceof Ke&&(this.attributes[n.attrName]=n)}))}copy(t){Object.keys(this.attributes).forEach((e=>{const n=this.attributes[e].value(this.domNode);t.format(e,n)}))}move(t){this.copy(t),Object.keys(this.attributes).forEach((t=>{this.attributes[t].remove(this.domNode)})),this.attributes={}}values(){return Object.keys(this.attributes).reduce(((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t)),{})}},sn=class{constructor(t,e){this.scroll=t,this.domNode=e,Xe.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new Je("Blot definition missing tagName");let e,n;return Array.isArray(this.tagName)?("string"==typeof t?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):"number"==typeof t&&(n=t),e="number"==typeof n?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),Xe.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,n,i){const r=this.isolate(t,e);if(null!=this.scroll.query(n,We.BLOT)&&i)r.wrap(n,i);else if(null!=this.scroll.query(n,We.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);r.wrap(t),t.format(n,i)}}insertAt(t,e,n){const i=null==n?this.scroll.create("text",e):this.scroll.create(e,n),r=this.split(t);this.parent.insertBefore(i,r||void 0)}isolate(t,e){const n=this.split(t);if(null==n)throw new Error("Attempt to isolate at end");return n.split(e),n}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const n="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(n,this.next||void 0),"function"!=typeof n.appendChild)throw new Je(`Cannot wrap ${t}`);return n.appendChild(this),n}};sn.blotName="abstract";let on=sn;const an=class extends on{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};an.scope=We.INLINE_BLOT;const ln=an;class cn{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let n=e();for(;n&&t>0;)t-=1,n=e();return n}contains(t){const e=this.iterator();let n=e();for(;n;){if(n===t)return!0;n=e()}return!1}indexOf(t){const e=this.iterator();let n=e(),i=0;for(;n;){if(n===t)return i;i+=1,n=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,n=this.head;for(;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const n=this.iterator();let i=n();for(;i;){const r=i.length();if(t<r||e&&t===r&&(null==i.next||0!==i.next.length()))return[i,t];t-=r,i=n()}return[null,0]}forEach(t){const e=this.iterator();let n=e();for(;n;)t(n),n=e()}forEachAt(t,e,n){if(e<=0)return;const[i,r]=this.find(t);let s=t-r;const o=this.iterator(i);let a=o();for(;a&&s<t+e;){const i=a.length();t>s?n(a,t-s,Math.min(e,s+i-t)):n(a,0,Math.min(i,t+e-s)),s+=i,a=o()}}map(t){return this.reduce(((e,n)=>(e.push(t(n)),e)),[])}reduce(t,e){const n=this.iterator();let i=n();for(;i;)e=t(e,i),i=n();return e}}function dn(t,e){const n=e.find(t);if(n)return n;try{return e.create(t)}catch{const n=e.create(We.INLINE);return Array.from(t.childNodes).forEach((t=>{n.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(n.domNode,t),n.attach(),n}}const un=class t extends on{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach((t=>{t.attach()}))}attachUI(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,t.uiClass&&this.uiNode.classList.add(t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new cn,Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).reverse().forEach((t=>{try{const e=dn(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof Je)return;throw t}}))}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,((t,e,n)=>{t.deleteAt(e,n)}))}descendant(e,n=0){const[i,r]=this.children.find(n);return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,r]:i instanceof t?i.descendant(e,r):[null,-1]}descendants(e,n=0,i=Number.MAX_VALUE){let r=[],s=i;return this.children.forEachAt(n,i,((n,i,o)=>{(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&r.push(n),n instanceof t&&(r=r.concat(n.descendants(e,i,s))),s-=o})),r}detach(){this.children.forEach((t=>{t.detach()})),super.detach()}enforceAllowedChildren(){let e=!1;this.children.forEach((n=>{e||this.statics.allowedChildren.some((t=>n instanceof t))||(n.statics.scope===We.BLOCK_BLOT?(null!=n.next&&this.splitAfter(n),null!=n.prev&&this.splitAfter(n.prev),n.parent.unwrap(),e=!0):n instanceof t?n.unwrap():n.remove())}))}formatAt(t,e,n,i){this.children.forEachAt(t,e,((t,e,r)=>{t.formatAt(e,r,n,i)}))}insertAt(t,e,n){const[i,r]=this.children.find(t);if(i)i.insertAt(r,e,n);else{const t=null==n?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let n=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()}length(){return this.children.reduce(((t,e)=>t+e.length()),0)}moveChildren(t,e){this.children.forEach((n=>{t.insertBefore(n,e)}))}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(e,n=!1){const[i,r]=this.children.find(e,n),s=[[this,e]];return i instanceof t?s.concat(i.path(r,n)):(null!=i&&s.push([i,r]),s)}removeChild(t){this.children.remove(t)}replaceWith(e,n){const i="string"==typeof e?this.scroll.create(e,n):e;return i instanceof t&&this.moveChildren(i),super.replaceWith(i)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),((t,i,r)=>{const s=t.split(i,e);null!=s&&n.appendChild(s)})),n}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const n=[],i=[];t.forEach((t=>{t.target===this.domNode&&"childList"===t.type&&(n.push(...t.addedNodes),i.push(...t.removedNodes))})),i.forEach((t=>{if(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);null!=e&&(null==e.domNode.parentNode||e.domNode.parentNode===this.domNode)&&e.detach()})),n.filter((t=>t.parentNode===this.domNode&&t!==this.uiNode)).sort(((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1)).forEach((t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const n=dn(t,this.scroll);(n.next!==e||null==n.next)&&(null!=n.parent&&n.parent.removeChild(this),this.insertBefore(n,e||void 0))})),this.enforceAllowedChildren()}};un.uiClass="";const hn=un,pn=class t extends hn{static create(t){return super.create(t)}static formats(e,n){const i=n.query(t.blotName);if(null==i||e.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new rn(this.domNode)}format(e,n){if(e!==this.statics.blotName||n){const t=this.scroll.query(e,We.INLINE);if(null==t)return;t instanceof Ke?this.attributes.attribute(t,n):n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n)}else this.children.forEach((e=>{e instanceof t||(e=e.wrap(t.blotName,!0)),this.attributes.copy(e)})),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,i){null!=this.formats()[n]||this.scroll.query(n,We.ATTRIBUTE)?this.isolate(t,e).format(n,i):super.formatAt(t,e,n,i)}optimize(e){super.optimize(e);const n=this.formats();if(0===Object.keys(n).length)return this.unwrap();const i=this.next;i instanceof t&&i.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}(n,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}wrap(e,n){const i=super.wrap(e,n);return i instanceof t&&this.attributes.move(i),i}};pn.allowedChildren=[pn,ln],pn.blotName="inline",pn.scope=We.INLINE_BLOT,pn.tagName="SPAN";const fn=pn,gn=class t extends hn{static create(t){return super.create(t)}static formats(e,n){const i=n.query(t.blotName);if(null==i||e.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return e.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new rn(this.domNode)}format(e,n){const i=this.scroll.query(e,We.BLOCK);null!=i&&(i instanceof Ke?this.attributes.attribute(i,n):e!==this.statics.blotName||n?n&&(e!==this.statics.blotName||this.formats()[e]!==n)&&this.replaceWith(e,n):this.replaceWith(t.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,n,i){null!=this.scroll.query(n,We.BLOCK)?this.format(n,i):super.formatAt(t,e,n,i)}insertAt(t,e,n){if(null==n||null!=this.scroll.query(e,We.INLINE))super.insertAt(t,e,n);else{const i=this.split(t);if(null==i)throw new Error("Attempt to insertAt after block boundaries");{const t=this.scroll.create(e,n);i.parent.insertBefore(t,i)}}}replaceWith(t,e){const n=super.replaceWith(t,e);return this.attributes.copy(n),n}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}};gn.blotName="block",gn.scope=We.BLOCK_BLOT,gn.tagName="P",gn.allowedChildren=[fn,gn,ln];const mn=gn,vn=class extends hn{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,n,i){super.formatAt(t,e,n,i),this.enforceAllowedChildren()}insertAt(t,e,n){super.insertAt(t,e,n),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};vn.blotName="container",vn.scope=We.BLOCK_BLOT;const bn=vn,yn=class extends ln{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,n,i){0===t&&e===this.length()?this.format(n,i):super.formatAt(t,e,n,i)}formats(){return this.statics.formats(this.domNode,this.scroll)}},wn={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},xn=class extends hn{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver((t=>{this.update(t)})),this.observer.observe(this.domNode,wn),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null}query(t,e=We.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach((t=>{t.remove()})):super.deleteAt(t,e)}formatAt(t,e,n,i){this.update(),super.formatAt(t,e,n,i)}insertAt(t,e,n){this.update(),super.insertAt(t,e,n)}optimize(t=[],e={}){super.optimize(e);const n=e.mutationsMap||new WeakMap;let i=Array.from(this.observer.takeRecords());for(;i.length>0;)t.push(i.pop());const r=(t,e=!0)=>{null==t||t===this||null!=t.domNode.parentNode&&(n.has(t.domNode)||n.set(t.domNode,[]),e&&r(t.parent))},s=t=>{n.has(t.domNode)&&(t instanceof hn&&t.children.forEach(s),n.delete(t.domNode),t.optimize(e))};let o=t;for(let e=0;o.length>0;e+=1){if(e>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(o.forEach((t=>{const e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(r(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach((t=>{const e=this.find(t,!1);r(e,!1),e instanceof hn&&e.children.forEach((t=>{r(t,!1)}))}))):"attributes"===t.type&&r(e.prev)),r(e))})),this.children.forEach(s),o=Array.from(this.observer.takeRecords()),i=o.slice();i.length>0;)t.push(i.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const n=new WeakMap;t.map((t=>{const e=this.find(t.target,!0);return null==e?null:n.has(e.domNode)?(n.get(e.domNode).push(t),null):(n.set(e.domNode,[t]),e)})).forEach((t=>{null!=t&&t!==this&&n.has(t.domNode)&&t.update(n.get(t.domNode)||[],e)})),e.mutationsMap=n,n.has(this.domNode)&&super.update(n.get(this.domNode),e),this.optimize(t,e)}};xn.blotName="scroll",xn.defaultChild=mn,xn.allowedChildren=[mn,bn],xn.scope=We.BLOCK_BLOT,xn.tagName="DIV";const Cn=xn,En=class t extends ln{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,n){null==n?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,n)}length(){return this.text.length}optimize(e){super.optimize(e),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n}update(t,e){t.some((t=>"characterData"===t.type&&t.target===this.domNode))&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};En.blotName="text",En.scope=We.INLINE_BLOT;const Tn=En;var An=n(2660);const Nn=Zt(Object.keys,Object);var Sn=Object.prototype.hasOwnProperty;const Ln=function(t){return oe(t)?Oe(t):function(t){if(!Jt(t))return Nn(t);var e=[];for(var n in Object(t))Sn.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},In=function(){return[]};var _n=Object.prototype.propertyIsEnumerable,On=Object.getOwnPropertySymbols;const kn=On?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}(On(t),(function(e){return _n.call(t,e)})))}:In,jn=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t},Pn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)jn(e,kn(t)),t=Wt(t);return e}:In,Mn=function(t,e,n){var i=e(t);return re(t)?i:jn(i,n(t))},qn=function(t){return Mn(t,Ln,kn)},Bn=function(t){return Mn(t,Pe,Pn)},Dn=wt(Y,"DataView"),$n=wt(Y,"Promise"),Rn=wt(Y,"Set"),Un=wt(Y,"WeakMap");var Vn="[object Map]",Fn="[object Promise]",Hn="[object Set]",zn="[object WeakMap]",Gn="[object DataView]",Zn=ht(Dn),Wn=ht(xt),Kn=ht($n),Jn=ht(Rn),Yn=ht(Un),Xn=st;(Dn&&Xn(new Dn(new ArrayBuffer(1)))!=Gn||xt&&Xn(new xt)!=Vn||$n&&Xn($n.resolve())!=Fn||Rn&&Xn(new Rn)!=Hn||Un&&Xn(new Un)!=zn)&&(Xn=function(t){var e=st(t),n="[object Object]"==e?t.constructor:void 0,i=n?ht(n):"";if(i)switch(i){case Zn:return Gn;case Wn:return Vn;case Kn:return Fn;case Jn:return Hn;case Yn:return zn}return e});const Qn=Xn;var ti=Object.prototype.hasOwnProperty;var ei=/\w*$/;var ni=X?X.prototype:void 0,ii=ni?ni.valueOf:void 0;const ri=function(t,e,n){var i,r,s,o=t.constructor;switch(e){case"[object ArrayBuffer]":return Vt(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return function(t,e){var n=e?Vt(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ft(t,n);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return(s=new(r=t).constructor(r.source,ei.exec(r))).lastIndex=r.lastIndex,s;case"[object Symbol]":return i=t,ii?Object(ii.call(i)):{}}};var si=xe&&xe.isMap;const oi=si?ve(si):function(t){return Xt(t)&&"[object Map]"==Qn(t)};var ai=xe&&xe.isSet;const li=ai?ve(ai):function(t){return Xt(t)&&"[object Set]"==Qn(t)};var ci="[object Arguments]",di="[object Function]",ui="[object Object]",hi={};hi[ci]=hi["[object Array]"]=hi["[object ArrayBuffer]"]=hi["[object DataView]"]=hi["[object Boolean]"]=hi["[object Date]"]=hi["[object Float32Array]"]=hi["[object Float64Array]"]=hi["[object Int8Array]"]=hi["[object Int16Array]"]=hi["[object Int32Array]"]=hi["[object Map]"]=hi["[object Number]"]=hi[ui]=hi["[object RegExp]"]=hi["[object Set]"]=hi["[object String]"]=hi["[object Symbol]"]=hi["[object Uint8Array]"]=hi["[object Uint8ClampedArray]"]=hi["[object Uint16Array]"]=hi["[object Uint32Array]"]=!0,hi["[object Error]"]=hi[di]=hi["[object WeakMap]"]=!1;const pi=function t(e,n,i,r,s,o){var a,l=1&n,c=2&n,d=4&n;if(i&&(a=s?i(e,r,s,o):i(e)),void 0!==a)return a;if(!ot(e))return e;var u=re(e);if(u){if(a=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ti.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!l)return Ht(e,a)}else{var h=Qn(e),p=h==di||"[object GeneratorFunction]"==h;if(de(e))return Rt(e,l);if(h==ui||h==ci||p&&!s){if(a=c||p?{}:Yt(e),!l)return c?function(t,e){return Se(t,Pn(t),e)}(e,function(t,e){return t&&Se(e,Pe(e),t)}(a,e)):function(t,e){return Se(t,kn(t),e)}(e,function(t,e){return t&&Se(e,Ln(e),t)}(a,e))}else{if(!hi[h])return s?e:{};a=ri(e,h,l)}}o||(o=new Ot);var f=o.get(e);if(f)return f;o.set(e,a),li(e)?e.forEach((function(r){a.add(t(r,n,i,r,e,o))})):oi(e)&&e.forEach((function(r,s){a.set(s,t(r,n,i,s,e,o))}));var g=u?void 0:(d?c?Bn:qn:c?Pe:Ln)(e);return function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););}(g||e,(function(r,s){g&&(r=e[s=r]),Ne(a,s,t(r,n,i,s,e,o))})),a},fi=function(t){return pi(t,5)};function gi(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new It;++e<n;)this.add(t[e])}gi.prototype.add=gi.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},gi.prototype.has=function(t){return this.__data__.has(t)};const mi=gi,vi=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1},bi=function(t,e,n,i,r,s){var o=1&n,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(t),d=s.get(e);if(c&&d)return c==e&&d==t;var u=-1,h=!0,p=2&n?new mi:void 0;for(s.set(t,e),s.set(e,t);++u<a;){var f=t[u],g=e[u];if(i)var m=o?i(g,f,u,e,t,s):i(f,g,u,t,e,s);if(void 0!==m){if(m)continue;h=!1;break}if(p){if(!vi(e,(function(t,e){if(o=e,!p.has(o)&&(f===t||r(f,t,n,i,s)))return p.push(e);var o}))){h=!1;break}}else if(f!==g&&!r(f,g,n,i,s)){h=!1;break}}return s.delete(t),s.delete(e),h},yi=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n},wi=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var xi=X?X.prototype:void 0,Ci=xi?xi.valueOf:void 0;var Ei=Object.prototype.hasOwnProperty;var Ti="[object Arguments]",Ai="[object Array]",Ni="[object Object]",Si=Object.prototype.hasOwnProperty;const Li=function(t,e,n,i,r,s){var o=re(t),a=re(e),l=o?Ai:Qn(t),c=a?Ai:Qn(e),d=(l=l==Ti?Ni:l)==Ni,u=(c=c==Ti?Ni:c)==Ni,h=l==c;if(h&&de(t)){if(!de(e))return!1;o=!0,d=!1}if(h&&!d)return s||(s=new Ot),o||Ee(t)?bi(t,e,n,i,r,s):function(t,e,n,i,r,s,o){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new Ut(t),new Ut(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return H(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=yi;case"[object Set]":var l=1&i;if(a||(a=wi),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;i|=2,o.set(t,e);var d=bi(a(t),a(e),i,r,s,o);return o.delete(t),d;case"[object Symbol]":if(Ci)return Ci.call(t)==Ci.call(e)}return!1}(t,e,l,n,i,r,s);if(!(1&n)){var p=d&&Si.call(t,"__wrapped__"),f=u&&Si.call(e,"__wrapped__");if(p||f){var g=p?t.value():t,m=f?e.value():e;return s||(s=new Ot),r(g,m,n,i,s)}}return!!h&&(s||(s=new Ot),function(t,e,n,i,r,s){var o=1&n,a=qn(t),l=a.length;if(l!=qn(e).length&&!o)return!1;for(var c=l;c--;){var d=a[c];if(!(o?d in e:Ei.call(e,d)))return!1}var u=s.get(t),h=s.get(e);if(u&&h)return u==e&&h==t;var p=!0;s.set(t,e),s.set(e,t);for(var f=o;++c<l;){var g=t[d=a[c]],m=e[d];if(i)var v=o?i(m,g,d,e,t,s):i(g,m,d,t,e,s);if(!(void 0===v?g===m||r(g,m,n,i,s):v)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(p=!1)}return s.delete(t),s.delete(e),p}(t,e,n,i,r,s))},Ii=function t(e,n,i,r,s){return e===n||(null==e||null==n||!Xt(e)&&!Xt(n)?e!=e&&n!=n:Li(e,n,i,r,t,s))},_i=function(t,e){return Ii(t,e)};class Oi extends yn{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Oi.blotName="break",Oi.tagName="BR";const ki=Oi;class ji extends Tn{}const Pi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Mi(t){return t.replace(/[&<>"']/g,(t=>Pi[t]))}class qi extends fn{static allowedChildren=[qi,ki,yn,ji];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){const n=qi.order.indexOf(t),i=qi.order.indexOf(e);return n>=0||i>=0?n-i:t===e?0:t<e?-1:1}formatAt(t,e,n,i){if(qi.compare(this.statics.blotName,n)<0&&this.scroll.query(n,We.BLOT)){const r=this.isolate(t,e);i&&r.wrap(n,i)}else super.formatAt(t,e,n,i)}optimize(t){if(super.optimize(t),this.parent instanceof qi&&qi.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}const Bi=qi;class Di extends mn{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=Ri(this)),this.cache.delta}deleteAt(t,e){super.deleteAt(t,e),this.cache={}}formatAt(t,e,n,i){e<=0||(this.scroll.query(n,We.BLOCK)?t+e===this.length()&&this.format(n,i):super.formatAt(t,Math.min(e,this.length()-t-1),n,i),this.cache={})}insertAt(t,e,n){if(null!=n)return super.insertAt(t,e,n),void(this.cache={});if(0===e.length)return;const i=e.split("\n"),r=i.shift();r.length>0&&(t<this.length()-1||null==this.children.tail?super.insertAt(Math.min(t,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});let s=this;i.reduce(((t,e)=>(s=s.split(t,!0),s.insertAt(0,e),e.length)),t+r.length)}insertBefore(t,e){const{head:n}=this.children;super.insertBefore(t,e),n instanceof ki&&n.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(t,e){super.moveChildren(t,e),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){const e=this.clone();return 0===t?(this.parent.insertBefore(e,this),this):(this.parent.insertBefore(e,this.next),e)}const n=super.split(t,e);return this.cache={},n}}Di.blotName="block",Di.tagName="P",Di.defaultChild=ki,Di.allowedChildren=[ki,Bi,yn,ji];class $i extends yn{attach(){super.attach(),this.attributes=new rn(this.domNode)}delta(){return(new An).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const n=this.scroll.query(t,We.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}formatAt(t,e,n,i){this.format(n,i)}insertAt(t,e,n){if(null!=n)return void super.insertAt(t,e,n);const i=e.split("\n"),r=i.pop(),s=i.map((t=>{const e=this.scroll.create(Di.blotName);return e.insertAt(0,t),e})),o=this.split(t);s.forEach((t=>{this.parent.insertBefore(t,o)})),r&&this.parent.insertBefore(this.scroll.create("text",r),o)}}function Ri(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(ln).reduce(((t,n)=>0===n.length()?t:t.insert(n.value(),Ui(n,{},e))),new An).insert("\n",Ui(t))}function Ui(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("formats"in t&&"function"==typeof t.formats&&(e={...e,...t.formats()},n&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:Ui(t.parent,e,n))}$i.scope=We.BLOCK_BLOT;class Vi extends yn{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(t,e,n){super(t,e),this.selection=n,this.textNode=document.createTextNode(Vi.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(t,e){if(0!==this.savedLength)return void super.format(t,e);let n=this,i=0;for(;null!=n&&n.statics.scope!==We.BLOCK_BLOT;)i+=n.offset(n.parent),n=n.parent;null!=n&&(this.savedLength=Vi.CONTENTS.length,n.optimize(),n.formatAt(i,Vi.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const t=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof ji?this.prev:null,n=e?e.length():0,i=this.next instanceof ji?this.next:null,r=i?i.text:"",{textNode:s}=this,o=s.data.split(Vi.CONTENTS).join("");let a;if(s.data=Vi.CONTENTS,e)a=e,(o||i)&&(e.insertAt(e.length(),o+r),i&&i.remove());else if(i)a=i,i.insertAt(0,o);else{const t=document.createTextNode(o);a=this.scroll.create(t),this.parent.insertBefore(a,this)}if(this.remove(),t){const r=(t,r)=>e&&t===e.domNode?r:t===s?n+r-1:i&&t===i.domNode?n+o.length+r:null,l=r(t.start.node,t.start.offset),c=r(t.end.node,t.end.offset);if(null!==l&&null!==c)return{startNode:a.domNode,startOffset:l,endNode:a.domNode,endOffset:c}}return null}update(t,e){if(t.some((t=>"characterData"===t.type&&t.target===this.textNode))){const t=this.restore();t&&(e.range=t)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if("A"===e.domNode.tagName){this.savedLength=Vi.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}const Fi=Vi;var Hi=n(3697);const zi=new WeakMap,Gi=["error","warn","log","info"];let Zi="warn";function Wi(t){if(Zi&&Gi.indexOf(t)<=Gi.indexOf(Zi)){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];console[t](...n)}}function Ki(t){return Gi.reduce(((e,n)=>(e[n]=Wi.bind(console,n,t),e)),{})}Ki.level=t=>{Zi=t},Wi.level=Ki.level;const Ji=Ki,Yi=Ji("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((t=>{document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach((t=>{const n=zi.get(t);n&&n.emitter&&n.emitter.handleDOM(...e)}))}))}));const Xi=class extends Hi{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Yi.error)}emit(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Yi.log.call(Yi,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(this.domListeners[t.type]||[]).forEach((e=>{let{node:i,handler:r}=e;(t.target===i||i.contains(t.target))&&r(t,...n)}))}listenDOM(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})}},Qi=Ji("quill:selection");class tr{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=t,this.length=e}}function er(t,e){try{e.parentNode}catch(t){return!1}return t.contains(e)}const nr=class{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new tr(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,Xi.sources.USER),1)})),this.emitter.on(Xi.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;const t=this.getNativeRange();null!=t&&t.start.node!==this.cursor.textNode&&this.emitter.once(Xi.events.SCROLL_UPDATE,((e,n)=>{try{this.root.contains(t.start.node)&&this.root.contains(t.end.node)&&this.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset);const i=n.some((t=>"characterData"===t.type||"childList"===t.type||"attributes"===t.type&&t.target===this.root));this.update(i?Xi.sources.SILENT:e)}catch(t){}}))})),this.emitter.on(Xi.events.SCROLL_OPTIMIZE,((t,e)=>{if(e.range){const{startNode:t,startOffset:n,endNode:i,endOffset:r}=e.range;this.setNativeRange(t,n,i,r),this.update(Xi.sources.SILENT)}})),this.update(Xi.sources.SILENT)}handleComposition(){this.emitter.on(Xi.events.COMPOSITION_BEFORE_START,(()=>{this.composing=!0})),this.emitter.on(Xi.events.COMPOSITION_END,(()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout((()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=!1,this.update(Xi.sources.USER)}))}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(t,We.BLOCK)){if(n.start.node!==this.cursor.textNode){const t=this.scroll.find(n.start.node,!1);if(null==t)return;if(t instanceof ln){const e=t.split(n.start.offset);t.parent.insertBefore(this.cursor,e)}else t.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.scroll.length();let i;t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;let[r,s]=this.scroll.leaf(t);if(null==r)return null;if(e>0&&s===r.length()){const[e]=this.scroll.leaf(t+1);if(e){const[n]=this.scroll.line(t),[i]=this.scroll.line(t+1);n===i&&(r=e,s=0)}}[i,s]=r.position(s,!0);const o=document.createRange();if(e>0)return o.setStart(i,s),[r,s]=this.scroll.leaf(t+e),null==r?null:([i,s]=r.position(s,!0),o.setEnd(i,s),o.getBoundingClientRect());let a,l="left";if(i instanceof Text){if(!i.data.length)return null;s<i.data.length?(o.setStart(i,s),o.setEnd(i,s+1)):(o.setStart(i,s-1),o.setEnd(i,s),l="right"),a=o.getBoundingClientRect()}else{if(!(r.domNode instanceof Element))return null;a=r.domNode.getBoundingClientRect(),s>0&&(l="right")}return{bottom:a.top+a.height,height:a.height,left:a[l],right:a[l],top:a.top,width:0}}getNativeRange(){const t=document.getSelection();if(null==t||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(null==e)return null;const n=this.normalizeNative(e);return Qi.info("getNativeRange",n),n}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&er(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const n=e.map((t=>{const[e,n]=t,i=this.scroll.find(e,!0),r=i.offset(this.scroll);return 0===n?r:i instanceof ln?r+i.index(e,n):r+i.length()})),i=Math.min(Math.max(...n),this.scroll.length()-1),r=Math.min(i,...n);return new tr(r,i-r)}normalizeNative(t){if(!er(this.root,t.startContainer)||!t.collapsed&&!er(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((t=>{let{node:e,offset:n}=t;for(;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;e=e.lastChild,n=e instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}rangeToNative(t){const e=this.scroll.length(),n=(t,n)=>{t=Math.min(e-1,t);const[i,r]=this.scroll.leaf(t);return i?i.position(r,n):[null,-1]};return[...n(t.index,!1),...n(t.index+t.length,!0)]}setNativeRange(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Qi.info("setNativeRange",t,e,n,i),null!=t&&(null==this.root.parentNode||null==t.parentNode||null==n.parentNode))return;const s=document.getSelection();if(null!=s)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:o}=this.getNativeRange()||{};if(null==o||r||t!==o.startContainer||e!==o.startOffset||n!==o.endContainer||i!==o.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&"BR"===n.tagName&&(i=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);const r=document.createRange();r.setStart(t,e),r.setEnd(n,i),s.removeAllRanges(),s.addRange(r)}}else s.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xi.sources.API;if("string"==typeof e&&(n=e,e=!1),Qi.info("setRange",t),null!=t){const n=this.rangeToNative(t);this.setNativeRange(...n,e)}else this.setNativeRange(null);this.update(n)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi.sources.USER;const e=this.lastRange,[n,i]=this.getRange();if(this.lastRange=n,this.lastNative=i,null!=this.lastRange&&(this.savedRange=this.lastRange),!_i(e,this.lastRange)){if(!this.composing&&null!=i&&i.native.collapsed&&i.start.node!==this.cursor.textNode){const t=this.cursor.restore();t&&this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}const n=[Xi.events.SELECTION_CHANGE,fi(this.lastRange),fi(e),t];this.emitter.emit(Xi.events.EDITOR_CHANGE,...n),t!==Xi.sources.SILENT&&this.emitter.emit(...n)}}},ir=/^[ -~]*$/;function rr(t,e,n){if(0===t.length){const[t]=ar(n.pop());return e<=0?`</li></${t}>`:`</li></${t}>${rr([],e-1,n)}`}const[{child:i,offset:r,length:s,indent:o,type:a},...l]=t,[c,d]=ar(a);if(o>e)return n.push(a),o===e+1?`<${c}><li${d}>${sr(i,r,s)}${rr(l,o,n)}`:`<${c}><li>${rr(t,e+1,n)}`;const u=n[n.length-1];if(o===e&&a===u)return`</li><li${d}>${sr(i,r,s)}${rr(l,o,n)}`;const[h]=ar(n.pop());return`</li></${h}>${rr(t,e-1,n)}`}function sr(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"==typeof t.html)return t.html(e,n);if(t instanceof ji)return Mi(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof hn){if("list-container"===t.statics.blotName){const i=[];return t.children.forEachAt(e,n,((t,e,n)=>{const r="formats"in t&&"function"==typeof t.formats?t.formats():{};i.push({child:t,offset:e,length:n,indent:r.indent||0,type:r.list})})),rr(i,-1,[])}const r=[];if(t.children.forEachAt(e,n,((t,e,n)=>{r.push(sr(t,e,n))})),i||"list"===t.statics.blotName)return r.join("");const{outerHTML:s,innerHTML:o}=t.domNode,[a,l]=s.split(`>${o}<`);return"<table"===a?`<table style="border: 1px solid #000;">${r.join("")}<${l}`:`${a}>${r.join("")}<${l}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function or(t,e){return Object.keys(e).reduce(((n,i)=>{if(null==t[i])return n;const r=e[i];return r===t[i]?n[i]=r:Array.isArray(r)?r.indexOf(t[i])<0?n[i]=r.concat([t[i]]):n[i]=r:n[i]=[r,t[i]],n}),{})}function ar(t){const e="ordered"===t?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function lr(t){return t.reduce(((t,e)=>{if("string"==typeof e.insert){const n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)}),new An)}function cr(t,e){let{index:n,length:i}=t;return new tr(n+e,i)}const dr=class{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const n=lr(t),i=new An;return function(t){const e=[];return t.forEach((t=>{"string"==typeof t.insert?t.insert.split("\n").forEach(((n,i)=>{i&&e.push({insert:"\n",attributes:t.attributes}),n&&e.push({insert:n,attributes:t.attributes})})):e.push(t)})),e}(n.ops.slice()).reduce(((t,n)=>{const r=An.Op.length(n);let s=n.attributes||{},o=!1,a=!1;if(null!=n.insert){if(i.retain(r),"string"==typeof n.insert){const i=n.insert;a=!i.endsWith("\n")&&(e<=t||!!this.scroll.descendant($i,t)[0]),this.scroll.insertAt(t,i);const[r,o]=this.scroll.line(t);let l=Ge({},Ui(r));if(r instanceof Di){const[t]=r.descendant(ln,o);t&&(l=Ge(l,Ui(t)))}s=An.AttributeMap.diff(l,s)||{}}else if("object"==typeof n.insert){const i=Object.keys(n.insert)[0];if(null==i)return t;const r=null!=this.scroll.query(i,We.INLINE);if(r)(e<=t||this.scroll.descendant($i,t)[0])&&(a=!0);else if(t>0){const[e,n]=this.scroll.descendant(ln,t-1);e instanceof ji?"\n"!==e.value()[n]&&(o=!0):e instanceof yn&&e.statics.scope===We.INLINE_BLOT&&(o=!0)}if(this.scroll.insertAt(t,i,n.insert[i]),r){const[e]=this.scroll.descendant(ln,t);if(e){const t=Ge({},Ui(e));s=An.AttributeMap.diff(t,s)||{}}}}e+=r}else if(i.push(n),null!==n.retain&&"object"==typeof n.retain){const e=Object.keys(n.retain)[0];if(null==e)return t;this.scroll.updateEmbedAt(t,e,n.retain[e])}Object.keys(s).forEach((e=>{this.scroll.formatAt(t,r,e,s[e])}));const l=o?1:0,c=a?1:0;return e+=l+c,i.retain(l),i.delete(c),t+r+l+c}),0),i.reduce(((t,e)=>"number"==typeof e.delete?(this.scroll.deleteAt(t,e.delete),t):t+An.Op.length(e)),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update((new An).retain(t).delete(e))}formatLine(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach((i=>{this.scroll.lines(t,Math.max(e,1)).forEach((t=>{t.format(i,n[i])}))})),this.scroll.optimize();const i=(new An).retain(t).retain(e,fi(n));return this.update(i)}formatText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(n).forEach((i=>{this.scroll.formatAt(t,e,i,n[i])}));const i=(new An).retain(t).retain(e,fi(n));return this.update(i)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce(((t,e)=>t.concat(e.delta())),new An)}getFormat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=[];0===e?this.scroll.path(t).forEach((t=>{const[e]=t;e instanceof Di?n.push(e):e instanceof ln&&i.push(e)})):(n=this.scroll.lines(t,e),i=this.scroll.descendants(ln,t,e));const[r,s]=[n,i].map((t=>{const e=t.shift();if(null==e)return{};let n=Ui(e);for(;Object.keys(n).length>0;){const e=t.shift();if(null==e)return n;n=or(Ui(e),n)}return n}));return{...r,...s}}getHTML(t,e){const[n,i]=this.scroll.line(t);if(n){const r=n.length();return n.length()>=i+e&&(0!==i||e!==r)?sr(n,i,e,!0):sr(this.scroll,t,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter((t=>"string"==typeof t.insert)).map((t=>t.insert)).join("")}insertContents(t,e){const n=lr(e),i=(new An).retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(i)}insertEmbed(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new An).retain(t).insert({[e]:n}))}insertText(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(n).forEach((i=>{this.scroll.formatAt(t,e.length,i,n[i])})),this.update((new An).retain(t).insert(e,fi(n)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if(t?.statics.blotName!==Di.blotName)return!1;const e=t;return!(e.children.length>1)&&e.children.head instanceof ki}removeFormat(t,e){const n=this.getText(t,e),[i,r]=this.scroll.line(t+e);let s=0,o=new An;null!=i&&(s=i.length()-r,o=i.delta().slice(r,r+s-1).insert("\n"));const a=this.getContents(t,e+s).diff((new An).insert(n).concat(o)),l=(new An).retain(t).concat(a);return this.applyDelta(l)}update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(ir)&&this.scroll.find(e[0].target)){const r=this.scroll.find(e[0].target),s=Ui(r),o=r.offset(this.scroll),a=e[0].oldValue.replace(Fi.CONTENTS,""),l=(new An).insert(a),c=(new An).insert(r.value()),d=n&&{oldRange:cr(n.oldRange,-o),newRange:cr(n.newRange,-o)};t=(new An).retain(o).concat(l.diff(c,d)).reduce(((t,e)=>e.insert?t.insert(e.insert,s):t.push(e)),new An),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&_i(i.compose(t),this.delta)||(t=i.diff(this.delta,n));return t}},ur=class{static DEFAULTS={};constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=t,this.options=e}},hr="\ufeff",pr=class extends yn{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach((t=>{this.contentNode.appendChild(t)})),this.leftGuard=document.createTextNode(hr),this.rightGuard=document.createTextNode(hr),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e,n=null;const i=t.data.split(hr).join("");if(t===this.leftGuard)if(this.prev instanceof ji){const t=this.prev.length();this.prev.insertAt(t,i),n={startNode:this.prev.domNode,startOffset:t+i.length}}else e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this),n={startNode:e,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof ji?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this.next),n={startNode:e,startOffset:i.length}));return t.data=hr,n}update(t,e){t.forEach((t=>{if("characterData"===t.type&&(t.target===this.leftGuard||t.target===this.rightGuard)){const n=this.restore(t.target);n&&(e.range=n)}}))}},fr=class{isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",(t=>{this.isComposing||this.handleCompositionStart(t)})),this.scroll.domNode.addEventListener("compositionend",(t=>{this.isComposing&&queueMicrotask((()=>{this.handleCompositionEnd(t)}))}))}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof pr||(this.emitter.emit(Xi.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Xi.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Xi.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Xi.events.COMPOSITION_END,t),this.isComposing=!1}};class gr{static DEFAULTS={modules:{}};static themes={default:gr};modules={};constructor(t,e){this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach((t=>{null==this.modules[t]&&this.addModule(t)}))}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}const mr=gr,vr=t=>{const e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,i="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*i,left:e.left}},br=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},yr=(t,e,n,i,r,s)=>t<n&&e>i?0:t<n?-(n-t+r):e>i?e-t>i-n?t+r-n:e-i+s:0,wr=["block","break","cursor","inline","scroll","text"],xr=Ji("quill"),Cr=new Xe;hn.uiClass="ql-ui";class Er{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Cr,theme:"default"};static events=Xi.events;static sources=Xi.sources;static version="2.0.3";static imports={delta:An,parchment:t,"core/module":ur,"core/theme":mr};static debug(t){!0===t&&(t="log"),Ji.level(t)}static find(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return zi.get(t)||Cr.find(t,e)}static import(t){return null==this.imports[t]&&xr.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){const t=arguments.length<=0?void 0:arguments[0],e=!!(arguments.length<=1?void 0:arguments[1]),n="attrName"in t?t.attrName:t.blotName;"string"==typeof n?this.register(`formats/${n}`,t,e):Object.keys(t).forEach((n=>{this.register(n,t[n],e)}))}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],n=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[t]||n||xr.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&Cr.register(e),"function"==typeof e.register&&e.register(Cr)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=function(t,e){const n=Tr(t);if(!n)throw new Error("Invalid Quill container");const i=!e.theme||e.theme===Er.DEFAULTS.theme?mr:Er.import(`themes/${e.theme}`);if(!i)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:r,...s}=Er.DEFAULTS,{modules:o,...a}=i.DEFAULTS;let l=Ar(e.modules);null!=l&&l.toolbar&&l.toolbar.constructor!==Object&&(l={...l,toolbar:{container:l.toolbar}});const c=Ge({},Ar(r),Ar(o),l),d={...s,...Nr(a),...Nr(e)};let u=e.registry;return u?e.formats&&xr.warn('Ignoring "formats" option because "registry" is specified'):u=e.formats?((t,e,n)=>{const i=new Xe;return wr.forEach((t=>{const n=e.query(t);n&&i.register(n)})),t.forEach((t=>{let r=e.query(t);r||n.error(`Cannot register "${t}" specified in "formats" config. Are you sure it was registered?`);let s=0;for(;r;)if(i.register(r),r="blotName"in r?r.requiredContainer??null:null,s+=1,s>100){n.error(`Cycle detected in registering blot requiredContainer: "${t}"`);break}})),i})(e.formats,d.registry,xr):d.registry,{...d,registry:u,container:n,theme:i,modules:Object.entries(c).reduce(((t,e)=>{let[n,i]=e;if(!i)return t;const r=Er.import(`modules/${n}`);return null==r?(xr.error(`Cannot load ${n} module. Are you sure you registered it?`),t):{...t,[n]:Ge({},r.DEFAULTS||{},i)}}),{}),bounds:Tr(d.bounds)}}(t,e),this.container=this.options.container,null==this.container)return void xr.error("Invalid Quill container",t);this.options.debug&&Er.debug(this.options.debug);const n=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",zi.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Xi;const i=Cn.blotName,r=this.options.registry.query(i);if(!r||!("blotName"in r))throw new Error(`Cannot initialize Quill without "${i}" blot`);if(this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new dr(this.scroll),this.selection=new nr(this.scroll,this.emitter),this.composition=new fr(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Xi.events.EDITOR_CHANGE,(t=>{t===Xi.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())})),this.emitter.on(Xi.events.SCROLL_UPDATE,((t,e)=>{const n=this.selection.lastRange,[i]=this.selection.getRange(),r=n&&i?{oldRange:n,newRange:i}:void 0;Sr.call(this,(()=>this.editor.update(null,e,r)),t)})),this.emitter.on(Xi.events.SCROLL_EMBED_UPDATE,((t,e)=>{const n=this.selection.lastRange,[i]=this.selection.getRange(),r=n&&i?{oldRange:n,newRange:i}:void 0;Sr.call(this,(()=>{const n=(new An).retain(t.offset(this)).retain({[t.statics.blotName]:e});return this.editor.update(n,[],r)}),Er.sources.USER)})),n){const t=this.clipboard.convert({html:`${n}<p><br></p>`,text:"\n"});this.setContents(t)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){const e=t;(t=document.createElement("div")).classList.add(e)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,n){return[t,e,,n]=Lr(t,e,n),Sr.call(this,(()=>this.editor.deleteText(t,e)),n,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Xi.sources.API;return Sr.call(this,(()=>{const n=this.getSelection(!0);let i=new An;if(null==n)return i;if(this.scroll.query(t,We.BLOCK))i=this.editor.formatLine(n.index,n.length,{[t]:e});else{if(0===n.length)return this.selection.format(t,e),i;i=this.editor.formatText(n.index,n.length,{[t]:e})}return this.setSelection(n,Xi.sources.SILENT),i}),n)}formatLine(t,e,n,i,r){let s;return[t,e,s,r]=Lr(t,e,n,i,r),Sr.call(this,(()=>this.editor.formatLine(t,e,s)),r,t,0)}formatText(t,e,n,i,r){let s;return[t,e,s,r]=Lr(t,e,n,i,r),Sr.call(this,(()=>this.editor.formatText(t,e,s)),r,t,0)}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null;if(n="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length),!n)return null;const i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}getContents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t;return[t,e]=Lr(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Lr(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=Lr(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Er.sources.API;return Sr.call(this,(()=>this.editor.insertEmbed(t,e,n)),i,t)}insertText(t,e,n,i,r){let s;return[t,,s,r]=Lr(t,0,n,i,r),Sr.call(this,(()=>this.editor.insertText(t,e,s)),r,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,n){return[t,e,,n]=Lr(t,e,n),Sr.call(this,(()=>this.editor.removeFormat(t,e)),n,t)}scrollRectIntoView(t){((t,e)=>{const n=t.ownerDocument;let i=e,r=t;for(;r;){const t=r===n.body,e=t?{top:0,right:window.visualViewport?.width??n.documentElement.clientWidth,bottom:window.visualViewport?.height??n.documentElement.clientHeight,left:0}:vr(r),o=getComputedStyle(r),a=yr(i.left,i.right,e.left,e.right,br(o.scrollPaddingLeft),br(o.scrollPaddingRight)),l=yr(i.top,i.bottom,e.top,e.bottom,br(o.scrollPaddingTop),br(o.scrollPaddingBottom));if(a||l)if(t)n.defaultView?.scrollBy(a,l);else{const{scrollLeft:t,scrollTop:e}=r;l&&(r.scrollTop+=l),a&&(r.scrollLeft+=a);const n=r.scrollLeft-t,s=r.scrollTop-e;i={left:i.left-n,top:i.top-s,right:i.right-n,bottom:i.bottom-s}}r=t||"fixed"===o.position?null:(s=r).parentElement||s.getRootNode().host||null}var s})(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xi.sources.API;return Sr.call(this,(()=>{t=new An(t);const e=this.getLength(),n=this.editor.deleteText(0,e),i=this.editor.insertContents(0,t),r=this.editor.deleteText(this.getLength()-1,1);return n.compose(i).compose(r)}),e)}setSelection(t,e,n){null==t?this.selection.setRange(null,e||Er.sources.API):([t,e,,n]=Lr(t,e,n),this.selection.setRange(new tr(Math.max(0,t),e),n),n!==Xi.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xi.sources.API;const n=(new An).insert(t);return this.setContents(n,e)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xi.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xi.sources.API;return Sr.call(this,(()=>(t=new An(t),this.editor.applyDelta(t))),e,!0)}}function Tr(t){return"string"==typeof t?document.querySelector(t):t}function Ar(t){return Object.entries(t??{}).reduce(((t,e)=>{let[n,i]=e;return{...t,[n]:!0===i?{}:i}}),{})}function Nr(t){return Object.fromEntries(Object.entries(t).filter((t=>void 0!==t[1])))}function Sr(t,e,n,i){if(!this.isEnabled()&&e===Xi.sources.USER&&!this.allowReadOnlyEdits)return new An;let r=null==n?null:this.getSelection();const s=this.editor.delta,o=t();if(null!=r&&(!0===n&&(n=r.index),null==i?r=Ir(r,o,e):0!==i&&(r=Ir(r,n,i,e)),this.setSelection(r,Xi.sources.SILENT)),o.length()>0){const t=[Xi.events.TEXT_CHANGE,o,s,e];this.emitter.emit(Xi.events.EDITOR_CHANGE,...t),e!==Xi.sources.SILENT&&this.emitter.emit(...t)}return o}function Lr(t,e,n,i,r){let s={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(r=i,i=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(r=i,i=n,n=e,e=0),"object"==typeof n?(s=n,r=i):"string"==typeof n&&(null!=i?s[n]=i:r=n),[t,e,s,r=r||Xi.sources.API]}function Ir(t,e,n,i){const r="number"==typeof n?n:0;if(null==t)return null;let s,o;return e&&"function"==typeof e.transformPosition?[s,o]=[t.index,t.index+t.length].map((t=>e.transformPosition(t,i!==Xi.sources.USER))):[s,o]=[t.index,t.index+t.length].map((t=>t<e||t===e&&i===Xi.sources.USER?t:r>=0?t+r:Math.max(e,t+r))),new tr(s,o-s)}const _r=class extends bn{};function Or(t){return t instanceof Di||t instanceof $i}function kr(t){return"function"==typeof t.updateContent}function jr(t,e,n){n.reduce(((e,n)=>{const i=An.Op.length(n);let r=n.attributes||{};if(null!=n.insert)if("string"==typeof n.insert){const i=n.insert;t.insertAt(e,i);const[s]=t.descendant(ln,e),o=Ui(s);r=An.AttributeMap.diff(o,r)||{}}else if("object"==typeof n.insert){const i=Object.keys(n.insert)[0];if(null==i)return e;if(t.insertAt(e,i,n.insert[i]),null!=t.scroll.query(i,We.INLINE)){const[n]=t.descendant(ln,e),i=Ui(n);r=An.AttributeMap.diff(i,r)||{}}}return Object.keys(r).forEach((n=>{t.formatAt(e,i,n,r[n])})),e+i}),e)}const Pr={scope:We.BLOCK,whitelist:["right","center","justify"]},Mr=new Ke("align","align",Pr),qr=new tn("align","ql-align",Pr),Br=new nn("align","text-align",Pr);class Dr extends nn{value(t){let e=super.value(t);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map((t=>`00${parseInt(t,10).toString(16)}`.slice(-2))).join("")}`):e}}const $r=new tn("color","ql-color",{scope:We.INLINE}),Rr=new Dr("color","color",{scope:We.INLINE}),Ur=new tn("background","ql-bg",{scope:We.INLINE}),Vr=new Dr("background","background-color",{scope:We.INLINE});class Fr extends _r{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map((t=>t.length()<=1?"":t.domNode.innerText)).join("\n").slice(t,t+e)}html(t,e){return`<pre>\n${Mi(this.code(t,e))}\n</pre>`}}class Hr extends Di{static TAB="  ";static register(){Er.register(Fr)}}class zr extends Bi{}zr.blotName="code",zr.tagName="CODE",Hr.blotName="code-block",Hr.className="ql-code-block",Hr.tagName="DIV",Fr.blotName="code-block-container",Fr.className="ql-code-block-container",Fr.tagName="DIV",Fr.allowedChildren=[Hr],Hr.allowedChildren=[ji,ki,Fi],Hr.requiredContainer=Fr;const Gr={scope:We.BLOCK,whitelist:["rtl"]},Zr=new Ke("direction","dir",Gr),Wr=new tn("direction","ql-direction",Gr),Kr=new nn("direction","direction",Gr),Jr={scope:We.INLINE,whitelist:["serif","monospace"]},Yr=new tn("font","ql-font",Jr),Xr=new class extends nn{value(t){return super.value(t).replace(/["']/g,"")}}("font","font-family",Jr),Qr=new tn("size","ql-size",{scope:We.INLINE,whitelist:["small","large","huge"]}),ts=new nn("size","font-size",{scope:We.INLINE,whitelist:["10px","18px","32px"]}),es=Ji("quill:keyboard"),ns=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class is extends ur{static match(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((n=>!!e[n]!==t[n]&&null!==e[n]))&&(e.key===t.key||e.key===t.which)}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach((t=>{this.options.bindings[t]&&this.addBinding(this.options.bindings[t])})),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(()=>{})),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=function(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!=typeof t)return null;t=fi(t)}return t.shortKey&&(t[ns]=t.shortKey,delete t.shortKey),t}(t);null!=i?("function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),(Array.isArray(i.key)?i.key:[i.key]).forEach((t=>{const r={...i,key:t,...e,...n};this.bindings[r.key]=this.bindings[r.key]||[],this.bindings[r.key].push(r)}))):es.warn("Attempted to add invalid keyboard binding",i)}listen(){this.quill.root.addEventListener("keydown",(t=>{if(t.defaultPrevented||t.isComposing)return;if(229===t.keyCode&&("Enter"===t.key||"Backspace"===t.key))return;const e=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter((e=>is.match(t,e)));if(0===e.length)return;const n=Er.find(t.target,!0);if(n&&n.scroll!==this.quill.scroll)return;const i=this.quill.getSelection();if(null==i||!this.quill.hasFocus())return;const[r,s]=this.quill.getLine(i.index),[o,a]=this.quill.getLeaf(i.index),[l,c]=0===i.length?[o,a]:this.quill.getLeaf(i.index+i.length),d=o instanceof Tn?o.value().slice(0,a):"",u=l instanceof Tn?l.value().slice(c):"",h={collapsed:0===i.length,empty:0===i.length&&r.length()<=1,format:this.quill.getFormat(i),line:r,offset:s,prefix:d,suffix:u,event:t};e.some((t=>{if(null!=t.collapsed&&t.collapsed!==h.collapsed)return!1;if(null!=t.empty&&t.empty!==h.empty)return!1;if(null!=t.offset&&t.offset!==h.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((t=>null==h.format[t])))return!1}else if("object"==typeof t.format&&!Object.keys(t.format).every((e=>!0===t.format[e]?null!=h.format[e]:!1===t.format[e]?null==h.format[e]:_i(t.format[e],h.format[e]))))return!1;return!(null!=t.prefix&&!t.prefix.test(h.prefix)||null!=t.suffix&&!t.suffix.test(h.suffix)||!0===t.handler.call(this,i,h,t))}))&&t.preventDefault()}))}handleBackspace(t,e){const n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===t.index||this.quill.getLength()<=1)return;let i={};const[r]=this.quill.getLine(t.index);let s=(new An).retain(t.index-n).delete(n);if(0===e.offset){const[e]=this.quill.getLine(t.index-1);if(e&&!("block"===e.statics.blotName&&e.length()<=1)){const e=r.formats(),n=this.quill.getFormat(t.index-1,1);if(i=An.AttributeMap.diff(e,n)||{},Object.keys(i).length>0){const e=(new An).retain(t.index+r.length()-2).retain(1,i);s=s.compose(e)}}}this.quill.updateContents(s,Er.sources.USER),this.quill.focus()}handleDelete(t,e){const n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-n)return;let i={};const[r]=this.quill.getLine(t.index);let s=(new An).retain(t.index).delete(n);if(e.offset>=r.length()-1){const[e]=this.quill.getLine(t.index+1);if(e){const n=r.formats(),o=this.quill.getFormat(t.index,1);i=An.AttributeMap.diff(n,o)||{},Object.keys(i).length>0&&(s=s.retain(e.length()-1).retain(1,i))}}this.quill.updateContents(s,Er.sources.USER),this.quill.focus()}handleDeleteRange(t){cs({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const n=Object.keys(e.format).reduce(((t,n)=>(this.quill.scroll.query(n,We.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t)),{}),i=(new An).retain(t.index).delete(t.length).insert("\n",n);this.quill.updateContents(i,Er.sources.USER),this.quill.setSelection(t.index+1,Er.sources.SILENT),this.quill.focus()}}const rs={bindings:{bold:as("bold"),italic:as("italic"),underline:as("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",Er.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",Er.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){null!=e.format.indent?this.quill.format("indent","-1",Er.sources.USER):null!=e.format.list&&this.quill.format("list",!1,Er.sources.USER)}},"indent code-block":ss(!0),"outdent code-block":ss(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Er.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const n=(new An).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(n,Er.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Er.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Er.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,Er.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,n]=this.quill.getLine(t.index),i={...e.formats(),list:"checked"},r=(new An).retain(t.index).insert("\n",i).retain(e.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,Er.sources.USER),this.quill.setSelection(t.index+1,Er.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[n,i]=this.quill.getLine(t.index),r=(new An).retain(t.index).insert("\n",e.format).retain(n.length()-i-1).retain(1,{header:null});this.quill.updateContents(r,Er.sources.USER),this.quill.setSelection(t.index+1,Er.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[n,i,r,s]=e.getTable(t),o=function(t,e,n,i){return null==e.prev&&null==e.next?null==n.prev&&null==n.next?0===i?-1:1:null==n.prev?-1:1:null==e.prev?-1:null==e.next?1:null}(0,i,r,s);if(null==o)return;let a=n.offset();if(o<0){const e=(new An).retain(a).insert("\n");this.quill.updateContents(e,Er.sources.USER),this.quill.setSelection(t.index+1,t.length,Er.sources.SILENT)}else if(o>0){a+=n.length();const t=(new An).retain(a).insert("\n");this.quill.updateContents(t,Er.sources.USER),this.quill.setSelection(a,Er.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:n,line:i}=e,r=i.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(r-1,Er.sources.USER):this.quill.setSelection(r+i.length(),Er.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(null==this.quill.scroll.query("list"))return!0;const{length:n}=e.prefix,[i,r]=this.quill.getLine(t.index);if(r>n)return!0;let s;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",Er.sources.USER),this.quill.history.cutoff();const o=(new An).retain(t.index-r).delete(n+1).retain(i.length()-2-r).retain(1,{list:s});return this.quill.updateContents(o,Er.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,Er.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,n]=this.quill.getLine(t.index);let i=2,r=e;for(;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,i-=1,i<=0){const i=(new An).retain(t.index+e.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(i,Er.sources.USER),this.quill.setSelection(t.index-1,Er.sources.SILENT),!1}return!0}},"embed left":os("ArrowLeft",!1),"embed left shift":os("ArrowLeft",!0),"embed right":os("ArrowRight",!1),"embed right shift":os("ArrowRight",!0),"table down":ls(!1),"table up":ls(!0)}};function ss(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,n){let{event:i}=n;const r=this.quill.scroll.query("code-block"),{TAB:s}=r;if(0===e.length&&!i.shiftKey)return this.quill.insertText(e.index,s,Er.sources.USER),void this.quill.setSelection(e.index+s.length,Er.sources.SILENT);const o=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:a,length:l}=e;o.forEach(((e,n)=>{t?(e.insertAt(0,s),0===n?a+=s.length:l+=s.length):e.domNode.textContent.startsWith(s)&&(e.deleteAt(0,s.length),0===n?a-=s.length:l-=s.length)})),this.quill.update(Er.sources.USER),this.quill.setSelection(a,l,Er.sources.SILENT)}}}function os(t,e){const n="ArrowLeft"===t?"prefix":"suffix";return{key:t,shiftKey:e,altKey:null,[n]:/^$/,handler(n){let{index:i}=n;"ArrowRight"===t&&(i+=n.length+1);const[r]=this.quill.getLeaf(i);return!(r instanceof yn&&("ArrowLeft"===t?e?this.quill.setSelection(n.index-1,n.length+1,Er.sources.USER):this.quill.setSelection(n.index-1,Er.sources.USER):e?this.quill.setSelection(n.index,n.length+1,Er.sources.USER):this.quill.setSelection(n.index+n.length+1,Er.sources.USER),1))}}}function as(t){return{key:t[0],shortKey:!0,handler(e,n){this.quill.format(t,!n.format[t],Er.sources.USER)}}}function ls(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,n){const i=t?"prev":"next",r=n.line,s=r.parent[i];if(null!=s){if("table-row"===s.statics.blotName){let t=s.children.head,e=r;for(;null!=e.prev;)e=e.prev,t=t.next;const i=t.offset(this.quill.scroll)+Math.min(n.offset,t.length()-1);this.quill.setSelection(i,0,Er.sources.USER)}}else{const e=r.table()[i];null!=e&&(t?this.quill.setSelection(e.offset(this.quill.scroll)+e.length()-1,0,Er.sources.USER):this.quill.setSelection(e.offset(this.quill.scroll),0,Er.sources.USER))}return!1}}}function cs(t){let{quill:e,range:n}=t;const i=e.getLines(n);let r={};if(i.length>1){const t=i[0].formats(),e=i[i.length-1].formats();r=An.AttributeMap.diff(e,t)||{}}e.deleteText(n,Er.sources.USER),Object.keys(r).length>0&&e.formatLine(n.index,1,r,Er.sources.USER),e.setSelection(n.index,Er.sources.SILENT)}is.DEFAULTS=rs;const ds=/font-weight:\s*normal/,us=["P","OL","UL"],hs=t=>t&&us.includes(t.tagName),ps=/\bmso-list:[^;]*ignore/i,fs=/\bmso-list:[^;]*\bl(\d+)/i,gs=/\bmso-list:[^;]*\blevel(\d+)/i,ms=[function(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&(t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],i=[];e.forEach((t=>{(t.getAttribute("style")||"").match(ps)?n.push(t):i.push(t)})),n.forEach((t=>t.parentNode?.removeChild(t)));const r=t.documentElement.innerHTML,s=i.map((t=>((t,e)=>{const n=t.getAttribute("style"),i=n?.match(fs);if(!i)return null;const r=Number(i[1]),s=n?.match(gs),o=s?Number(s[1]):1,a=new RegExp(`@list l${r}:level${o}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),l=e.match(a);return{id:r,indent:o,type:l&&"bullet"===l[1]?"bullet":"ordered",element:t}})(t,r))).filter((t=>t));for(;s.length;){const t=[];let e=s.shift();for(;e;)t.push(e),e=s.length&&s[0]?.element===e.element.nextElementSibling&&s[0].id===e.id?s.shift():null;const n=document.createElement("ul");t.forEach((t=>{const e=document.createElement("li");e.setAttribute("data-list",t.type),t.indent>1&&e.setAttribute("class","ql-indent-"+(t.indent-1)),e.innerHTML=t.element.innerHTML,n.appendChild(e)}));const i=t[0]?.element,{parentNode:r}=i??{};i&&r?.replaceChild(n,i),t.slice(1).forEach((t=>{let{element:e}=t;r?.removeChild(e)}))}})(t)},function(t){t.querySelector('[id^="docs-internal-guid-"]')&&((t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((t=>t.getAttribute("style")?.match(ds))).forEach((e=>{const n=t.createDocumentFragment();n.append(...e.childNodes),e.parentNode?.replaceChild(n,e)}))})(t),(t=>{Array.from(t.querySelectorAll("br")).filter((t=>hs(t.previousElementSibling)&&hs(t.nextElementSibling))).forEach((t=>{t.parentNode?.removeChild(t)}))})(t))}],vs=Ji("quill:clipboard"),bs=[[Node.TEXT_NODE,function(t,e,n){let i=t.data;if("O:P"===t.parentElement?.tagName)return e.insert(i.trim());if(!As(t)){if(0===i.trim().length&&i.includes("\n")&&!function(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Es(t.previousElementSibling,e)&&!Es(t.nextElementSibling,e)}(t,n))return e;i=i.replace(/[^\S\u00a0]/g," "),i=i.replace(/ {2,}/g," "),(null==t.previousSibling&&null!=t.parentElement&&Es(t.parentElement,n)||t.previousSibling instanceof Element&&Es(t.previousSibling,n))&&(i=i.replace(/^ /,"")),(null==t.nextSibling&&null!=t.parentElement&&Es(t.parentElement,n)||t.nextSibling instanceof Element&&Es(t.nextSibling,n))&&(i=i.replace(/ $/,"")),i=i.replaceAll(" "," ")}return e.insert(i)}],[Node.TEXT_NODE,Ls],["br",function(t,e){return Cs(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,Ls],[Node.ELEMENT_NODE,function(t,e,n){const i=n.query(t);if(null==i)return e;if(i.prototype instanceof yn){const e={},r=i.value(t);if(null!=r)return e[i.blotName]=r,(new An).insert(e,i.formats(t,n))}else if(i.prototype instanceof mn&&!Cs(e,"\n")&&e.insert("\n"),"blotName"in i&&"formats"in i&&"function"==typeof i.formats)return xs(e,i.blotName,i.formats(t,n),n);return e}],[Node.ELEMENT_NODE,function(t,e,n){const i=Ke.keys(t),r=tn.keys(t),s=nn.keys(t),o={};return i.concat(r).concat(s).forEach((e=>{let i=n.query(e,We.ATTRIBUTE);null!=i&&(o[i.attrName]=i.value(t),o[i.attrName])||(i=ys[e],null==i||i.attrName!==e&&i.keyName!==e||(o[i.attrName]=i.value(t)||void 0),i=ws[e],null==i||i.attrName!==e&&i.keyName!==e||(i=ws[e],o[i.attrName]=i.value(t)||void 0))})),Object.entries(o).reduce(((t,e)=>{let[i,r]=e;return xs(t,i,r,n)}),e)}],[Node.ELEMENT_NODE,function(t,e,n){const i={},r=t.style||{};return"italic"===r.fontStyle&&(i.italic=!0),"underline"===r.textDecoration&&(i.underline=!0),"line-through"===r.textDecoration&&(i.strike=!0),(r.fontWeight?.startsWith("bold")||parseInt(r.fontWeight,10)>=700)&&(i.bold=!0),e=Object.entries(i).reduce(((t,e)=>{let[i,r]=e;return xs(t,i,r,n)}),e),parseFloat(r.textIndent||0)>0?(new An).insert("\t").concat(e):e}],["li",function(t,e,n){const i=n.query(t);if(null==i||"list"!==i.blotName||!Cs(e,"\n"))return e;let r=-1,s=t.parentNode;for(;null!=s;)["OL","UL"].includes(s.tagName)&&(r+=1),s=s.parentNode;return r<=0?e:e.reduce(((t,e)=>e.insert?e.attributes&&"number"==typeof e.attributes.indent?t.push(e):t.insert(e.insert,{indent:r,...e.attributes||{}}):t),new An)}],["ol, ul",function(t,e,n){const i=t;let r="OL"===i.tagName?"ordered":"bullet";const s=i.getAttribute("data-checked");return s&&(r="true"===s?"checked":"unchecked"),xs(e,"list",r,n)}],["pre",function(t,e,n){const i=n.query("code-block");return xs(e,"code-block",!i||!("formats"in i)||"function"!=typeof i.formats||i.formats(t,n),n)}],["tr",function(t,e,n){const i="TABLE"===t.parentElement?.tagName?t.parentElement:t.parentElement?.parentElement;return null!=i?xs(e,"table",Array.from(i.querySelectorAll("tr")).indexOf(t)+1,n):e}],["b",Ss("bold")],["i",Ss("italic")],["strike",Ss("strike")],["style",function(){return new An}]],ys=[Mr,Zr].reduce(((t,e)=>(t[e.keyName]=e,t)),{}),ws=[Br,Vr,Rr,Kr,Xr,ts].reduce(((t,e)=>(t[e.keyName]=e,t)),{});function xs(t,e,n,i){return i.query(e)?t.reduce(((t,i)=>{if(!i.insert)return t;if(i.attributes&&i.attributes[e])return t.push(i);const r=n?{[e]:n}:{};return t.insert(i.insert,{...r,...i.attributes})}),new An):t}function Cs(t,e){let n="";for(let i=t.ops.length-1;i>=0&&n.length<e.length;--i){const e=t.ops[i];if("string"!=typeof e.insert)break;n=e.insert+n}return n.slice(-1*e.length)===e}function Es(t,e){if(!(t instanceof Element))return!1;const n=e.query(t);return!(n&&n.prototype instanceof yn)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}const Ts=new WeakMap;function As(t){return null!=t&&(Ts.has(t)||("PRE"===t.tagName?Ts.set(t,!0):Ts.set(t,As(t.parentNode))),Ts.get(t))}function Ns(t,e,n,i,r){return e.nodeType===e.TEXT_NODE?i.reduce(((n,i)=>i(e,n,t)),new An):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce(((s,o)=>{let a=Ns(t,o,n,i,r);return o.nodeType===e.ELEMENT_NODE&&(a=n.reduce(((e,n)=>n(o,e,t)),a),a=(r.get(o)||[]).reduce(((e,n)=>n(o,e,t)),a)),s.concat(a)}),new An):new An}function Ss(t){return(e,n,i)=>xs(n,t,!0,i)}function Ls(t,e,n){if(!Cs(e,"\n")){if(Es(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&t.nextSibling){let i=t.nextSibling;for(;null!=i;){if(Es(i,n))return e.insert("\n");const t=n.query(i);if(t&&t.prototype instanceof $i)return e.insert("\n");i=i.firstChild}}}return e}function Is(t,e){let n=e;for(let e=t.length-1;e>=0;e-=1){const i=t[e];t[e]={delta:n.transform(i.delta,!0),range:i.range&&_s(i.range,n)},n=i.delta.transform(n),0===t[e].delta.length()&&t.splice(e,1)}}function _s(t,e){if(!t)return t;const n=e.transformPosition(t.index);return{index:n,length:e.transformPosition(t.index+t.length)-n}}class Os extends ur{constructor(t,e){super(t,e),t.root.addEventListener("drop",(e=>{e.preventDefault();let n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){const t=document.caretPositionFromPoint(e.clientX,e.clientY);n=document.createRange(),n.setStart(t.offsetNode,t.offset),n.setEnd(t.offsetNode,t.offset)}const i=n&&t.selection.normalizeNative(n);if(i){const n=t.selection.normalizedToRange(i);e.dataTransfer?.files&&this.upload(n,e.dataTransfer.files)}}))}upload(t,e){const n=[];Array.from(e).forEach((t=>{t&&this.options.mimetypes?.includes(t.type)&&n.push(t)})),n.length>0&&this.options.handler.call(this,t,n)}}Os.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const n=e.map((t=>new Promise((e=>{const n=new FileReader;n.onload=()=>{e(n.result)},n.readAsDataURL(t)}))));Promise.all(n).then((e=>{const n=e.reduce(((t,e)=>t.insert({image:e})),(new An).retain(t.index).delete(t.length));this.quill.updateContents(n,Xi.sources.USER),this.quill.setSelection(t.index+e.length,Xi.sources.SILENT)}))}};const ks=Os,js=["insertText","insertReplacementText"],Ps=/Mac/i.test(navigator.platform);Er.register({"blots/block":Di,"blots/block/embed":$i,"blots/break":ki,"blots/container":_r,"blots/cursor":Fi,"blots/embed":pr,"blots/inline":Bi,"blots/scroll":class extends Cn{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Di;static allowedChildren=[Di,$i,_r];constructor(t,e,n){let{emitter:i}=n;super(t,e),this.emitter=i,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",(t=>this.handleDragStart(t)))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Xi.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Xi.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(Xi.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[n,i]=this.line(t),[r]=this.line(t+e);if(super.deleteAt(t,e),null!=r&&n!==r&&i>0){if(n instanceof $i||r instanceof $i)return void this.optimize();const t=r.children.head instanceof ki?null:r.children.head;n.moveChildren(r,t),n.remove()}this.optimize()}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,n,i){super.formatAt(t,e,n,i),this.optimize()}insertAt(t,e,n){if(t>=this.length())if(null==n||null==this.scroll.query(e,We.BLOCK)){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t),null==n&&e.endsWith("\n")?t.insertAt(0,e.slice(0,-1),n):t.insertAt(0,e,n)}else{const t=this.scroll.create(e,n);this.appendChild(t)}else super.insertAt(t,e,n);this.optimize()}insertBefore(t,e){if(t.statics.scope===We.INLINE_BLOT){const n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(t),super.insertBefore(n,e)}else super.insertBefore(t,e)}insertContents(t,e){const n=this.deltaToRenderBlocks(e.concat((new An).insert("\n"))),i=n.pop();if(null==i)return;this.batchStart();const r=n.shift();if(r){const e="block"===r.type&&(0===r.delta.length()||!this.descendant($i,t)[0]&&t<this.length()),n="block"===r.type?r.delta:(new An).insert({[r.key]:r.value});jr(this,t,n);const i="block"===r.type?1:0,s=t+n.length()+i;e&&this.insertAt(s-1,"\n");const o=Ui(this.line(t)[0]),a=An.AttributeMap.diff(o,r.attributes)||{};Object.keys(a).forEach((t=>{this.formatAt(s-1,1,t,a[t])})),t=s}let[s,o]=this.children.find(t);n.length&&(s&&(s=s.split(o),o=0),n.forEach((t=>{if("block"===t.type)jr(this.createBlock(t.attributes,s||void 0),0,t.delta);else{const e=this.create(t.key,t.value);this.insertBefore(e,s||void 0),Object.keys(t.attributes).forEach((n=>{e.format(n,t.attributes[n])}))}}))),"block"===i.type&&i.delta.length()&&jr(this,s?s.offset(s.scroll)+o:this.length(),i.delta),this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[n,i]=e;return n instanceof ln?[n,i]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(Or,t)}lines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;const n=(t,e,i)=>{let r=[],s=i;return t.children.forEachAt(e,i,((t,e,i)=>{Or(t)?r.push(t):t instanceof bn&&(r=r.concat(n(t,e,s))),s-=i})),r};return n(this,t,e)}optimize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(Xi.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch)return void(Array.isArray(t)&&(this.batch=this.batch.concat(t)));let e=Xi.sources.USER;"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),(t=t.filter((t=>{let{target:e}=t;const n=this.find(e,!0);return n&&!kr(n)}))).length>0&&this.emitter.emit(Xi.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Xi.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,n){const[i]=this.descendant((t=>t instanceof $i),t);i&&i.statics.blotName===e&&kr(i)&&i.updateContent(n)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let n=new An;return t.forEach((t=>{const i=t?.insert;if(i)if("string"==typeof i){const r=i.split("\n");r.slice(0,-1).forEach((i=>{n.insert(i,t.attributes),e.push({type:"block",delta:n,attributes:t.attributes??{}}),n=new An}));const s=r[r.length-1];s&&n.insert(s,t.attributes)}else{const r=Object.keys(i)[0];if(!r)return;this.query(r,We.INLINE)?n.push(t):(n.length()&&e.push({type:"block",delta:n,attributes:{}}),n=new An,e.push({type:"blockEmbed",key:r,value:i[r],attributes:t.attributes??{}}))}})),n.length()&&e.push({type:"block",delta:n,attributes:{}}),e}createBlock(t,e){let n;const i={};Object.entries(t).forEach((t=>{let[e,r]=t;null!=this.query(e,We.BLOCK&We.BLOT)?n=e:i[e]=r}));const r=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(r,e||void 0);const s=r.length();return Object.entries(i).forEach((t=>{let[e,n]=t;r.formatAt(0,s,e,n)})),r}},"blots/text":ji,"modules/clipboard":class extends ur{static DEFAULTS={matchers:[]};constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",(t=>this.onCaptureCopy(t,!1))),this.quill.root.addEventListener("cut",(t=>this.onCaptureCopy(t,!0))),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],bs.concat(this.options.matchers??[]).forEach((t=>{let[e,n]=t;this.addMatcher(e,n)}))}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:n}=t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i[Hr.blotName])return(new An).insert(n||"",{[Hr.blotName]:i[Hr.blotName]});if(!e)return(new An).insert(n||"",i);const r=this.convertHTML(e);return Cs(r,"\n")&&(null==r.ops[r.ops.length-1].attributes||i.table)?r.compose((new An).retain(r.length()-1).delete(1)):r}normalizeHTML(t){(t=>{t.documentElement&&ms.forEach((e=>{e(t)}))})(t)}convertHTML(t){const e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);const n=e.body,i=new WeakMap,[r,s]=this.prepareMatching(n,i);return Ns(this.quill.scroll,n,r,s,i)}dangerouslyPasteHTML(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Er.sources.API;if("string"==typeof t){const n=this.convert({html:t,text:""});this.quill.setContents(n,e),this.quill.setSelection(0,Er.sources.SILENT)}else{const i=this.convert({html:e,text:""});this.quill.updateContents((new An).retain(t).concat(i),n),this.quill.setSelection(t+i.length(),Er.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.defaultPrevented)return;t.preventDefault();const[n]=this.quill.selection.getRange();if(null==n)return;const{html:i,text:r}=this.onCopy(n,e);t.clipboardData?.setData("text/plain",r),t.clipboardData?.setData("text/html",i),e&&cs({range:n,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter((t=>"#"!==t[0])).join("\n")}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(null==e)return;const n=t.clipboardData?.getData("text/html");let i=t.clipboardData?.getData("text/plain");if(!n&&!i){const e=t.clipboardData?.getData("text/uri-list");e&&(i=this.normalizeURIList(e))}const r=Array.from(t.clipboardData?.files||[]);if(!n&&r.length>0)this.quill.uploader.upload(e,r);else{if(n&&r.length>0){const t=(new DOMParser).parseFromString(n,"text/html");if(1===t.body.childElementCount&&"IMG"===t.body.firstElementChild?.tagName)return void this.quill.uploader.upload(e,r)}this.onPaste(e,{html:n,text:i})}}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:n,html:i}=e;const r=this.quill.getFormat(t.index),s=this.convert({text:n,html:i},r);vs.log("onPaste",s,{text:n,html:i});const o=(new An).retain(t.index).delete(t.length).concat(s);this.quill.updateContents(o,Er.sources.USER),this.quill.setSelection(o.length()-t.length,Er.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const n=[],i=[];return this.matchers.forEach((r=>{const[s,o]=r;switch(s){case Node.TEXT_NODE:i.push(o);break;case Node.ELEMENT_NODE:n.push(o);break;default:Array.from(t.querySelectorAll(s)).forEach((t=>{if(e.has(t)){const n=e.get(t);n?.push(o)}else e.set(t,[o])}))}})),[n,i]}},"modules/history":class extends ur{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e),this.quill.on(Er.events.EDITOR_CHANGE,((t,e,n,i)=>{t===Er.events.SELECTION_CHANGE?e&&i!==Er.sources.SILENT&&(this.currentRange=e):t===Er.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&i!==Er.sources.USER?this.transform(e):this.record(e,n)),this.currentRange=_s(this.currentRange,e))})),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",(t=>{"historyUndo"===t.inputType?(this.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(this.redo(),t.preventDefault())}))}change(t,e){if(0===this.stack[t].length)return;const n=this.stack[t].pop();if(!n)return;const i=this.quill.getContents(),r=n.delta.invert(i);this.stack[e].push({delta:r,range:_s(n.range,r)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,Er.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(0===t.ops.length)return;this.stack.redo=[];let n=t.invert(e),i=this.currentRange;const r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){const t=this.stack.undo.pop();t&&(n=n.compose(t.delta),i=t.range)}else this.lastRecorded=r;0!==n.length()&&(this.stack.undo.push({delta:n,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){Is(this.stack.undo,t),Is(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,Er.sources.USER);else{const e=function(t,e){const n=e.reduce(((t,e)=>t+(e.delete||0)),0);let i=e.length()-n;return function(t,e){const n=e.ops[e.ops.length-1];return null!=n&&(null!=n.insert?"string"==typeof n.insert&&n.insert.endsWith("\n"):null!=n.attributes&&Object.keys(n.attributes).some((e=>null!=t.query(e,We.BLOCK))))}(t,e)&&(i-=1),i}(this.quill.scroll,t.delta);this.quill.setSelection(e,Er.sources.USER)}}},"modules/keyboard":is,"modules/uploader":ks,"modules/input":class extends ur{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",(t=>{this.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||t.on(Er.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}deleteRange(t){cs({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){const n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new An).retain(t.index).insert(e,n),Er.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,Er.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!js.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const n=function(t){return"string"==typeof t.data?t.data:t.dataTransfer?.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}(t);if(null==n)return;const i=this.quill.selection.normalizeNative(e),r=i?this.quill.selection.normalizedToRange(i):null;r&&this.replaceText(r,n)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}},"modules/uiNode":class extends ur{isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:n,event:i}=e;if(!(n instanceof hn&&n.uiNode))return!0;const r="rtl"===getComputedStyle(n.domNode).direction;return!!(r&&"ArrowRight"!==i.key||!r&&"ArrowLeft"!==i.key)||(this.quill.setSelection(t.index-1,t.length+(i.shiftKey?1:0),Er.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",(t=>{!t.defaultPrevented&&(t=>"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||!(!Ps||"a"!==t.key||!0!==t.ctrlKey))(t)&&this.ensureListeningToSelectionChange()}))}ensureListeningToSelectionChange(){this.selectionChangeDeadline=Date.now()+100,this.isListening||(this.isListening=!0,document.addEventListener("selectionchange",(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()}),{once:!0}))}handleSelectionChange(){const t=document.getSelection();if(!t)return;const e=t.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const n=this.quill.scroll.find(e.startContainer);if(!(n instanceof hn&&n.uiNode))return;const i=document.createRange();i.setStartAfter(n.uiNode),i.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(i)}}});const Ms=Er,qs=new class extends tn{add(t,e){let n=0;if("+1"===e||"-1"===e){const i=this.value(t)||0;n="+1"===e?i+1:i-1}else"number"==typeof e&&(n=e);return 0===n?(this.remove(t),!0):super.add(t,n.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}("indent","ql-indent",{scope:We.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),Bs=qs;class Ds extends _r{}Ds.blotName="list-container",Ds.tagName="OL";class $s extends Di{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){Er.register(Ds)}constructor(t,e){super(t,e);const n=e.ownerDocument.createElement("span"),i=n=>{if(!t.isEnabled())return;const i=this.statics.formats(e,t);"checked"===i?(this.format("list","unchecked"),n.preventDefault()):"unchecked"===i&&(this.format("list","checked"),n.preventDefault())};n.addEventListener("mousedown",i),n.addEventListener("touchstart",i),this.attachUI(n)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}$s.blotName="list",$s.tagName="LI",Ds.allowedChildren=[$s],$s.requiredContainer=Ds;const Rs=class extends Bi{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}};class Us extends Bi{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return Vs(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("href",this.constructor.sanitize(e)):super.format(t,e)}}function Vs(t,e){const n=document.createElement("a");n.href=t;const i=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(i)>-1}const Fs=["alt","height","width"],Hs=["height","width"],zs=new tn("code-token","hljs",{scope:We.INLINE});class Gs extends Bi{static formats(t,e){for(;null!=t&&t!==e.domNode;){if(t.classList&&t.classList.contains(Hr.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,n){super(t,e,n),zs.add(this.domNode,n)}format(t,e){t!==Gs.blotName?super.format(t,e):e?zs.add(this.domNode,e):(zs.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),zs.value(this.domNode)||this.unwrap()}}Gs.blotName="code-token",Gs.className="ql-token";class Zs extends Hr{static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),Gs.blotName,!1),super.replaceWith(t,e)}}class Ws extends Fr{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===Zs.blotName&&(this.forceNext=!0,this.children.forEach((n=>{n.format(t,e)})))}formatAt(t,e,n,i){n===Zs.blotName&&(this.forceNext=!0),super.formatAt(t,e,n,i)}highlight(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const n=`${Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).map((t=>t.textContent)).join("\n")}\n`,i=Zs.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==n){if(n.trim().length>0||null==this.cachedText){const e=this.children.reduce(((t,e)=>t.concat(Ri(e,!1))),new An),r=t(n,i);e.diff(r).reduce(((t,e)=>{let{retain:n,attributes:i}=e;return n?(i&&Object.keys(i).forEach((e=>{[Zs.blotName,Gs.blotName].includes(e)&&this.formatAt(t,n,e,i[e])})),t+n):t}),0)}this.cachedText=n,this.forceNext=!1}}html(t,e){const[n]=this.children.find(t);return`<pre data-language="${n?Zs.formats(n.domNode):"plain"}">\n${Mi(this.code(t,e))}\n</pre>`}optimize(t){if(super.optimize(t),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const t=Zs.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}Ws.allowedChildren=[Zs],Zs.requiredContainer=Ws,Zs.allowedChildren=[Gs,Fi,ji,ki];class Ks extends ur{static register(){Er.register(Gs,!0),Er.register(Zs,!0),Er.register(Ws,!0)}constructor(t,e){if(super(t,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce(((t,e)=>{let{key:n}=e;return t[n]=!0,t}),{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Er.events.SCROLL_BLOT_MOUNT,(t=>{if(!(t instanceof Ws))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach((t=>{let{key:n,label:i}=t;const r=e.ownerDocument.createElement("option");r.textContent=i,r.setAttribute("value",n),e.appendChild(r)})),e.addEventListener("change",(()=>{t.format(Zs.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)})),null==t.uiNode&&(t.attachUI(e),t.children.head&&(e.value=Zs.formats(t.children.head.domNode)))}))}initTimer(){let t=null;this.quill.on(Er.events.SCROLL_OPTIMIZE,(()=>{t&&clearTimeout(t),t=setTimeout((()=>{this.highlight(),t=null}),this.options.interval)}))}highlight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(Er.sources.USER);const n=this.quill.getSelection();(null==t?this.quill.scroll.descendants(Ws):[t]).forEach((t=>{t.highlight(this.highlightBlot,e)})),this.quill.update(Er.sources.SILENT),null!=n&&this.quill.setSelection(n,Er.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return Mi(t).split("\n").reduce(((t,n,i)=>(0!==i&&t.insert("\n",{[Hr.blotName]:e}),t.insert(n))),new An);const n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Hr.className),n.innerHTML=((t,e,n)=>{if("string"==typeof t.versionString){const i=t.versionString.split(".")[0];if(parseInt(i,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value})(this.options.hljs,e,t),Ns(this.quill.scroll,n,[(t,e)=>{const n=zs.value(t);return n?e.compose((new An).retain(e.length(),{[Gs.blotName]:n})):e}],[(t,n)=>t.data.split("\n").reduce(((t,n,i)=>(0!==i&&t.insert("\n",{[Hr.blotName]:e}),t.insert(n))),n)],new WeakMap)}}Ks.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Js extends Di{static blotName="table";static tagName="TD";static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",to()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===Js.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class Ys extends _r{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const t=this.children.head.formats(),e=this.children.tail.formats(),n=this.next.children.head.formats(),i=this.next.children.tail.formats();return t.table===e.table&&t.table===n.table&&t.table===i.table}return!1}optimize(t){super.optimize(t),this.children.forEach((t=>{if(null==t.next)return;const e=t.formats(),n=t.next.formats();if(e.table!==n.table){const e=this.splitAfter(t);e&&e.optimize(),this.prev&&this.prev.optimize()}}))}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Xs extends _r{static blotName="table-body";static tagName="TBODY"}class Qs extends _r{static blotName="table-container";static tagName="TABLE";balanceCells(){const t=this.descendants(Ys),e=t.reduce(((t,e)=>Math.max(e.children.length,t)),0);t.forEach((t=>{new Array(e-t.children.length).fill(0).forEach((()=>{let e;null!=t.children.head&&(e=Js.formats(t.children.head.domNode));const n=this.scroll.create(Js.blotName,e);t.appendChild(n),n.optimize()}))}))}cells(t){return this.rows().map((e=>e.children.at(t)))}deleteColumn(t){const[e]=this.descendant(Xs);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const n=e.children.at(t);null!=n&&n.remove()}))}insertColumn(t){const[e]=this.descendant(Xs);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const n=e.children.at(t),i=Js.formats(e.children.head.domNode),r=this.scroll.create(Js.blotName,i);e.insertBefore(r,n)}))}insertRow(t){const[e]=this.descendant(Xs);if(null==e||null==e.children.head)return;const n=to(),i=this.scroll.create(Ys.blotName);e.children.head.children.forEach((()=>{const t=this.scroll.create(Js.blotName,n);i.appendChild(t)}));const r=e.children.at(t);e.insertBefore(i,r)}rows(){const t=this.children.head;return null==t?[]:t.children.map((t=>t))}}function to(){return`row-${Math.random().toString(36).slice(2,6)}`}Qs.allowedChildren=[Xs],Xs.requiredContainer=Qs,Xs.allowedChildren=[Ys],Ys.requiredContainer=Xs,Ys.allowedChildren=[Js],Js.requiredContainer=Ys;const eo=Ji("quill:toolbar");class no extends ur{constructor(t,e){if(super(t,e),Array.isArray(this.options.container)){const e=document.createElement("div");e.setAttribute("role","toolbar"),function(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((e=>{const n=document.createElement("span");n.classList.add("ql-formats"),e.forEach((t=>{if("string"==typeof t)io(n,t);else{const e=Object.keys(t)[0],i=t[e];Array.isArray(i)?function(t,e,n){const i=document.createElement("select");i.classList.add(`ql-${e}`),n.forEach((t=>{const e=document.createElement("option");!1!==t?e.setAttribute("value",String(t)):e.setAttribute("selected","selected"),i.appendChild(e)})),t.appendChild(i)}(n,e,i):io(n,e,i)}})),t.appendChild(n)}))}(e,this.options.container),t.container?.parentNode?.insertBefore(e,t.container),this.container=e}else"string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach((t=>{const e=this.options.handlers?.[t];e&&this.addHandler(t,e)})),Array.from(this.container.querySelectorAll("button, select")).forEach((t=>{this.attach(t)})),this.quill.on(Er.events.EDITOR_CHANGE,(()=>{const[t]=this.quill.selection.getRange();this.update(t)}))):eo.error("Container required for toolbar",this.options)}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find((t=>0===t.indexOf("ql-")));if(!e)return;if(e=e.slice(3),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[e]&&null==this.quill.scroll.query(e))return void eo.warn("ignoring attaching to nonexistent format",e,t);const n="SELECT"===t.tagName?"change":"click";t.addEventListener(n,(n=>{let i;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;const e=t.options[t.selectedIndex];i=!e.hasAttribute("selected")&&(e.value||!1)}else i=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),n.preventDefault();this.quill.focus();const[r]=this.quill.selection.getRange();if(null!=this.handlers[e])this.handlers[e].call(this,i);else if(this.quill.scroll.query(e).prototype instanceof yn){if(i=prompt(`Enter ${e}`),!i)return;this.quill.updateContents((new An).retain(r.index).delete(r.length).insert({[e]:i}),Er.sources.USER)}else this.quill.format(e,i,Er.sources.USER);this.update(r)})),this.controls.push([e,t])}update(t){const e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((n=>{const[i,r]=n;if("SELECT"===r.tagName){let n=null;if(null==t)n=null;else if(null==e[i])n=r.querySelector("option[selected]");else if(!Array.isArray(e[i])){let t=e[i];"string"==typeof t&&(t=t.replace(/"/g,'\\"')),n=r.querySelector(`option[value="${t}"]`)}null==n?(r.value="",r.selectedIndex=-1):n.selected=!0}else if(null==t)r.classList.remove("ql-active"),r.setAttribute("aria-pressed","false");else if(r.hasAttribute("value")){const t=e[i],n=t===r.getAttribute("value")||null!=t&&t.toString()===r.getAttribute("value")||null==t&&!r.getAttribute("value");r.classList.toggle("ql-active",n),r.setAttribute("aria-pressed",n.toString())}else{const t=null!=e[i];r.classList.toggle("ql-active",t),r.setAttribute("aria-pressed",t.toString())}}))}}function io(t,e,n){const i=document.createElement("button");i.setAttribute("type","button"),i.classList.add(`ql-${e}`),i.setAttribute("aria-pressed","false"),null!=n?(i.value=n,i.setAttribute("aria-label",`${e}: ${n}`)):i.setAttribute("aria-label",e),t.appendChild(i)}no.DEFAULTS={},no.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(null!=t)if(0===t.length){const t=this.quill.getFormat();Object.keys(t).forEach((t=>{null!=this.quill.scroll.query(t,We.INLINE)&&this.quill.format(t,!1,Er.sources.USER)}))}else this.quill.removeFormat(t.index,t.length,Er.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();"rtl"===t&&null==e?this.quill.format("align","right",Er.sources.USER):t||"right"!==e||this.quill.format("align",!1,Er.sources.USER),this.quill.format("direction",t,Er.sources.USER)},indent(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e),i=parseInt(n.indent||0,10);if("+1"===t||"-1"===t){let e="+1"===t?1:-1;"rtl"===n.direction&&(e*=-1),this.quill.format("indent",i+e,Er.sources.USER)}},link(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Er.sources.USER)},list(t){const e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,Er.sources.USER):this.quill.format("list","unchecked",Er.sources.USER):this.quill.format("list",t,Er.sources.USER)}}};const ro='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',so={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:ro,"code-block":ro,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let oo=0;function ao(t,e){t.setAttribute(e,`${!("true"===t.getAttribute(e))}`)}const lo=class{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),ao(this.label,"aria-expanded"),ao(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const n=t.getAttribute("value");return n&&e.setAttribute("data-value",n),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",(()=>{this.selectItem(e,!0)})),e.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.selectItem(e,!0),t.preventDefault();break;case"Escape":this.escape(),t.preventDefault()}})),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${oo}`,oo+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach((e=>{const n=this.buildItem(e);t.appendChild(n),!0===e.selected&&this.selectItem(n)})),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach((t=>{this.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.container.querySelector(".ql-selected");t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);const e=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}},co=class extends lo{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((t=>{t.classList.add("ql-primary")}))}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const n=this.label.querySelector(".ql-color-label"),i=t&&t.getAttribute("data-value")||"";n&&("line"===n.tagName?n.style.stroke=i:n.style.fill=i)}},uo=class extends lo{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((t=>{t.innerHTML=e[t.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const n=t||this.defaultItem;if(null!=n){if(this.label.innerHTML===n.innerHTML)return;this.label.innerHTML=n.innerHTML}}},ho=class{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(t=>{const{overflowY:e}=getComputedStyle(t,null);return"visible"!==e&&"clip"!==e})(this.quill.root)&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${n}px`,this.root.classList.remove("ql-flip");const i=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect();let s=0;if(r.right>i.right&&(s=i.right-r.right,this.root.style.left=`${e+s}px`),r.left<i.left&&(s=i.left-r.left,this.root.style.left=`${e+s}px`),r.bottom>i.bottom){const e=r.bottom-r.top,i=t.bottom-t.top+e;this.root.style.top=n-i+"px",this.root.classList.add("ql-flip")}return s}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}},po=[!1,"center","right","justify"],fo=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],go=[!1,"serif","monospace"],mo=["1","2","3",!1],vo=["small",!1,"large","huge"];class bo extends mr{constructor(t,e){super(t,e);const n=e=>{document.body.contains(t.root)?(null==this.tooltip||this.tooltip.root.contains(e.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((t=>{t.container.contains(e.target)||t.close()}))):document.body.removeEventListener("click",n)};t.emitter.listenDOM("click",document.body,n)}addModule(t){const e=super.addModule(t);return"toolbar"===t&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach((t=>{(t.getAttribute("class")||"").split(/\s+/).forEach((n=>{if(n.startsWith("ql-")&&(n=n.slice(3),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"==typeof e[n])t.innerHTML=e[n];else{const i=t.value||"";null!=i&&e[n][i]&&(t.innerHTML=e[n][i])}}))}))}buildPickers(t,e){this.pickers=Array.from(t).map((t=>{if(t.classList.contains("ql-align")&&(null==t.querySelector("option")&&wo(t,po),"object"==typeof e.align))return new uo(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){const n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&wo(t,fo,"background"===n?"#ffffff":"#000000"),new co(t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?wo(t,go):t.classList.contains("ql-header")?wo(t,mo):t.classList.contains("ql-size")&&wo(t,vo)),new lo(t)})),this.quill.on(Xi.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((t=>{t.update()}))}))}}bo.DEFAULTS=Ge({},mr.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",(()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""})),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class yo extends ho{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(t=>{"Enter"===t.key?(this.save(),t.preventDefault()):"Escape"===t.key&&(this.cancel(),t.preventDefault())}))}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const n=this.quill.getBounds(this.quill.selection.savedRange);null!=n&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Xi.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Xi.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=function(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`:(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`:t}(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(null!=e){const n=e.index+e.length;this.quill.insertEmbed(n,this.root.getAttribute("data-mode"),t,Xi.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(n+1," ",Xi.sources.USER),this.quill.setSelection(n+2,Xi.sources.USER)}break}}this.textbox.value="",this.hide()}}function wo(t,e){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((e=>{const i=document.createElement("option");e===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(e)),t.appendChild(i)}))}const xo=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Co extends yo{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(Xi.events.EDITOR_CHANGE,((t,e,n,i)=>{if(t===Xi.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&i===Xi.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const t=this.quill.getLines(e.index,e.length);if(1===t.length){const t=this.quill.getBounds(e);null!=t&&this.position(t)}else{const n=t[t.length-1],i=this.quill.getIndex(n),r=Math.min(n.length()-1,e.index+e.length-i),s=this.quill.getBounds(new tr(i,r));null!=s&&this.position(s)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()}))}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")})),this.quill.on(Xi.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(null!=t){const e=this.quill.getBounds(t);null!=e&&this.position(e)}}),1)}))}cancel(){this.show()}position(t){const e=super.position(t),n=this.root.querySelector(".ql-tooltip-arrow");return n.style.marginLeft="",0!==e&&(n.style.marginLeft=-1*e-n.offsetWidth/2+"px"),e}}class Eo extends bo{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=xo),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new Co(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),so),this.buildPickers(t.container.querySelectorAll("select"),so))}}Eo.DEFAULTS=Ge({},bo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Er.sources.USER)}}}}});const To=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Ao extends yo{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",(t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(t=>{if(null!=this.linkRange){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Xi.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()})),this.quill.on(Xi.events.SELECTION_CHANGE,((t,e,n)=>{if(null!=t){if(0===t.length&&n===Xi.sources.USER){const[e,n]=this.quill.scroll.descendant(Us,t.index);if(null!=e){this.linkRange=new tr(t.index-n,e.length());const i=Us.formats(e.domNode);this.preview.textContent=i,this.preview.setAttribute("href",i),this.show();const r=this.quill.getBounds(this.linkRange);return void(null!=r&&this.position(r))}}else delete this.linkRange;this.hide()}}))}show(){super.show(),this.root.removeAttribute("data-mode")}}class No extends bo{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=To),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),so),this.buildPickers(t.container.querySelectorAll("select"),so),this.tooltip=new Ao(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},((e,n)=>{t.handlers.link.call(t,!n.format.link)})))}}No.DEFAULTS=Ge({},bo.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const t=this.quill.getSelection();if(null==t||0===t.length)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e=`mailto:${e}`);const{tooltip:n}=this.quill.theme;n.edit("link",e)}else this.quill.format("link",!1,Er.sources.USER)}}}}});const So=No;Ms.register({"attributors/attribute/direction":Zr,"attributors/class/align":qr,"attributors/class/background":Ur,"attributors/class/color":$r,"attributors/class/direction":Wr,"attributors/class/font":Yr,"attributors/class/size":Qr,"attributors/style/align":Br,"attributors/style/background":Vr,"attributors/style/color":Rr,"attributors/style/direction":Kr,"attributors/style/font":Xr,"attributors/style/size":ts},!0),Ms.register({"formats/align":qr,"formats/direction":Wr,"formats/indent":Bs,"formats/background":Vr,"formats/color":Rr,"formats/font":Yr,"formats/size":Qr,"formats/blockquote":class extends Di{static blotName="blockquote";static tagName="blockquote"},"formats/code-block":Hr,"formats/header":class extends Di{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}},"formats/list":$s,"formats/bold":Rs,"formats/code":zr,"formats/italic":class extends Rs{static blotName="italic";static tagName=["EM","I"]},"formats/link":Us,"formats/script":class extends Bi{static blotName="script";static tagName=["SUB","SUP"];static create(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):super.create(t)}static formats(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}},"formats/strike":class extends Rs{static blotName="strike";static tagName=["S","STRIKE"]},"formats/underline":class extends Bi{static blotName="underline";static tagName="U"},"formats/formula":class extends pr{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return"string"==typeof t&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}},"formats/image":class extends yn{static blotName="image";static tagName="IMG";static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return Fs.reduce(((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e)),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return Vs(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){Fs.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},"formats/video":class extends $i{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return Hs.reduce(((e,n)=>(t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e)),{})}static sanitize(t){return Us.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){Hs.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}},"modules/syntax":Ks,"modules/table":class extends ur{static register(){Er.register(Js),Er.register(Ys),Er.register(Xs),Er.register(Qs)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Qs).forEach((t=>{t.balanceCells()}))}deleteColumn(){const[t,,e]=this.getTable();null!=e&&(t.deleteColumn(e.cellOffset()),this.quill.update(Er.sources.USER))}deleteRow(){const[,t]=this.getTable();null!=t&&(t.remove(),this.quill.update(Er.sources.USER))}deleteTable(){const[t]=this.getTable();if(null==t)return;const e=t.offset();t.remove(),this.quill.update(Er.sources.USER),this.quill.setSelection(e,Er.sources.SILENT)}getTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];const[e,n]=this.quill.getLine(t.index);if(null==e||e.statics.blotName!==Js.blotName)return[null,null,null,-1];const i=e.parent;return[i.parent.parent,i,e,n]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[n,i,r]=this.getTable(e);if(null==r)return;const s=r.cellOffset();n.insertColumn(s+t),this.quill.update(Er.sources.USER);let o=i.rowOffset();0===t&&(o+=1),this.quill.setSelection(e.index+o,e.length,Er.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[n,i,r]=this.getTable(e);if(null==r)return;const s=i.rowOffset();n.insertRow(s+t),this.quill.update(Er.sources.USER),t>0?this.quill.setSelection(e,Er.sources.SILENT):this.quill.setSelection(e.index+i.children.length,e.length,Er.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const n=this.quill.getSelection();if(null==n)return;const i=new Array(t).fill(0).reduce((t=>{const n=new Array(e).fill("\n").join("");return t.insert(n,{table:to()})}),(new An).retain(n.index));this.quill.updateContents(i,Er.sources.USER),this.quill.setSelection(n.index,Er.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Er.events.SCROLL_OPTIMIZE,(t=>{t.some((t=>!!["TD","TR","TBODY","TABLE"].includes(t.target.tagName)&&(this.quill.once(Er.events.TEXT_CHANGE,((t,e,n)=>{n===Er.sources.USER&&this.balanceTables()})),!0)))}))}},"modules/toolbar":no,"themes/bubble":Eo,"themes/snow":So,"ui/icons":so,"ui/picker":lo,"ui/icon-picker":uo,"ui/color-picker":co,"ui/tooltip":ho},!0);const Lo=Ms;var Io=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class _o{constructor(t,e){this.editor=t,this.page=e,this.toolBoxService=new o,this.contentMapper=new x(this.page.PageId)}saveContentDescription(t){"Location"===this.page.PageName?this.saveLocationContent(t):"Reception"===this.page.PageName?this.saveReceptionContent(t):this.saveContentPageInfo(t)}saveContentPageInfo(t){return Io(this,void 0,void 0,(function*(){const e={ProductServiceId:this.page.PageId,ProductServiceDescription:t};if(yield this.toolBoxService.updateDescription(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,t)}}))}saveLocationContent(t){return Io(this,void 0,void 0,(function*(){const e={LocationDescription:t,LocationImageBase64:"",ReceptionDescription:"",ReceptionImageBase64:""};if(yield this.toolBoxService.updateLocationInfo(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,t)}}))}saveReceptionContent(t){return Io(this,void 0,void 0,(function*(){const e={LocationDescription:"",LocationImageBase64:"",ReceptionDescription:t,ReceptionImageBase64:""};if(yield this.toolBoxService.updateLocationInfo(e)){const e=this.editor.Components.getWrapper().find("#contentDescription")[0];e&&this.updateMapper(e,t)}}))}updateMapper(t,e){const n=t.parent();t.replaceWith(`<div ${p} id="contentDescription">${e}</div>`),this.contentMapper.updateContentDescription(n.getId(),e)}updateContentImage(t){"Reception"===this.page.PageName||"Location"===this.page.PageName?this.updateLocationImage(t):this.updateServiceContentImage(t)}updateCtaButtonImage(t){const e=globalThis.ctaContainerId,n=this.editor.Components.getWrapper().find(`#${e}`)[0];if(n){const i=n.find("img")[0],r=n.find("svg")[0];if(i){i.setAttributes({src:t,alt:"cta Image"});const n=`\n                    <svg ${p} xmlns="http://www.w3.org/2000/svg" id="Component_57_1" data-name="Component 57 – 1" width="22" height="22" viewBox="0 0 33 33">\n                        <g ${p} id="Ellipse_532" data-name="Ellipse 532" fill="#fff" stroke="#5068a8" stroke-width="2">\n                        <circle ${p} cx="16.5" cy="16.5" r="16.5" stroke="none"/>\n                        <circle ${p} cx="16.5" cy="16.5" r="16" fill="none"/>\n                        </g>\n                        <path ${p} id="Icon_feather-edit-2" data-name="Icon feather-edit-2" d="M12.834,3.8a1.854,1.854,0,0,1,2.622,2.622L6.606,15.274,3,16.257l.983-3.606Z" transform="translate(7 6.742)" fill="#5068a8" stroke="#5068a8" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>\n                    </svg>\n                    `;r.replaceWith(n),this.contentMapper.updateContentButtonType(e,"Image",t)}}}updateServiceContentImage(t){return Io(this,void 0,void 0,(function*(){try{const e=yield y(t),n={ProductServiceId:this.page.PageId,ProductServiceDescription:"",ProductServiceImageBase64:e};if(yield this.toolBoxService.updateContentImage(n)){const e=this.editor.Components.getWrapper().find("#product-service-image")[0];e&&(e.setAttributes({src:t,alt:`${this.page.PageName} Image`}),this.contentMapper.updateContentImage(e.parent().getId(),t))}}catch(t){console.error("Error:",t)}}))}updateLocationImage(t){return Io(this,void 0,void 0,(function*(){try{const e=yield y(t);let n;if("Location"===this.page.PageName?n={LocationDescription:"",LocationImageBase64:e,ReceptionDescription:"",ReceptionImageBase64:""}:"Reception"===this.page.PageName&&(n={LocationDescription:"",LocationImageBase64:"",ReceptionDescription:"",ReceptionImageBase64:e}),yield this.toolBoxService.updateLocationInfo(n)){const e=this.editor.Components.getWrapper().find("#product-service-image")[0];e&&(e.setAttributes({src:t,alt:`${this.page.PageName} Image`}),this.contentMapper.updateContentImage(e.parent().getId(),t))}}catch(t){console.error("Error:",t)}}))}deleteContentImage(){return Io(this,void 0,void 0,(function*(){try{const t={ProductServiceId:this.page.PageId};if(yield this.toolBoxService.deleteContentImage(t)){const t=this.editor.Components.getWrapper().find("#product-service-image")[0];if(t){const e=t.parent();e&&e.remove()}}}catch(t){console.error("Error deleting media:",t)}}))}}class Oo{constructor(t,e){this.tileAttributes=e,this.selectedComponent=t,this.themeManager=new I}setTileAttributes(){this.setBgColorProperties(),this.setOpacityProperties(),this.setTitleStyleProperties(),this.setTileActionProperties(),this.setActionProperties()}setBgColorProperties(){var t;const e=document.getElementById("theme-color-palette"),n=function(t){if(!t)return"";const e=t.match(/\d+/g);return e&&3===e.length?`#${e.map((t=>Number(t).toString(16).padStart(2,"0"))).join("")}`:""}(this.selectedComponent.getEl().style.backgroundColor),i=null===(t=this.selectedComponent.getStyle())||void 0===t?void 0:t["background-image"],r=this.themeManager.getThemeColor(this.tileAttributes.BGColor),s=null==e?void 0:e.children;for(let t=0;t<s.length;t++){const e=s[t].querySelector("input");i||n!==r||n!==e.value?e.checked=!1:e.checked=!0}}setOpacityProperties(){var t;const e=this.tileAttributes.BGImageUrl,n=this.tileAttributes.Opacity,i=null===(t=this.selectedComponent.getStyle())||void 0===t?void 0:t["background-image"];let r="";if(i&&i.startsWith("url(")&&(r=i.replace(/^url\(["']?/,"").replace(/["']?\)$/,"")),r&&e){if(r===e){const t=document.querySelector(".tile-img-section");if(t){t.querySelector("#slider-wrapper").style.display="flex",t.querySelector("#bg-opacity").value=n,t.querySelector("#valueDisplay").textContent=n+"%";const i=t.querySelector("#tile-img-container");i.style.display="block";const r=i.querySelector(".tile-img-thumbnail");r&&(r.src=e),this.selectedComponent.addStyle({"background-color":`rgba(0, 0, 0, ${n/100})`})}}}else{const t=document.querySelector("#slider-wrapper"),e=document.querySelector("#tile-img-container");t.style.display="none",e.style.display="none"}}setTitleStyleProperties(){const t=document.querySelector("#tile-title"),e=this.tileAttributes.Text;t.value=e;const n=this.tileAttributes.Color,i=document.querySelector("#text-color-palette"),r=null==i?void 0:i.querySelectorAll("input");null==r||r.forEach((t=>{t.value===n?t.checked=!0:t.checked=!1}))}setTileActionProperties(){const t=this.tileAttributes.Align,e=document.querySelector(".text-alignment"),n=null==e?void 0:e.querySelectorAll("input");null==n||n.forEach((e=>{e.value===t?e.checked=!0:e.checked=!1}))}setActionProperties(){var t,e;const n=null===(t=this.tileAttributes.Action)||void 0===t?void 0:t.ObjectType,i=null===(e=this.tileAttributes)||void 0===e?void 0:e.Text,r=document.querySelector(".tb-dropdown-header").querySelector("#sidebar_select_action_label");r&&(r.innerText=n?`${n.length>10?n.substring(0,14)+"...":n}, ${i.length>10?i.substring(0,14)+"...":i}`:"Select Action")}}class ko{constructor(t,e,n){this.container=document.createElement("div"),this.message=t,this.title=e,this.toolboxService=new o,this.onConfirmCallback=n||(()=>{}),this.init()}init(){this.container.classList.add("popup-modal"),this.container.style.display="flex";const t=document.createElement("div");t.classList.add("popup");const e=document.createElement("div");e.classList.add("popup-header");const n=document.createElement("span");n.innerText=this.title;const i=document.createElement("button");i.classList.add("close"),i.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 21 21">\n                <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',i.addEventListener("click",(()=>{this.close()})),e.appendChild(n),e.appendChild(i);const r=document.createElement("hr"),s=document.createElement("div");s.classList.add("popup-body"),s.id="confirmation_modal_message",s.innerText=this.message;const o=document.createElement("div");o.classList.add("popup-footer");const a=document.createElement("button");a.className="tb-btn tb-btn-outline",a.id="cancel_confirmation",a.innerText="Cancel",a.addEventListener("click",(()=>{this.close()}));const l=document.createElement("button");l.className="tb-btn tb-btn-primary",l.id="confirm_action",l.innerText="Confirm",l.addEventListener("click",(t=>{t.preventDefault(),this.onConfirmCallback(),this.close()})),o.appendChild(l),o.appendChild(a),t.appendChild(e),t.appendChild(r),t.appendChild(s),t.appendChild(o),this.container.appendChild(t)}close(){this.container.remove()}render(t){t.appendChild(this.container)}}var jo=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class Po{constructor(t,e){this.mediaFile=t,this.type=e,this.toolboxService=new o,this.container=document.createElement("div"),this.init()}init(){this.container.className="file-item valid",this.container.id=this.mediaFile.MediaId;const t=document.createElement("img");t.src=this.mediaFile.MediaUrl,t.alt=this.mediaFile.MediaName,t.className="preview-image";const e=document.createElement("div");e.className="file-info";const n=document.createElement("div");n.className="file-name",n.innerText=this.mediaFile.MediaName;const i=document.createElement("div");i.className="file-size",i.innerText=this.formatBytes(this.mediaFile.MediaSize),e.appendChild(n),e.appendChild(i);const r=document.createElement("span");r.className="status-icon",r.style.color="green",this.setupItemClickEvent(r);const s=document.createElement("span");s.className="delete-media fa-regular fa-trash-can",s.title="Delete image",s.addEventListener("click",(t=>{t.stopPropagation(),this.deleteEvent()})),this.container.appendChild(t),this.container.appendChild(e),this.container.appendChild(r),this.container.appendChild(s)}formatBytes(t){const e=["Bytes","KB","MB","GB","TB"];if(0===t)return"0 Byte";const n=parseInt(Math.floor(Math.log(t)/Math.log(1024)).toString());return 0===n?t+" "+e[n]:(t/Math.pow(1024,n)).toFixed(1)+" "+e[n]}setupItemClickEvent(t){this.container.addEventListener("click",(()=>{document.querySelectorAll(".file-item").forEach((t=>{t.classList.remove("selected");const e=t.querySelector(".status-icon");e&&(e.innerHTML=t.classList.contains("invalid")?"⚠":"")})),this.container.classList.contains("selected")?t.innerHTML="":t.innerHTML='\n                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="13.423" viewBox="0 0 18 13.423">\n                        <path id="Icon_awesome-check" data-name="Icon awesome-check" d="M6.114,17.736l-5.85-5.85a.9.9,0,0,1,0-1.273L1.536,9.341a.9.9,0,0,1,1.273,0L6.75,13.282l8.441-8.441a.9.9,0,0,1,1.273,0l1.273,1.273a.9.9,0,0,1,0,1.273L7.386,17.736A.9.9,0,0,1,6.114,17.736Z" transform="translate(0 -4.577)" fill="#3a9341"></path>\n                    </svg>\n                ',this.container.classList.toggle("selected"),this.setupModalActions()}))}setupModalActions(){var t,e;const n=document.querySelector(".modal-actions");if(!n)return;n.style.display="flex";const i=n.querySelector("#cancel-modal"),r=n.querySelector("#save-modal");if(!i||!r)return;const s=i.cloneNode(!0),o=r.cloneNode(!0);null===(t=i.parentNode)||void 0===t||t.replaceChild(s,i),null===(e=r.parentNode)||void 0===e||e.replaceChild(o,r);const a=document.querySelector(".tb-modal");a&&(s.addEventListener("click",(()=>{a.style.display="none",a.remove()})),o.addEventListener("click",(()=>{"tile"===this.type?this.addImageToTile():"content"===this.type?this.addImageToContentPage():"cta"===this.type&&this.updateCtaButtonImage(),a.style.display="none",a.remove()})))}addImageToTile(){const t=globalThis.selectedComponent;if(t)try{const e=encodeURI(this.mediaFile.MediaUrl);t.addStyle({"background-image":`url(${e})`,"background-color":"transparent","background-size":"cover","background-position":"center","background-blend-mode":"overlay"}),t.getEl().style.backgroundColor="transparent",globalThis.tileMapper.updateTile(t.parent().getId(),"BGImageUrl",e),globalThis.tileMapper.updateTile(t.parent().getId(),"Opacity","0"),globalThis.tileMapper.updateTile(t.parent().getId(),"BGColor","transparent");const n=t.parent(),i=n.parent(),r=globalThis.tileMapper.getTile(i.getId(),n.getId());t&&r&&new Oo(t,r).setTileAttributes()}catch(t){console.error("Error adding image to tile:",t)}}addImageToContentPage(){return jo(this,void 0,void 0,(function*(){const t=encodeURI(this.mediaFile.MediaUrl),e=globalThis.activeEditor,n=globalThis.pageData;new _o(e,n).updateContentImage(t)}))}updateCtaButtonImage(){return jo(this,void 0,void 0,(function*(){const t=encodeURI(this.mediaFile.MediaUrl),e=globalThis.activeEditor,n=globalThis.pageData;new _o(e,n).updateCtaButtonImage(t)}))}deleteEvent(){new ko("Are you sure you want to delete this media file?","Delete media",(()=>jo(this,void 0,void 0,(function*(){try{yield this.toolboxService.deleteMedia(this.mediaFile.MediaId),this.toolboxService.media=this.toolboxService.media.filter((t=>t.MediaId!==this.mediaFile.MediaId));const t=document.getElementById(this.mediaFile.MediaId);t&&t.remove(),0===this.toolboxService.media.length&&(document.querySelector(".modal-actions").style.display="none")}catch(t){console.error("Error deleting media:",t)}})))).render(document.body)}getElement(){return this.container}render(t){t.appendChild(this.container)}}var Mo=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class qo{constructor(t){this.fileListElement=null,this.progressIntervals={},this.type=t,this.modalContent=document.createElement("div"),this.toolboxService=new o,this.init()}init(){this.modalContent.className="tb-modal-content";const t=document.createElement("div");t.className="tb-modal-header";const e=document.createElement("h2");e.innerText="Upload";const n=document.createElement("span");n.className="close",n.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 21 21">\n              <path id="Icon_material-close" data-name="Icon material-close" d="M28.5,9.615,26.385,7.5,18,15.885,9.615,7.5,7.5,9.615,15.885,18,7.5,26.385,9.615,28.5,18,20.115,26.385,28.5,28.5,26.385,20.115,18Z" transform="translate(-7.5 -7.5)" fill="#6a747f" opacity="0.54"></path>\n            </svg>\n        ',n.addEventListener("click",(t=>{t.preventDefault();const e=this.modalContent.parentElement;e.style.display="none",null==e||e.remove()})),t.appendChild(e),t.appendChild(n);const i=document.createElement("div");i.className="modal-actions";const r=document.createElement("button");r.className="tb-btn tb-btn-outline",r.id="cancel-modal",r.innerText="Cancel",r.addEventListener("click",(t=>{t.preventDefault();const e=this.modalContent.parentElement;e.style.display="none",null==e||e.remove()}));const s=document.createElement("button");s.className="tb-btn tb-btn-primary",s.id="save-modal",s.innerText="Save",i.appendChild(r),i.appendChild(s),this.modalContent.appendChild(t),this.uploadArea(),this.createFileListElement(),this.loadMediaFiles(),this.modalContent.appendChild(i)}uploadArea(){const t=document.createElement("div");t.className="upload-area",t.id="uploadArea",t.innerHTML='\n        <svg xmlns="http://www.w3.org/2000/svg" width="40.999" height="28.865" viewBox="0 0 40.999 28.865">\n            <path id="Path_1040" data-name="Path 1040" d="M21.924,11.025a3.459,3.459,0,0,0-3.287,3.608,3.459,3.459,0,0,0,3.287,3.608,3.459,3.459,0,0,0,3.287-3.608A3.459,3.459,0,0,0,21.924,11.025ZM36.716,21.849l-11.5,14.432-8.218-9.02L8.044,39.89h41Z" transform="translate(-8.044 -11.025)" fill="#afadad"></path>\n          </svg>\n          <div class="upload-text">\n            <p>Drag and drop or <a href="#" id="browseLink">browse</a></p>\n        </div>\n        ',this.setupDragAndDrop(t),this.modalContent.appendChild(t)}createFileListElement(){this.fileListElement=document.createElement("div"),this.fileListElement.className="file-list",this.fileListElement.id="fileList";const t=document.createElement("div");t.className="loading-media",t.textContent="Loading media files...",this.fileListElement.appendChild(t),this.modalContent.appendChild(this.fileListElement)}loadMediaFiles(){return Mo(this,void 0,void 0,(function*(){try{const t=yield this.toolboxService.getMediaFiles();this.fileListElement&&(this.fileListElement.innerHTML="",t&&t.length>0&&t.forEach((t=>{new Po(t,this.type).render(this.fileListElement)})))}catch(t){console.error("Error loading media files:",t),this.fileListElement&&(this.fileListElement.innerHTML='<div class="error-message">Error loading media files. Please try again.</div>')}}))}setupDragAndDrop(t){return Mo(this,void 0,void 0,(function*(){const e=document.createElement("input");e.type="file",e.id="fileInput",e.multiple=!0,e.accept="image/jpeg, image/jpg, image/png",e.style.display="none",t.appendChild(e);const n=t.querySelector("#browseLink");null==n||n.addEventListener("click",(t=>{t.preventDefault(),e.click()})),t.addEventListener("click",(t=>{e.click()})),e.addEventListener("change",(()=>{e.files&&e.files.length>0&&this.handleFiles(e.files)})),t.addEventListener("dragover",(e=>{e.preventDefault(),t.classList.add("drag-over")})),t.addEventListener("dragleave",(e=>{e.preventDefault(),t.classList.remove("drag-over")})),t.addEventListener("drop",(e=>Mo(this,void 0,void 0,(function*(){var n;e.preventDefault(),t.classList.remove("drag-over"),(null===(n=e.dataTransfer)||void 0===n?void 0:n.files)&&e.dataTransfer.files.length>0&&(yield this.handleFiles(e.dataTransfer.files))}))))}))}handleFiles(t){return Mo(this,void 0,void 0,(function*(){const e=Array.from(t);for(const t of e)if(t.type.startsWith("image/"))try{const e=yield this.readFileAsDataURL(t),n=t.name.replace(/\s+/g,"-").replace(/[()]/g,""),i={MediaId:Date.now().toString(),MediaName:n,MediaUrl:e,MediaType:t.type,MediaSize:t.size};if(console.log(i),this.fileListElement&&this.displayMediaFileProgress(this.fileListElement,i),!this.validateFile(i))return;(yield this.toolboxService.uploadFile(i.MediaUrl,i.MediaName,i.MediaSize,i.MediaType)).BC_Trn_Media}catch(e){if(console.error("Error processing file:",e),this.fileListElement){const n=document.createElement("div");n.className="upload-error",n.textContent=`Error uploading ${t.name}: ${e}`,this.fileListElement.insertBefore(n,this.fileListElement.firstChild),setTimeout((()=>{n.remove()}),5e3)}}}))}displayMediaFileProgress(t,e){const n=document.createElement("div");n.className="file-item "+(this.validateFile(e)?"valid":"invalid"),n.setAttribute("data-mediaid",e.MediaId);const i=this.validateFile(e);var r;n.innerHTML=`\n              <img src="${e.MediaUrl}" alt="File thumbnail" class="preview-image">\n              <div class="file-info">\n                <div class="file-info-details">\n                  <div>\n                    <div class="file-name">${r=e.MediaName,r.split("-").slice(1).join("-")}</div>\n                    <div class="file-size">${this.formatFileSize(e.MediaSize.toString())}</div>\n                  </div>\n                  <div class="progress-text">0%</div>\n                </div>\n                <div class="progress-bar">\n                    <div class="progress" style="width: 0%"></div>\n                </div>\n                ${i?"":"<small>File is invalid. Please upload a valid file (jpg, png, jpeg and less than 2MB).</small>"}\n              </div>\n              <span class="status-icon" style="color: ${i?"green":"red"}">\n                ${i?"":"⚠"}\n              </span>\n              ${i?"":'<span style="margin-left: 10px" id="delete-invalid" class="fa-regular fa-trash-can"></span>'}\n            `,t.insertBefore(n,t.firstChild);const s=n.querySelector("#delete-invalid");s&&(s.style.cursor="pointer",s.addEventListener("click",(e=>{e.preventDefault(),t.removeChild(n)})));let o=0;const a=n.querySelector(".progress"),l=n.querySelector(".progress-text"),c=setInterval((()=>{o+=Math.floor(15*Math.random())+5,a&&(a.style.width=`${o>100?100:o}%`),l&&(l.textContent=`${o>100?100:o}%`),o>=100&&(clearInterval(c),i&&(t.removeChild(n),this.displayMediaFile(t,e)))}),300);this.progressIntervals=this.progressIntervals||{},this.progressIntervals[e.MediaId]=c}validateFile(t){const e=t.MediaSize<=2097152,n=["image/jpeg","image/jpg","image/png"].includes(t.MediaType);return e&&n}formatFileSize(t){const e=parseInt(t,10);return e<1024?e+" B":e<1048576?Math.round(e/1024)+" KB":(e/1048576).toFixed(2)+" MB"}displayMediaFile(t,e){const n=new Po(e,this.type);n.render(t),t.insertBefore(n.getElement(),t.firstChild)}destroy(){Object.values(this.progressIntervals).forEach((t=>{clearInterval(t)})),this.progressIntervals={}}readFileAsDataURL(t){return new Promise(((e,n)=>{const i=new FileReader;i.onload=()=>{i.result?e(i.result):n(new Error("FileReader did not produce a result"))},i.onerror=()=>{n(i.error)},i.readAsDataURL(t)}))}render(t){t.appendChild(this.modalContent)}}class Bo{constructor(t,e,n){this.e=t,this.editor=e,this.page=n,this.contentDataManager=new _o(this.editor,this.page),this.init()}init(){this.openContentEditModal(),this.openImageEditModal(),this.openDeleteImageModal(),this.updateCtaButtonImage()}openContentEditModal(){if(this.e.target.closest(".tb-edit-content-icon")){const t=document.createElement("div"),e=document.createElement("div");e.id="editor",e.innerHTML=`${this.getDescription()}`;const n=document.createElement("div");n.classList.add("popup-footer"),n.style.marginBottom="-12px";const i=this.createButton("submit_form","tb-btn-primary","Save"),r=this.createButton("cancel_form","tb-btn-secondary","Cancel");n.appendChild(i),n.appendChild(r),t.appendChild(e),t.appendChild(n);const s=new F({title:"Edit Content",width:"500px",body:t});s.open(),new Lo("#editor",{modules:{toolbar:[["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}]]},theme:"snow"}),i.addEventListener("click",(()=>{const t=document.querySelector("#editor .ql-editor");this.contentDataManager.saveContentDescription(t.innerHTML),s.close()})),r.addEventListener("click",(()=>{s.close()}))}}openImageEditModal(){if(this.e.target.closest(".tb-edit-image-icon")){const t=document.createElement("div");t.classList.add("tb-modal"),t.style.display="flex",new qo("content").render(t);const e=document.createElement("input");e.type="file",e.multiple=!0,e.accept="image/jpeg, image/jpg, image/png",e.id="fileInput",e.style.display="none",document.body.appendChild(t),document.body.appendChild(e)}}openDeleteImageModal(){if(this.e.target.closest(".tb-delete-image-icon")){if("Location"===this.page.PageName||"Reception"===this.page.PageName)return;new ko("Are you sure you want to delete this media file?","Delete media",(()=>{return t=this,e=void 0,i=function*(){this.contentDataManager.deleteContentImage()},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i})).render(document.body)}}updateCtaButtonImage(){const t=this.e.target.closest(".edit-cta-image");if(t){const e=t.closest(".img-button-container");globalThis.ctaContainerId=e?e.id:"";const n=document.createElement("div");n.classList.add("tb-modal"),n.style.display="flex",new qo("cta").render(n);const i=document.createElement("input");i.type="file",i.multiple=!0,i.accept="image/jpeg, image/jpg, image/png",i.id="fileInput",i.style.display="none",document.body.appendChild(n),document.body.appendChild(i)}}getDescription(){if(this.e.target.closest(".content-page-block")){const t=this.editor.Components.getWrapper().find("#contentDescription")[0];if(t)return t.getEl().innerHTML}}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}}class Do{constructor(t,e){this.selectedComponent=t,this.ctaAttributes=e,this.themeManager=new I}setctaAttributes(){this.displayButtonLayouts(),this.ctaColorAttributes()}displayButtonLayouts(){const t=document.querySelector(".cta-button-layout-container");this.selectedComponent.parent().getClasses().includes("cta-button-container")?t&&(t.style.display="flex"):t&&(t.style.display="none")}ctaColorAttributes(){const t=document.querySelector("#content-page-section");console.log("this.contentSection",t);const e=null==t?void 0:t.querySelectorAll(".color-item > input");let n=this.themeManager.getThemeCtaColor(this.ctaAttributes.CtaBGColor);null==e||e.forEach((t=>{t.value===n&&(t.checked=!0)}))}}class $o{constructor(t,e,n=5e3){this.closeTimeout=null,this.alertContainer=document.createElement("div"),this.alertContainer.className="tb-alerts-container",this.alertContainer.id="tb-alerts-container",this.alertElement=document.createElement("div"),this.alertElement.className=`tb-alert ${t}`,this.alertElement.style.display="flex",this.alertElement.style.opacity="0",this.alertElement.id=Math.random().toString(36);const i=document.createElement("div");i.className="tb-alert-header";const r=document.createElement("strong");r.textContent=t.charAt(0).toUpperCase()+t.slice(1);const s=document.createElement("span");s.className="tb-alert-close-btn",s.textContent="✖",s.addEventListener("click",(()=>this.close())),i.appendChild(r),i.appendChild(s);const o=document.createElement("p");o.textContent=e,this.alertElement.appendChild(i),this.alertElement.appendChild(o),this.alertContainer.appendChild(this.alertElement),document.body.appendChild(this.alertContainer),setTimeout((()=>this.alertElement.style.opacity="1"),50),this.closeTimeout=window.setTimeout((()=>this.close()),n)}close(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null),this.alertElement.style.opacity="0",setTimeout((()=>this.alertElement.remove()),500)}}class Ro{constructor(t){this.formField=document.createElement("div"),this.formField.className="form-field",this.formField.style.marginBottom="10px";const e=document.createElement("label");t.label&&(e.htmlFor=t.id,e.textContent=t.label);const n=document.createElement("input");n.type=t.type,n.id=t.id,n.className="tb-form-control",n.value=t.value||"",t.placeholder&&(n.placeholder=t.placeholder),t.required&&(n.required=!0);const i=document.createElement("span");i.className="error-message",i.style.cssText="\n            color: red;\n            font-size: 12px;\n            display: none;\n            margin-top: 5px;\n            font-weight: 300;\n        ",i.textContent=t.errorMessage||"Error message",t.label&&this.formField.appendChild(e),this.formField.appendChild(n),this.formField.appendChild(i)}getElement(){return this.formField}showError(t){const e=this.formField.querySelector(".error-message");e.style.display="block",t&&(e.textContent=t)}hideError(){this.formField.querySelector(".error-message").style.display="none"}}class Uo{constructor(t){this.form=document.createElement("form"),this.form.id=t,this.fields=[]}addField(t){const e=new Ro(t);return this.fields.push(e),this.form.appendChild(e.getElement()),e}render(t){t.appendChild(this.form)}getData(){const t={};return this.fields.forEach((e=>{const n=e.getElement().querySelector("input");t[n.id]=n.value})),t}}class Vo{createForm(t,e){const n=new Uo(t);return e.forEach((t=>n.addField(t))),n}createModal({title:t,form:e,onSave:n}){const i=document.createElement("div");e.render(i);const r=document.createElement("div");r.classList.add("popup-footer"),r.style.marginBottom="-12px";const s=this.createButton("submit_form","tb-btn-primary","Save"),o=this.createButton("cancel_form","tb-btn-secondary","Cancel");r.appendChild(s),r.appendChild(o);const a=document.createElement("div");a.appendChild(i),a.appendChild(r);const l=new F({title:t,width:"500px",body:a});l.open(),s.addEventListener("click",(t=>{t.preventDefault(),this.validateFields(e)&&(n(),l.close())})),o.addEventListener("click",(t=>{t.preventDefault(),l.close()}))}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}validateFields(t){let e=!0;const n=t.fields;return n.forEach((t=>t.hideError())),n.forEach((t=>{const n=t.getElement().querySelector("input"),i=n.value.trim();n.required&&""===i?(t.showError(t.errorMessage),e=!1):t.minLength&&i.length<t.minLength?(t.showError(`Must be at least ${t.minLength} characters`),e=!1):t.maxLength&&i.length>t.maxLength?(t.showError(`Cannot exceed ${t.maxLength} characters`),e=!1):t.validate&&!t.validate(i)?(t.showError(t.errorMessage),e=!1):"home"!==i.toLowerCase()&&"my care"!==i.toLowerCase()&&"my living"!==i.toLowerCase()&&"my services"!==i.toLowerCase()&&"web link"!==i.toLowerCase()&&"dynamic form"!==i.toLowerCase()||(t.showError("Field name already exists"),e=!1)})),e}isValidUrl(t){try{const e=new URL(t);return"http:"===e.protocol||"https:"===e.protocol}catch(t){return!1}}}var Fo=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class Ho{constructor(){this.appVersionManager=new S,this.toolBoxService=new o,this.formModalService=new Vo}addNewService(){}addNewContentPage(){const t=this.formModalService.createForm("conent-page-form",[{label:"Page Title",type:"text",id:"page_title",placeholder:"Enter page title",required:!0,errorMessage:"Please enter a page title",minLength:3,maxLength:50}]);this.formModalService.createModal({title:"Add New Content Page",form:t,onSave:()=>this.processContentPageData(t.getData())})}addNewMenuPage(){const t=this.formModalService.createForm("menu-page-form",[{label:"Page Title",type:"text",id:"page_title",placeholder:"Enter page title",required:!0,errorMessage:"Please enter a page title",minLength:3,maxLength:50}]);this.formModalService.createModal({title:"Add New Menu Page",form:t,onSave:()=>this.processMenuPageData(t.getData())})}handleWebLinks(){const t=this.formModalService.createForm("web-link-form",[{label:"Link Url",type:"text",id:"link_url",placeholder:"https://example.com",required:!0,errorMessage:"Please enter a valid URL",validate:this.formModalService.isValidUrl},{label:"Link Label",type:"text",id:"link_label",placeholder:"Example Link",required:!0,errorMessage:"Please enter a label for your link",minLength:2}]);this.formModalService.createModal({title:"Add Web Link",form:t,onSave:()=>this.processFormData(t.getData())})}handleDynamicForms(t){return Fo(this,void 0,void 0,(function*(){const e=globalThis.selectedComponent;if(!e)return;const n=e.find(".tile-title")[0];n&&n.components(t.PageName);const i=e.parent().getId(),r=e.parent().parent().getId(),o=(yield this.appVersionManager.getActiveVersion()).Pages.find((t=>"Dynamic Form"===t.PageName&&"DynamicForm"===t.PageType)),a=`${s}/utoolboxdynamicform.aspx?WWPFormId=${t.PageId}&WWPDynamicFormMode=DSP&DefaultFormType=&WWPFormType=0`,l=[["Text",t.PageName],["Name",t.PageName],["Action.ObjectType","Web Link"],["Action.ObjectId",null==o?void 0:o.PageId],["Action.ObjectUrl",a]];this.updateActionListDropDown("Dynamic Form",t.PageName);for(const[t,e]of l)globalThis.tileMapper.updateTile(i,t,e);const c=globalThis.tileMapper.getTile(r,i);(new Go).removeOtherEditors(),new V(null==o?void 0:o.PageId,o).init(c)}))}processMenuPageData(t){return Fo(this,void 0,void 0,(function*(){const e=yield this.appVersionManager.getActiveVersion();this.toolBoxService.createMenuPage(e.AppVersionId,t.page_title).then((t=>{this.updateActionListDropDown("Home",t.MenuPage.PageName),this.updateTileAfterPageCreation(t.MenuPage),new $o("success","Page created successfully")}))}))}processContentPageData(t){return Fo(this,void 0,void 0,(function*(){const e=yield this.appVersionManager.getActiveVersion();this.toolBoxService.createContentPage(e.AppVersionId,t.page_title).then((t=>{this.updateTileAfterPageCreation(t.ContentPage),new $o("success","Page created successfully")}))}))}updateActionListDropDown(t,e){var n;const i=document.getElementById("dropdownMenu");null===(n=i.querySelector("details"))||void 0===n||n.removeAttribute("open"),i.style.display="none";const r=document.querySelector(".tb-dropdown-header"),s=r.querySelector("#sidebar_select_action_label"),o=r.querySelector("i");o.classList.remove("fa-angle-up"),o.classList.add("fa-angle-down"),s.innerText=`${t.length>14?t.substring(0,14)+"...":t}, ${e.length>14?e.substring(0,14)+"...":e}`}updateTileAfterPageCreation(t){return Fo(this,void 0,void 0,(function*(){const e=globalThis.selectedComponent;if(!e)return;const n=e.find(".tile-title")[0];n&&n.components(t.PageName);const i=e.parent().getId(),r=e.parent().parent().getId(),s=globalThis.tileMapper.getTile(r,i),o=[["Text",t.PageName],["Name",t.PageName],["Action.ObjectType","Page"],["Action.ObjectId",t.PageId]];for(const[t,e]of o)globalThis.tileMapper.updateTile(i,t,e);const a=yield this.appVersionManager.getActiveVersion();this.attachPage(t,a,s)}))}attachPage(t,e,n){(new Go).removeOtherEditors(),new V(t.PageId,t).init(n)}processFormData(t){return Fo(this,void 0,void 0,(function*(){const e=globalThis.selectedComponent;if(!e)return;const n=e.find(".tile-title")[0];n&&n.components(t.link_label);const i=e.parent().getId(),r=e.parent().parent().getId(),s=(yield this.appVersionManager.getActiveVersion()).Pages.find((t=>"Web Link"===t.PageName&&"WebLink"===t.PageType)),o=[["Text",t.link_label],["Name",t.link_label],["Action.ObjectType","Web Link"],["Action.ObjectId",null==s?void 0:s.PageId],["Action.ObjectUrl",t.link_url]];for(const[t,e]of o)globalThis.tileMapper.updateTile(i,t,e);const a=globalThis.tileMapper.getTile(r,i);(new Go).removeOtherEditors(),new V(null==s?void 0:s.PageId,s).init(a)}))}}var zo=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class Go{constructor(){this.appVersionManager=new S,this.toolboxService=new o}attachNewServiceToTile(t){return zo(this,void 0,void 0,(function*(){const e=(yield this.toolboxService.getServices()).find((e=>e.ProductServiceId==t));if(e){const n={PageId:t,PageName:e.ProductServiceName,TileName:e.ProductServiceTileName};this.attachToTile(n,"Service/Product Page")}}))}attachToTile(t,e){return zo(this,void 0,void 0,(function*(){const n=globalThis.selectedComponent;if(!n)return;const i=n.find(".tile-title")[0];i&&i.components(t.PageName);const r=n.parent().getId(),s=n.parent().parent().getId();if(globalThis.currentPageId===t.PageId)return void new $o("error","Page cannot be linked to itself");const o=[["Text",t.PageName],["Name",t.PageName],["Action.ObjectType",`${e}`],["Action.ObjectId",t.PageId]];for(const[t,e]of o)globalThis.tileMapper.updateTile(r,t,e);const a=globalThis.tileMapper.getTile(s,r);(new Ho).updateActionListDropDown("Dynamic Form",t.PageName);const l=yield this.appVersionManager.getActiveVersion();this.attachPage(t,l,a),n&&a&&new Oo(n,a).setTileAttributes()}))}attachPage(t,e,n){const i=t.PageId,r=(null==e?void 0:e.Pages.find((t=>t.PageId===i)))||null;this.removeOtherEditors(),r?new V(t.PageId,r).init(n):this.toolboxService.createServicePage(e.AppVersionId,i).then((t=>{new V(t.ContentPage.PageId,t.ContentPage).init(n)}))}removeOtherEditors(){const t=globalThis.frameId;document.querySelectorAll(".mobile-frame").forEach((e=>{if(e.id.includes(t)){let t=e.nextElementSibling;for(;t;){const e=t;t=t.nextElementSibling,e&&(e.remove(),(new Xo).activateNavigators())}}}))}updateActionProperty(t,e){const n=document.querySelector("#sidebar_select_action_label");n&&(n.innerText=`${t}, ${e.length>10?e.substring(0,10)+"...":e}`)}}class Zo{constructor(t,e){this.toolboxService=t,this.appVersionManager=e,this.pageAttacher=new Go;const n=this.render(),i=document.getElementById("child-container");null==i||i.appendChild(n)}render(){const t=document.createElement("div");t.classList.add("menu-container");const n=document.createElement("button");n.classList.add("menu-button"),n.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="24.053" height="26.783" viewBox="0 0 24.053 26.783">                 <path class="icon-path" d="M2.672.038a2.041,2.041,0,0,0-1.4.408,2.87,2.87,0,0,0-1.154,1.6l-.094.3V22.761l.093.32a2.724,2.724,0,0,0,.7,1.207,2.65,2.65,0,0,0,1.04.706l.288.117H7.692c5.545,0,5.555,0,5.629.083a4.979,4.979,0,0,0,.418.337A6.472,6.472,0,0,0,16.6,26.738a8.81,8.81,0,0,0,2,0,6.5,6.5,0,0,0,5.409-5.425,7.669,7.669,0,0,0-.023-2.078,6.5,6.5,0,0,0-4.323-5.046,5.3,5.3,0,0,0-.516-.152L19,14.012l.012-2.195c.01-1.66,0-2.305-.042-2.651l-.054-.457-.445-.487Q16.888,6.5,15.289,4.8c-3.2-3.414-4.34-4.6-4.541-4.714A23.429,23.429,0,0,0,6.971.016q-2.15-.009-4.3.022m6.82,4.753a14.651,14.651,0,0,0,.1,3.184,2.955,2.955,0,0,0,1.551,1.847c.5.24.518.241,4.914.258l1.135.005V13.85l-.371.051a6.48,6.48,0,0,0-5.495,8.034,6.926,6.926,0,0,0,.4,1.126l.083.162H2.345l-.168-.144a1.487,1.487,0,0,1-.269-.315l-.1-.171L1.8,12.612l-.01-9.98L1.9,2.4a.736.736,0,0,1,.626-.476c.123-.013,1.737-.026,3.585-.03l3.361-.006.018,2.9m3.87.641c.885.935,1.82,1.926,2.078,2.2l.468.5-.531.032c-.292.018-1.155.024-1.917.014-1.6-.022-1.718-.041-1.925-.3a1.537,1.537,0,0,1-.171-.27c-.056-.133-.1-3.62-.053-4.071l.028-.261.206.227c.114.125.932.992,1.817,1.927m5.066,9.959a5.047,5.047,0,0,1,3.626,2.649,4.5,4.5,0,0,1,.545,2.29,4.806,4.806,0,0,1-.843,2.818,6.309,6.309,0,0,1-1.393,1.374,5.022,5.022,0,0,1-7.053-1.6,5.09,5.09,0,0,1-.467-4.129A5.21,5.21,0,0,1,14.1,16.765a4.988,4.988,0,0,1,4.328-1.374m-.972,1.85a.638.638,0,0,0-.241.158l-.119.124-.012,1.223-.012,1.223H15.9c-1.1,0-1.182,0-1.305.08a.528.528,0,0,0-.217.721c.146.272.206.283,1.523.283h1.176v1.191c0,1.124,0,1.2.081,1.322a.539.539,0,0,0,.913-.01c.063-.1.072-.242.083-1.305l.012-1.2H19.33c1.263,0,1.307-.006,1.479-.225a.6.6,0,0,0,0-.611c-.143-.234-.229-.248-1.5-.248H18.161V18.854a11.308,11.308,0,0,0-.041-1.265.549.549,0,0,0-.663-.348" fill="#6e7276" fill-rule="evenodd"/>             </svg>';const i=document.createElement("div");i.classList.add("menu"),i.id="dropdownMenu";const r=document.createElement("div");r.classList.add("menu-item"),r.textContent="Add menu page",r.addEventListener("click",(()=>{this.createNewPage("Untitled")}));const s=document.createElement("div");return s.classList.add("menu-item"),s.textContent="Add content page",s.addEventListener("click",(()=>{e.getInstance().addServiceButtonEvent()})),i.appendChild(r),i.appendChild(s),n.addEventListener("click",(t=>{t.preventDefault()})),t.appendChild(n),t.appendChild(i),n.addEventListener("mouseover",(()=>{var e;const n=t.getBoundingClientRect();console.log(n),console.log(t.offsetWidth);const r=(null===(e=null==t?void 0:t.parentNode)||void 0===e?void 0:e.children)||[];console.log(r.length),r.length>2?(i.style.top="60px",i.style.left="-100%"):(i.style.top="-10px",i.style.left="100%")})),t}createNewPage(t){return e=this,n=void 0,r=function*(){const e=yield this.appVersionManager.getActiveVersion();this.toolboxService.createMenuPage(e.AppVersionId,t).then((t=>{if(t.error.message)new $o("error",t.error.message);else{const e={PageId:t.MenuPage.PageId,PageName:t.MenuPage.PageName,TileName:t.MenuPage.PageName};this.pageAttacher.attachToTile(e,"Menu")}}))},new((i=void 0)||(i=Promise))((function(t,s){function o(t){try{l(r.next(t))}catch(t){s(t)}}function a(t){try{l(r.throw(t))}catch(t){s(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof i?n:new i((function(t){t(n)}))).then(o,a)}l((r=r.apply(e,n||[])).next())}));var e,n,i,r}}class Wo{constructor(t){this.pageId=t}addFreshRow(t,e){var n,i;const r=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),s={Id:t,Tiles:[{Id:e,Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]};null===(i=null===(n=r.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i||i.push(s),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(r))}addTile(t,e){var n,i;const r={Id:e,Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},s=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),o=null===(i=null===(n=s.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i?void 0:i.find((e=>e.Id===t));o&&(o.Tiles.push(r),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(s)))}removeTile(t,e){var n,i;const r=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),s=r.PageMenuStructure.Rows.find((t=>String(t.Id)===String(e)));s&&(s.Tiles=s.Tiles.filter((e=>e.Id!==t)),0===s.Tiles.length&&(r.PageMenuStructure.Rows=null===(i=null===(n=r.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i?void 0:i.filter((t=>t.Id!==s.Id))),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(r)))}updateTile2(t){console.log(t.getEl()),console.log(t.getStyle())}updateTile(t,e,n){var i,r;const s=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");null===(r=null===(i=null==s?void 0:s.PageMenuStructure)||void 0===i?void 0:i.Rows)||void 0===r||r.forEach((i=>{i.Tiles.forEach((i=>{if(i.Id===t)if(e.includes(".")){const t=e.split(".");let r=i;for(let e=0;e<t.length-1;e++)r=r[t[e]];r[t[t.length-1]]=n}else i[e]=n}))})),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(s))}getTile(t,e){var n,i;const r=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}");if(t){const s=null===(i=null===(n=null==r?void 0:r.PageMenuStructure)||void 0===n?void 0:n.Rows)||void 0===i?void 0:i.find((e=>e.Id===t));if(s)return s.Tiles.find((t=>t.Id===e))||null}return null}findPageByTileId(t,e){var n;for(const i of t)for(const t of null===(n=null==i?void 0:i.PageMenuStructure)||void 0===n?void 0:n.Rows)for(const n of t.Tiles)if(n.Id===e)return i.PageId;return null}moveTile(t,e,n,i){var r,s,o,a,l,c,d,u;const h=JSON.parse(localStorage.getItem(`data-${this.pageId}`)||"{}"),p=null===(r=null==h?void 0:h.PageMenuStructure)||void 0===r?void 0:r.Rows.find((t=>t.Id===e));if(!p)return;const f=null===(s=null==p?void 0:p.Tiles)||void 0===s?void 0:s.findIndex((e=>e.Id===t));if(-1===f)return;const[g]=null===(o=null==p?void 0:p.Tiles)||void 0===o?void 0:o.splice(f,1),m=null===(l=null===(a=h.PageMenuStructure)||void 0===a?void 0:a.Rows)||void 0===l?void 0:l.find((t=>t.Id===n));m?(m.Tiles.splice(i,0,g),3===(null===(c=null==m?void 0:m.Tiles)||void 0===c?void 0:c.length)&&(null==m||m.Tiles.forEach((t=>{t.Align="center"}))),0===(null===(d=null==p?void 0:p.Tiles)||void 0===d?void 0:d.length)&&(h.PageMenuStructure.Rows=null===(u=null==h?void 0:h.PageMenuStructure)||void 0===u?void 0:u.Rows.filter((t=>t.Id!==p.Id))),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(h))):p.Tiles.splice(f,0,g)}}class Ko{constructor(t){this.pageId=t||null}updateTile(t,e=!1){this.rowComponent=t;const n=t.components(),i=n.length;n.forEach((t=>{const n=t.find(".add-button-right")[0];n&&n.addStyle({display:i>=3?"none":"flex"});const r={"justify-content":3===i?"center":"start","align-items":3===i?"center":"start"},s={"text-align":3===i?"center":"left"};this.updateTileHeight(t,i),this.updateAlignment(t,r,s),this.updateTileTitleLength(t,i),e||this.updateTileAttributes(t.getId(),"Align",r["justify-content"])}))}updateTileHeight(t,e){const n=t.find(".template-block")[0];1===e?n.getClasses().includes("first-tile")&&n.addClass("high-priority-template"):n.removeClass("high-priority-template")}updateAlignment(t,e,n){const i=t.find(".template-block")[0],r=t.find(".tile-title-section")[0];i.addStyle(e),r.addStyle(n)}updateTileTitleLength(t,e){var n;const i=t.find(".tile-title")[0];if(i){const t=3===e?11:2===e?15:20,r=this.truncateText(t,(null===(n=i.getAttributes())||void 0===n?void 0:n.title)||i.getEl().innerText);3===e?i.components(this.wrapTileTitle(r)):i.components(r)}}truncateText(t,e){const n=window.innerWidth;return e.length>(n<=280?t:t+4)?e.substring(0,n<=280?t:t+4).trim()+"..":e}wrapTileTitle(t){const e=t.split(" ");return e.length>1?e[0]+"<br>"+e[1]:t.replace("<br>","")}updateTileAttributes(t,e,n){let i=n;"start"===n&&(i="left"),new Wo(this.pageId).updateTile(t,e,i)}}class Jo{constructor(t,e,n,i){this.event=t,this.editor=e,this.pageId=n,this.frameId=i,this.tileUpdate=new Ko(n),globalThis.tileMapper=new Wo(this.pageId),this.init()}init(){this.addTileBottom(),this.addTileRight(),this.deleteTile(),this.removeTileIcon(),this.removeTileTile(),this.removeCTa()}addTileBottom(){var t;const e=this.event.target.closest(".action-button.add-button-bottom");if(e){const n=e.closest(".template-wrapper");if(!n)return;let i=n.parentElement,r=null==i?void 0:i.parentElement;if(!i||!r)return;const s=Array.from(r.children).indexOf(i),o=this.editor.Components.getWrapper().find("#"+r.id)[0];if(!o)return;const a=this.editor.Components.addComponent(this.getTileRow());o.append(a,{at:s+1});const l=null===(t=a.find(".template-wrapper")[0])||void 0===t?void 0:t.getId();globalThis.tileMapper.addFreshRow(a.getId(),l)}}addTileRight(){var t;const e=this.event.target.closest(".action-button.add-button-right");if(e){const n=e.closest(".template-wrapper"),i=this.editor.Components.getWrapper().find("#"+(null==n?void 0:n.id))[0];if(!i)return;const r=i.parent();if(r.components().filter((t=>"tile-wrapper"===t.get("type"))).length>=3)return;const s=this.editor.Components.addComponent(this.getTile()),o=i.index();r.append(s,{at:o+1}),globalThis.tileMapper.addTile(null===(t=null==n?void 0:n.parentElement)||void 0===t?void 0:t.id,s.getId()),this.tileUpdate.updateTile(r)}}deleteTile(){const t=this.event.target.closest(".action-button.delete-button");if(t){const e=t.closest(".template-wrapper");if(e){const t=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0],n=t.parent();t.remove(),this.tileUpdate.updateTile(n),globalThis.tileMapper.removeTile(t.getId(),n.getId()),this.removeEditor(t.getId())}}}removeTileIcon(){const t=this.event.target.closest(".tile-close-icon");if(t){const e=t.closest(".template-wrapper");if(e){const t=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0];if(this.checkTileHasIconOrTitle(t)){globalThis.tileMapper.updateTile(t.getId(),"Icon","");const e=t.find(".tile-icon-section")[0];e&&e.addStyle({display:"none"})}else console.warn("Tile has no icon or title")}}}removeTileTile(){const t=this.event.target.closest(".tile-close-title");if(t){const e=t.closest(".template-wrapper");if(e){const t=this.editor.Components.getWrapper().find("#"+(null==e?void 0:e.id))[0];if(this.checkTileHasIconOrTitle(t)){globalThis.tileMapper.updateTile(t.getId(),"Text","");const e=t.find(".tile-title-section")[0];e&&e.addStyle({display:"none"})}else console.warn("Tile has no icon or title")}}}checkTileHasIconOrTitle(t){const e=t.parent();if(!e)return!1;const n=globalThis.tileMapper.getTile(e.getId(),t.getId());return!!(n&&n.Icon&&n.Text)}removeCTa(){const t=this.event.target.closest(".cta-badge");t&&(new E).removeCta(t)}removeEditor(t){document.querySelectorAll(".mobile-frame").forEach((e=>{const n=e.querySelector(`#${t}`);if(n&&console.log(n),e.id.includes(this.frameId)){let t=e.nextElementSibling;for(;t;){const e=t;t=t.nextElementSibling,e&&(e.remove(),(new Xo).activateNavigators())}}}))}getTileRow(){const t=this.getTile();return`<div class="container-row" ${f} id="${b(8)}">${t}</div>`}getTile(){return`\n      <div ${h} class="template-wrapper" id="${b(8)}">\n        <div ${u} class="template-block" style="background-color: transparent; color: #333333; justify-content: left">\n            <div ${p} id="igtdq" data-gjs-type="default" class="tile-icon-section">\n              <span ${p} id="is1dw" data-gjs-type="text" class="tile-close-icon top-right selected-tile-title">×</span>\n              <span ${p} id="ic26t" data-gjs-type="text" class="tile-icon">Title</span>\n            </div>\n            <div ${p} id="igtdq" data-gjs-type="default" class="tile-title-section">\n              <span ${p} id="is1dw" data-gjs-type="text" class="tile-close-icon top-right selected-tile-title">×</span>\n              <span ${p} style="display: block" id="ic26t" data-gjs-type="text" is-hidden="false" title="Title" class="tile-title">Title</span>\n            </div>\n        </div>\n        <button ${p} id="i9sxl" data-gjs-type="default" title="Delete template" class="action-button delete-button">&minus;</button>\n        <button ${p} id="ifvvi" data-gjs-type="default" title="Add template right" class="action-button add-button-right">+</button>\n        <button ${p} id="i4ubt" data-gjs-type="default" title="Delete template" class="action-button add-button-bottom">&plus;</button>\n      </div>\n    `}}var Yo=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class Xo{constructor(){this.handleComponentAdd=t=>{var e;const n=t.parent();n&&(null===(e=n.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&3===n.components().filter((t=>"tile-wrapper"===t.get("type"))).length&&console.log("more than 3")},this.appVersionManager=new S,this.toolboxService=new o}init(t,e,n){this.editor=t,this.pageData=e,this.pageId=e.PageId,this.frameId=n,this.onDragAndDrop(),this.onSelected(),this.onLoad()}onLoad(){void 0!==this.editor&&(this.editor.on("load",(()=>{const t=this.editor.getWrapper();t?t.view.el.addEventListener("click",(t=>{this.tileManager=new Jo(t,this.editor,this.pageId,this.frameId),globalThis.activeEditor=this.editor,globalThis.currentPageId=this.pageId,globalThis.pageData=this.pageData,new Bo(t,this.editor,this.pageData),this.activateEditor()})):console.error("Wrapper not found!")})),this.activateNavigators())}onDragAndDrop(){let t,e;const n=new Wo(this.pageId),i=new x(this.pageId);this.editor.on("component:drag:start",(e=>{t=e.parent})),this.editor.on("component:drag:end",(r=>{e=r.parent;const s=e.getEl();if(s&&s.classList.contains("container-row")){r.parent.components().filter((t=>"tile-wrapper"===t.get("type"))).length>3&&(r.target.remove(),this.editor.UndoManager.undo());const i=!0,s=new Ko;s.updateTile(e,i),s.updateTile(t,i),n.moveTile(r.target.getId(),t.getId(),e.getId(),r.index),this.onTileUpdate(e)}else s&&s.classList.contains("content-page-wrapper")?i.moveContentRow(r.target.getId(),r.index):s&&s.classList.contains("cta-button-container")&&i.moveCta(r.target.getId(),r.index)}))}onSelected(){this.editor.on("component:selected",(t=>{globalThis.selectedComponent=t,globalThis.tileMapper=new Wo(this.pageId),globalThis.frameId=this.frameId,this.setTileProperties(),this.setCtaProperties(),this.createChildEditor()})),this.editor.on("component:deselected",(()=>{globalThis.selectedComponent=null}))}onTileUpdate(t){var e;t&&(null===(e=t.getEl())||void 0===e?void 0:e.classList.contains("container-row"))&&(this.editor.off("component:add",this.handleComponentAdd),this.editor.on("component:add",this.handleComponentAdd))}activateEditor(){document.querySelectorAll(".mobile-frame").forEach((t=>{t.classList.remove("active-editor"),t.id.includes(this.frameId)&&(t.classList.add("active-editor"),this.toggleSidebar())}))}toggleSidebar(){return Yo(this,void 0,void 0,(function*(){var t;const e=document.getElementById("tools-section"),n=document.querySelector("#mapping-section");if(e.style.display="block",n.style.display="none","Content"===(null===(t=this.pageData)||void 0===t?void 0:t.PageType))new P(this.pageData);else{const t=document.getElementById("menu-page-section"),e=document.getElementById("content-page-section");t&&(t.style.display="block"),e&&e.remove()}}))}setTileProperties(){const t=globalThis.selectedComponent,e=t.parent(),n=e.parent(),i=globalThis.tileMapper.getTile(n.getId(),e.getId());t&&i&&(this.tileProperties=new Oo(t,i),this.tileProperties.setTileAttributes())}setCtaProperties(){const t=globalThis.selectedComponent,e=new x(this.pageId).getContentCta(t.getId());e&&new Do(t,e).setctaAttributes()}createChildEditor(){return Yo(this,void 0,void 0,(function*(){var t;const e=globalThis.selectedComponent.parent(),n=e.parent(),i=globalThis.tileMapper.getTile(n.getId(),e.getId());if(console.log(i),null===(t=null==i?void 0:i.Action)||void 0===t?void 0:t.ObjectId){const t=i.Action.ObjectId,e=JSON.parse(localStorage.getItem(`data-${t}`)||"{}");let n;if(Object.keys(e).length>0)n=e;else{const e=yield this.appVersionManager.getActiveVersion();console.log("version",e),n=null==e?void 0:e.Pages.find((e=>e.PageId===t))}this.removeOtherEditors(),n&&new V(t,n).init(i)}else this.removeOtherEditors(),this.activateNavigators(),new Zo(this.toolboxService,this.appVersionManager).render()}))}removeOtherEditors(){console.log("Removing other editors"),document.querySelectorAll(".mobile-frame").forEach((t=>{if(t.id.includes(this.frameId)){let e=t.nextElementSibling;for(;e;){const t=e;e=e.nextElementSibling,t&&t.remove()}}}))}activateNavigators(){const t=document.querySelector(".page-navigator-left"),e=document.querySelector(".page-navigator-right"),n=document.getElementById("child-container"),i=document.getElementById("scroll-left"),r=document.getElementById("scroll-right"),s=document.querySelectorAll(".mobile-frame");Array.from(s).reduce(((t,e)=>t+e.clientWidth),0)>n.clientWidth?(t.style.display="flex",e.style.display="flex"):(t.style.display="none",e.style.display="none");const o=window.innerWidth<=1440?s.length>1?"flex-start":"center":s.length>3?"flex-start":"center";n.style.setProperty("justify-content",o);const a=t=>{n.scrollTo({left:n.scrollLeft+t,behavior:"smooth"})};i.addEventListener("click",(()=>a(-200))),r.addEventListener("click",(()=>a(200)));const l=()=>{const{scrollLeft:t,scrollWidth:e,clientWidth:s}=n;i.style.display=t>0?"flex":"none",r.style.display=t+s<e?"flex":"none"};return l(),n.addEventListener("scroll",l),{updateButtonVisibility:l,scrollBy:a}}}class Qo{constructor(t,e){this.title=e||"Page Name",this.id=t,this.container=document.createElement("div"),this.editor=new sa,this.init()}init(){this.container.classList.add("app-bar");const t=document.createElement("svg");t.innerHTML='\n          <svg class="content-back-button" xmlns="http://www.w3.org/2000/svg" data-name="Group 14" width="47" height="47" viewBox="0 0 47 47">\n            <g id="Ellipse_6" data-name="Ellipse 6" fill="none" stroke="#262626" stroke-width="1">\n              <circle cx="23.5" cy="23.5" r="23.5" stroke="none"></circle>\n              <circle cx="23.5" cy="23.5" r="23" fill="none"></circle>\n            </g>\n            <path id="Icon_ionic-ios-arrow-round-up" data-name="Icon ionic-ios-arrow-round-up" d="M13.242,7.334a.919.919,0,0,1-1.294.007L7.667,3.073V19.336a.914.914,0,0,1-1.828,0V3.073L1.557,7.348A.925.925,0,0,1,.263,7.341.91.91,0,0,1,.27,6.054L6.106.26h0A1.026,1.026,0,0,1,6.394.07.872.872,0,0,1,6.746,0a.916.916,0,0,1,.64.26l5.836,5.794A.9.9,0,0,1,13.242,7.334Z" transform="translate(13 30.501) rotate(-90)" fill="#262626"></path>\n          </svg>\n        ',t.addEventListener("click",(t=>{t.preventDefault();const e=document.querySelector(`#${this.id}-frame`);if(e){let t=e.nextElementSibling;for(;t;){const e=t;t=t.nextElementSibling,e.remove()}e.remove(),(new Xo).activateNavigators()}}));const e=document.createElement("h1");e.className="title";const n=this.title.length>20?this.title.substring(0,16)+"...":this.title;e.setAttribute("title",n||"Page Name"),e.textContent=n||"Page Name",this.container.appendChild(t),this.container.appendChild(e)}render(t){t.appendChild(this.container)}}class ta{constructor(t,e=!1,n,i){this.container=document.createElement("div"),this.id=t,this.isHome=e,this.pageName=i,this.pageData=n,this.init()}init(){this.container.className="mobile-frame",this.container.id=`${this.id}-frame`,this.container.setAttribute("data-pageid","1");const t=new l,e=new c,n=new Qo(this.id,this.pageName);t.render(this.container),this.isHome?e.render(this.container):n.render(this.container);const i=document.createElement("div");i.id=this.id,this.container.appendChild(i)}render(t){t.appendChild(this.container)}}class ea{constructor(t){this.pageId=t,this.container=document.createElement("div"),this.init()}init(){this.container.style.justifyContent="center",this.container.className="frame-list",this.container.id="child-container",new ta(`${this.pageId}`,!0).render(this.container)}render(t){t.appendChild(this.container)}}class na{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.style.display="none",this.container.className="navigator page-navigator-left",this.container.innerHTML='<span id="scroll-left"><i class="fa fa-arrow-left-long"></i></span>',this.container.addEventListener("click",(t=>{}))}render(t){t.appendChild(this.container)}}class ia{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.style.display="none",this.container.className="navigator page-navigator-right",this.container.innerHTML='<span id="scroll-right"><i class="fa fa-arrow-right-long"></i></span>',this.container.addEventListener("click",(t=>{}))}render(t){t.appendChild(this.container)}}var ra=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class sa{constructor(){this.editors=[],this.config=e.getInstance(),this.organisationLogo=this.config.organisationLogo,this.themeManager=new I,this.toolboxService=new o,this.editorEvents=new Xo,this.jsonToGrapes=new q(this)}init(){return ra(this,void 0,void 0,(function*(){var t;const e=yield this.toolboxService.getVersions();this.homepage=null===(t=e.AppVersions.find((t=>1==t.IsActive)))||void 0===t?void 0:t.Pages.find((t=>"Home"===t.PageName)),console.log(this.homepage),document.getElementById("main-content").innerHTML="",this.setUpEditorFrame(),this.setUpEditor()}))}setUpEditorFrame(){const t=new na,e=new ia,n=new ea("gjs-0"),i=document.getElementById("main-content");t.render(i),n.render(i),e.render(i)}setUpEditor(){return ra(this,void 0,void 0,(function*(){const t=this.initializeGrapesEditor("gjs-0");this.finalizeEditorSetup(t),yield this.loadHomePage(t),this.activateHomeEditor("gjs-0"),this.themeManager.applyTheme(this.themeManager.currentTheme)}))}loadHomePage(t){return ra(this,void 0,void 0,(function*(){var e;const n=new q(this.homepage).generateHTML();t.setComponents(n),this.editorEvents.init(t,this.homepage,"gjs-0"),localStorage.setItem(`data-${null===(e=this.homepage)||void 0===e?void 0:e.PageId}`,JSON.stringify(this.homepage))}))}initializeGrapesEditor(t){return grapesjs.init({container:`#${t}`,fromElement:!0,height:"100%",width:"auto",canvas:{styles:["/Resources/UCGrapes1/src/css/toolbox.css","/DVelop/Bootstrap/Shared/fontawesome_vlatest/css/all.min.css?202521714271081","https://fonts.googleapis.com/css2?family=Inter:opsz@14..32&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"]},baseCss:" ",dragMode:"normal",panels:{defaults:[]},sidebarManager:!1,storageManager:!1,modal:!1,commands:!1,hoverable:!1,highlightable:!1,selectable:!1,richTextEditor:{}})}finalizeEditorSetup(t){t.getWrapper().set({selectable:!1,droppable:!1,draggable:!1,hoverable:!1});const e=t.Canvas.getElement();e&&e.style.setProperty("height","calc(100% - 100px)","important");const n=t.Canvas.getBody();n&&n.style.setProperty("background-color","#EFEEEC","important")}activateHomeEditor(t){const e=document.getElementById(`${t}-frame`);null==e||e.classList.add("active-editor")}}class oa{constructor(){this.toolboxService=new o,this.toolBoxManager=new nc,this.appVersions=new S}openModal(){const t=document.createElement("div"),e=document.createElement("p");e.innerText="Are you sure you want to publish? Once published, all currently visible pages will be finalized and visible to residents. This action cannot be undone.";const n=document.createElement("label");n.className="notify_residents";const i=document.createElement("input");i.type="checkbox",i.id="notify_residents",i.name="notify_residents";const r=document.createElement("span");r.innerText="Notify residents on about the updates made.",n.appendChild(i),n.appendChild(r);const s=document.createElement("div");s.classList.add("popup-footer"),s.style.marginBottom="-12px";const o=this.createButton("submit_publish","tb-btn-primary","Publish"),a=this.createButton("cancel_publish","tb-btn-secondary","Cancel");s.appendChild(o),s.appendChild(a),t.appendChild(e),t.appendChild(n),t.appendChild(s);const l=new F({title:"Confirm Publish",width:"500px",body:t});l.open(),o.addEventListener("click",(t=>{t.preventDefault(),console.log("Publishing...",i.checked),this.toolBoxManager.savePages(!1).then((t=>{this.appVersions.getActiveVersion().then((t=>{this.toolboxService.publishAppVersion(t.AppVersionId,i.checked).then((t=>{t.message||(l.close(),new $o("success","App published successfully"))}))}))}))})),a.addEventListener("click",(t=>{t.preventDefault(),l.close()}))}processData(){}publishAppVersion(){}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}}class aa{constructor(t,e,n={}){if(this.button=document.createElement("button"),this.button.id=t,this.button.className=`tb-btn tb-btn-${n.variant||"primary"}`,n.svg){const t=(new DOMParser).parseFromString(n.svg,"image/svg+xml").documentElement;this.button.appendChild(t)}const i=document.createElement("span");n.labelId&&(i.id=n.labelId),i.textContent=e,this.button.appendChild(i)}render(t){t.appendChild(this.button)}}class la{constructor(){this.container=document.createElement("div"),this.undoButton=document.createElement("button"),this.redoButton=document.createElement("button"),this.init()}init(){this.container.classList.add("edit-actions"),this.undoButton.id="undo",this.undoButton.className="btn-transparent",this.undoButton.title="Undo (ctrl+z)",this.undoButton.innerHTML="<span class='fa fa-undo'></span>",this.undoButton.addEventListener("click",this.handleUndo),this.redoButton.id="redo",this.redoButton.className="btn-transparent",this.redoButton.title="Redo (ctrl+shift+z)",this.redoButton.innerHTML="<span class='fa fa-redo'></span>",this.redoButton.addEventListener("click",this.handleRedo),this.container.appendChild(this.undoButton),this.container.appendChild(this.redoButton)}handleUndo(){console.log("Undo action triggered")}handleRedo(){console.log("Redo action triggered")}render(t){t.appendChild(this.container)}}class ca extends I{constructor(){super(),this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.themeOptions=document.createElement("div"),this.selectedTheme=document.createElement("span"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.classList.add("tb-custom-theme-selection");const t=document.createElement("button");t.classList.add("theme-select-button"),t.setAttribute("aria-haspopup","listbox"),this.selectedTheme.classList.add("selected-theme-value"),this.selectedTheme.textContent="Select Theme",t.appendChild(this.selectedTheme),this.container.appendChild(t),t.onclick=e=>{e.preventDefault(),t.classList.contains("open")?this.closeSelection():(this.themeOptions.classList.toggle("show"),t.classList.toggle("open"),t.setAttribute("aria-expanded","true"))},this.selectionDiv.appendChild(t),this.container.appendChild(this.selectionDiv),this.initializeCategoryOptions()}initializeCategoryOptions(){this.themeOptions.className="theme-options-list",this.themeOptions.setAttribute("role","listbox"),this.getThemes().forEach((t=>{const e=document.createElement("div");e.className="theme-option",e.role="option",e.setAttribute("data-value",t.ThemeName),e.textContent=t.ThemeName;const n=this.currentTheme;n&&n.ThemeName===t.ThemeName&&(e.classList.add("selected"),this.selectedTheme.textContent=t.ThemeName),e.onclick=()=>{this.themeOptions.querySelectorAll(".theme-option").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),this.selectedTheme.textContent=t.ThemeName,this.saveSelectedTheme(t),this.closeSelection()},this.themeOptions.appendChild(e)})),this.selectionDiv.appendChild(this.themeOptions)}saveSelectedTheme(t){(new o).updateLocationTheme(t.ThemeId).then((e=>{this.setTheme(t)}))}closeSelection(){if(this.themeOptions.classList.contains("show")){this.themeOptions.classList.remove("show");const t=this.container.querySelector(".theme-select-button");t.setAttribute("aria-expanded","false"),t.classList.toggle("open")}}handleOutsideClick(t){this.themeOptions.classList.contains("show")&&!this.container.contains(t.target)&&this.closeSelection()}render(t){t.appendChild(this.container)}}var da=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class ua{constructor(){this.toolboxService=new o,this.appVersion=new S}generateShareLink(){return da(this,void 0,void 0,(function*(){try{const t=yield this.appVersion.getActiveVersionId();if(!t)throw new Error("No active version found");return`${s}/wp_apppreview.aspx?AppVersionId=${t}`}catch(t){throw console.error("Error generating share link:",t),t}}))}copyToClipboard(t){return da(this,void 0,void 0,(function*(){try{return yield navigator.clipboard.writeText(t),!0}catch(t){return console.error("Clipboard copy failed:",t),!1}}))}getVersions(){return da(this,void 0,void 0,(function*(){try{return(yield this.toolboxService.getVersions()).AppVersions}catch(t){return console.error("Failed to fetch versions:",t),[]}}))}activateVersion(t){return da(this,void 0,void 0,(function*(){try{return yield this.toolboxService.activateVersion(t)}catch(t){return console.error("Version activation failed:",t),!1}}))}createVersion(t){return da(this,arguments,void 0,(function*(t,e=!1){try{let n;if(e){const e=yield this.appVersion.getActiveVersionId();n=yield this.toolboxService.duplicateVersion(e,t)}else n=yield this.toolboxService.createVersion(t);return console.log("Version creation result:",n),n}catch(t){return console.error("Version creation failed:",t),null}}))}getActiveVersion(){return da(this,void 0,void 0,(function*(){return(yield this.getVersions()).find((t=>t.IsActive))||null}))}}var ha=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class pa{constructor(){this.versionController=new ua,this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.versionSelection=document.createElement("div"),this.activeVersion=document.createElement("span"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.classList.add("tb-custom-theme-selection");const t=this.createSelectionButton();this.selectionDiv.appendChild(t),this.container.appendChild(this.selectionDiv),this.initializeVersionOptions()}createSelectionButton(){const t=document.createElement("button");return t.classList.add("theme-select-button"),t.setAttribute("aria-haspopup","listbox"),this.activeVersion.classList.add("selected-theme-value"),this.activeVersion.textContent="Select Version",t.appendChild(this.activeVersion),t.onclick=e=>{e.preventDefault(),t.classList.contains("open")?this.closeSelection():this.toggleSelection(t)},t}toggleSelection(t){this.versionSelection.classList.toggle("show"),t.classList.toggle("open"),t.setAttribute("aria-expanded","true")}initializeVersionOptions(){return ha(this,void 0,void 0,(function*(){this.versionSelection.className="theme-options-list",this.versionSelection.setAttribute("role","listbox"),this.versionSelection.innerHTML="",(yield this.versionController.getVersions()).forEach((t=>this.createVersionOption(t))),this.addNewVersionButton(),this.selectionDiv.appendChild(this.versionSelection)}))}addNewVersionButton(){const t=document.createElement("div");t.className="theme-option",t.innerHTML='<i class="fa fa-plus"></i> Create new version',t.onclick=()=>{this.createVersionModal()},this.versionSelection.appendChild(t)}createVersionOption(t){const e=document.createElement("div");e.className="theme-option",e.role="option",e.setAttribute("data-value",t.AppVersionName),e.textContent=t.AppVersionName;const n=this.createDuplicateButton(t);e.append(n),t.IsActive&&(e.classList.add("selected"),this.activeVersion.textContent=t.AppVersionName),e.addEventListener("click",(e=>this.handleVersionSelection(e,t))),this.versionSelection.appendChild(e)}createDuplicateButton(t){const e=document.createElement("span");return e.className="clone-version fa fa-clone",e.title="Duplicate",e.addEventListener("click",(e=>{e.stopPropagation(),e.preventDefault(),this.createVersionModal(t.AppVersionName+" - Copy","Duplicate version","Duplicate")})),e}handleVersionSelection(t,e){return ha(this,void 0,void 0,(function*(){t.target.classList.contains("clone-version")||(this.versionSelection.querySelectorAll(".theme-option").forEach((t=>t.classList.remove("selected"))),t.currentTarget.classList.add("selected"),this.activeVersion.textContent=e.AppVersionName,(yield this.versionController.activateVersion(e.AppVersionId))&&this.clearActiveTheme(),this.closeSelection())}))}clearActiveTheme(){location.reload()}createVersionModal(t,e,n){const i=new Uo("page-form");i.addField({type:"text",id:"version_name",placeholder:"Version name",required:!0,value:t});const r=document.createElement("div");i.render(r);const s=this.createSubmitSection(n);r.appendChild(s);const o=new F({title:e||"Create new version",width:"400px",body:r});o.open();let a=!1;e&&(a=!0),this.setupModalButtons(o,r,a)}createSubmitSection(t){const e=document.createElement("div");e.classList.add("popup-footer"),e.style.marginBottom="-12px";const n=this.createButton("submit_form","tb-btn-primary",`${t||"Save"}`),i=this.createButton("cancel_form","tb-btn-secondary","Cancel");return e.appendChild(n),e.appendChild(i),e}setupModalButtons(t,e,n){const i=e.querySelector("#submit_form"),r=e.querySelector("#cancel_form");null==i||i.addEventListener("click",(i=>ha(this,void 0,void 0,(function*(){i.preventDefault();const r=e.querySelector("#version_name").value;r&&(yield this.versionController.createVersion(r,n),t.close(),yield this.refreshVersionList())})))),null==r||r.addEventListener("click",(e=>{e.preventDefault(),t.close()}))}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}closeSelection(){if(this.versionSelection.classList.contains("show")){this.versionSelection.classList.remove("show");const t=this.container.querySelector(".theme-select-button");t.setAttribute("aria-expanded","false"),t.classList.toggle("open")}}handleOutsideClick(t){this.versionSelection.classList.contains("show")&&!this.container.contains(t.target)&&this.closeSelection()}refreshVersionList(){return ha(this,void 0,void 0,(function*(){yield this.initializeVersionOptions(),this.versionSelection.classList.contains("show")||this.versionSelection.classList.add("show");const t=this.container.querySelector(".theme-select-button");t.classList.contains("open")||t.classList.add("open"),t.setAttribute("aria-expanded","true")}))}render(t){t.appendChild(this.container)}}class fa{constructor(t){this.appVersion=t,this.pages=this.appVersion.Pages,this.toolboxService=new o,this.showList()}showList(){const t=document.createElement("ul");t.classList.add("tb-custom-list"),this.pages.forEach((e=>{const n=this.buildListItem(e);t.appendChild(n)}));const e=document.getElementById("tree-container");e.innerHTML="",e.appendChild(t)}buildListItem(t){const e=document.createElement("li");e.classList.add("tb-custom-list-item");const n=document.createElement("div");n.classList.add("tb-custom-menu-item"),n.classList.add("page-list-items");const i=document.createElement("span");i.style.textTransform="capitalize",i.classList.add("tb-dropdown-toggle"),i.setAttribute("role","button"),i.setAttribute("aria-expanded","false"),i.innerHTML=`<i class="fa-regular fa-file tree-icon"></i><span>&nbsp; ${t.PageName}</span>`;const r=document.createElement("i");r.classList.add("fa-regular","fa-trash-can","tb-delete-icon");const s=document.createElement("i");s.classList.add("fa-regular","fa-edit","tb-update-icon"),"Home"!==t.PageName&&"Web Link"!==t.PageName||(r.style.display="none",s.style.display="none");const o=document.createElement("div");return o.classList.add("tb-menu-icons-container"),r.setAttribute("data-id",t.PageId),s.setAttribute("data-id",t.PageId),r.addEventListener("click",(t=>this.handleDelete(t))),n.appendChild(i),"Web Link"===t.PageName&&(n.style.display="none"),"Home"!==t.PageName&&(o.append(r),n.appendChild(o)),e.appendChild(n),e}handleDelete(t){const e=t.target.dataset.id,n=document.createElement("div"),i=document.createElement("div");i.classList.add("popup-body"),i.id="confirmation_modal_message",i.innerText="Are you sure you want to delete this page?";const r=document.createElement("div");r.classList.add("popup-footer");const s=document.createElement("button");s.id="yes_delete",s.classList.add("tb-btn","tb-btn-primary"),s.innerText="Delete";const o=document.createElement("button");o.id="close_popup",o.classList.add("tb-btn","tb-btn-outline"),o.innerText="Cancel",r.appendChild(s),r.appendChild(o),n.appendChild(i),n.appendChild(r);const a=new F({title:"Delete Page",width:"100",body:n});a.open(),o.addEventListener("click",(t=>{a.close()})),s.addEventListener("click",(t=>{this.toolboxService.deletePage(this.appVersion.AppVersionId,e).then((t=>{console.log(t),t.error.message?new $o("error",t.error.message):(this.appVersion=t.AppVersion,this.pages=this.appVersion.Pages,this.showList(),a.close(),console.log(window.app.toolboxApp.editor.init()))}))}))}}class ga{constructor(t){this.mainContainer=document.getElementById("mapping-section"),this.treeContainer=document.getElementById("tree-container"),this.renderTitle(),this.renderHideOrShowPages(),this.addPageCreationEvent(),this.appVersionManager=t,this.toolboxService=new o,this.appVersionManager.getActiveVersion().then((t=>{this.version=t,this.pages=t.Pages,this.homePage=t.Pages.find((t=>"Home"==t.PageName)),this.homePage&&(this.clearMappings(),this.createPageTree(this.homePage.PageId,"tree-container"))}))}renderTitle(){document.getElementById("sidebar_mapping_title").textContent="MAPPING"}renderHideOrShowPages(){const t=document.getElementById("current-page-title");let e=t.nextSibling;for(;e;){let t=e;e=e.nextSibling,1===t.nodeType&&t.remove()}const n=document.createElement("span");n.id="list_all_pages",n.style.display="block",n.textContent="List all pages";const i=document.createElement("span");i.id="hide_pages",i.style.display="none",i.textContent="Hide pages",n.addEventListener("click",(t=>{i.style.display="block",n.style.display="none",this.clearMappings(),this.showAllPages()})),i.addEventListener("click",(t=>{i.style.display="none",n.style.display="block",this.homePage&&(this.clearMappings(),this.createPageTree(this.homePage.PageId,"tree-container"))})),t.insertAdjacentElement("afterend",i),t.insertAdjacentElement("afterend",n)}getPage(t){return this.pages.find((e=>e.PageId==t))}showAllPages(){new fa(this.version)}createPageTree(t,e){let n=this.getPage(t),i=[];if(n&&n.PageMenuStructure){n.PageMenuStructure.Rows.forEach((t=>{t.Tiles.forEach((t=>{n=this.getPage(t.Action.ObjectId),n&&i.push(n)}))}));const r=this.createTree(t,i),s=document.getElementById(e);s.innerHTML="",s.appendChild(r)}}createTree(t,e,n=!0){const i=document.createElement("ul");return i.classList.add("tb-custom-list"),e.forEach((e=>{const r=this.buildListItem(t,e,n);i.appendChild(r)})),i}buildListItem(t,e,n=!0){"Menu"!=e.PageType&&(n=!1);const i=document.createElement("li");i.classList.add("tb-custom-list-item"),i.dataset.parentPageId=t;const r=document.createElement("div");r.classList.add("child-div"),r.id=`child-div-${e.PageId}`,r.style.position="relative",r.style.paddingLeft="20px";const s=document.createElement("div");s.classList.add("tb-custom-menu-item");const o=document.createElement("span");o.classList.add("tb-dropdown-toggle"),o.setAttribute("role","button"),o.setAttribute("aria-expanded","false");let a="fa-regular fa-file tree-icon";return n&&(a="fa-caret-right tree-icon"),o.innerHTML=`<i class="fa ${a}"></i><span>${e.PageName}</span>`,s.appendChild(o),i.appendChild(s),i.appendChild(r),n&&i.addEventListener("click",(t=>{t.stopPropagation(),this.createPageTree(e.PageId,`child-div-${e.PageId}`)})),i}clearMappings(){var t;null===(t=this.treeContainer)||void 0===t||t.replaceChildren("")}addPageCreationEvent(){const t=document.getElementById("page-submit"),e=document.getElementById("page-title");t.addEventListener("click",(t=>{t.preventDefault();const n=e.value;n?this.createPage(n):new $o("error","Enter Page Name")}))}createPage(t){this.toolboxService.createMenuPage(this.version.AppVersionId,t).then((t=>{console.log(t)}))}}class ma{constructor(){this.appVersions=new S,this.container=document.getElementById("navbar-buttons"),this.init()}init(){const t=new la,e=new ca,n=new pa;let i=new aa("open-mapping","Tree",{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="18.818" height="16" viewBox="0 0 18.818 18">\n        <path id="Path_993" data-name="Path 993" d="M19.545,5a3.283,3.283,0,0,0-3.273,3.273A3.228,3.228,0,0,0,16.784,10l-2.541,3.177H10.427a3.273,3.273,0,1,0,0,1.636h3.816L16.784,18a3.229,3.229,0,0,0-.511,1.732,3.273,3.273,0,1,0,3.273-3.273,3.207,3.207,0,0,0-1.563.419L15.685,14l2.3-2.873a3.207,3.207,0,0,0,1.563.419,3.273,3.273,0,0,0,0-6.545Zm0,1.636a1.636,1.636,0,1,1-1.636,1.636A1.623,1.623,0,0,1,19.545,6.636ZM7.273,12.364A1.636,1.636,0,1,1,5.636,14,1.623,1.623,0,0,1,7.273,12.364Zm12.273,5.727a1.636,1.636,0,1,1-1.636,1.636A1.623,1.623,0,0,1,19.545,18.091Z" transform="translate(-4 -5)"></path>\n        </svg>',variant:"outline",labelId:"navbar_tree_label"});i.button.addEventListener("click",(t=>{t.preventDefault();const e=document.getElementById("tools-section"),n=document.querySelector("#mapping-section");e.style.display="none",n.style.display="block",new ga(this.appVersions)}));let r=new aa("publish","Publish",{svg:'<svg xmlns="http://www.w3.org/2000/svg" width="13" height="16" viewBox="0 0 13 18">\n        <path id="Path_958" data-name="Path 958" d="M13.5,3.594l-.519.507L7.925,9.263l1.038,1.06,3.814-3.9V18.644h1.444V6.429l3.814,3.9,1.038-1.06L14.019,4.1ZM7,20.119v1.475H20V20.119Z" transform="translate(-7 -3.594)" fill="#fff"></path>\n      </svg>',labelId:"navbar_tree_label"});t.render(this.container),n.render(this.container),e.render(this.container),i.render(this.container),r.render(this.container),r.button.addEventListener("click",(t=>{t.preventDefault(),(new oa).openModal()}))}render(t){t.appendChild(this.container)}}class va{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tb-tabs");const t=document.createElement("button");t.id="pages-button",t.className="tb-tab-button active",t.setAttribute("data-tab","pages");const e=document.createElement("span");e.id="sidebar_tabs_pages_label",e.innerText="Pages",t.appendChild(e);const n=document.createElement("button");n.id="templates-button",n.className="tb-tab-button",n.setAttribute("data-tab","templates");const i=document.createElement("span");i.id="sidebar_tabs_templates_label",i.innerText="Templates",n.appendChild(i),t.addEventListener("click",(e=>{e.preventDefault(),null==t||t.classList.add("active"),null==n||n.classList.remove("active"),this.switchTabs("pages-content","templates-content")})),n.addEventListener("click",(e=>{e.preventDefault(),null==n||n.classList.add("active"),null==t||t.classList.remove("active"),this.switchTabs("templates-content","pages-content")})),this.container.appendChild(t),this.container.appendChild(n)}switchTabs(t,e){const n=document.getElementById(t),i=document.getElementById(e);console.log(n,i),n.style.display="block",i.style.display="none"}render(t){t.appendChild(this.container)}}class ba{constructor(t){this.categoryData=t,this.pageAttacher=new Go,this.pageCreationService=new Ho,this.details=document.createElement("details"),this.init()}init(){this.details.className="category",this.details.setAttribute("data-category",this.categoryData.name),this.createCategoryElement()}createCategoryElement(){var t,n;const i=document.createElement("summary");i.innerText=`${this.categoryData.displayName}`;const r=document.createElement("i");r.className="fa fa-angle-right","Web Link"!==this.categoryData.name&&i.appendChild(r);const s=document.createElement("div");s.className="search-container",s.innerHTML=`\n            <i class="fas fa-search search-icon"></i>\n            <input type="text" placeholder="Search" class="search-input" />\n            ${this.categoryData.canCreatePage?'<button title="Add New Service/Menu Page" class="add-new-service" id="add-new-service">\n            <i class="fa fa-plus"></i>\n            </button>':""}\n        `,this.categoryData.canCreatePage&&setTimeout((()=>{const t=s.querySelector("#add-new-service");t&&t.addEventListener("click",(t=>{if(t.preventDefault(),globalThis.selectedComponent){if("Content Page"==this.categoryData.name&&this.pageCreationService.addNewContentPage(),"Service/Product Page"==this.categoryData.name){const t=e.getInstance();console.log(t.addServiceButtonEvent)}}else new $o("error","Select tile to continue..")}))}),0);const o=document.createElement("ul");o.className="category-content",null===(n=null===(t=this.categoryData)||void 0===t?void 0:t.options)||void 0===n||n.forEach((t=>{const e=document.createElement("li");e.innerText=t.PageName,e.setAttribute("data-page-name",t.PageName),e.setAttribute("data-page-id",t.PageId),e.addEventListener("click",(e=>{e.preventDefault(),globalThis.selectedComponent?"Dynamic Forms"===this.categoryData.name?this.pageCreationService.handleDynamicForms(t):this.pageAttacher.attachToTile(t,this.categoryData.name):new $o("error","Select tile to continue..")})),o.appendChild(e)}));const a=document.createElement("li");a.className="no-records-message",a.style.display="none",a.innerText="No records found",o.appendChild(a),this.details.addEventListener("toggle",(t=>{if("Web Link"!==this.categoryData.name){const t=i.querySelector("i");t&&(t.classList.toggle("fa-angle-right"),t.classList.toggle("fa-angle-down"))}else{if(!globalThis.selectedComponent)return void new $o("error","Select tile to continue..");this.pageCreationService.handleWebLinks()}})),"Web Link"===this.categoryData.name?this.details.appendChild(i):(this.details.appendChild(i),this.details.appendChild(s),this.details.appendChild(o)),this.searchItemsEvent(s)}searchItemsEvent(t){const e=t.querySelector("input"),n=this.details.querySelector("ul");e.addEventListener("input",(t=>{const e=n.querySelector(".no-records-message");let i=!1;const r=t.target.value.toLowerCase().trim();Array.from(n.querySelectorAll("li:not(.no-records-message)")).forEach((t=>{var e,n;const s=(null!==(n=null===(e=t.textContent)||void 0===e?void 0:e.toLowerCase())&&void 0!==n?n:"").includes(r);t.style.display=s?"block":"none",s&&(i=!0)})),e&&(e.style.display=i?"none":"block")}))}render(t){t.appendChild(this.details)}}class ya{constructor(t){this.categoryView=new ba(t)}render(t){this.categoryView.render(t)}}var wa=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class xa{constructor(){this.container=document.createElement("div"),this.toolBoxService=new o,this.init(),this.getPages()}init(){return wa(this,void 0,void 0,(function*(){this.container.className="tb-dropdown-menu",this.container.id="dropdownMenu",(yield this.getCategoryData()).forEach((t=>{new ya(t).render(this.container)}))}))}getCategoryData(){return wa(this,void 0,void 0,(function*(){return[{name:"Page",displayName:"Pages",label:"Pages",options:yield this.getPages(),canCreatePage:!0},{name:"Service/Product Page",displayName:"Service Pages",label:"Service Page",options:this.getServices(),canCreatePage:!0},{name:"Dynamic Forms",displayName:"Forms",label:"Dynamic Forms",options:this.getDynamicForms(),canCreatePage:!1},{name:"Predefined Pages",displayName:"Modules",label:"Modules",options:yield this.getPredefinedPages(),canCreatePage:!1},{name:"Web Link",displayName:"Web Links",label:"Web Link",options:[],canCreatePage:!1},{name:"Content Page",displayName:"Content Page",label:"Content Page",options:yield this.getContentPages(),canCreatePage:!0}]}))}getDynamicForms(){return(this.toolBoxService.forms||[]).map((t=>({PageId:t.FormId,PageName:t.ReferenceName,TileName:t.ReferenceName})))}getServices(){return(this.toolBoxService.services||[]).map((t=>({PageId:t.ProductServiceId,PageName:t.ProductServiceName,TileName:t.ProductServiceTileName||t.ProductServiceName})))}getContentPages(){return wa(this,void 0,void 0,(function*(){var t;try{return((null===(t=(yield this.toolBoxService.getVersions()).AppVersions.find((t=>t.IsActive)))||void 0===t?void 0:t.Pages)||[]).filter((t=>"Content"==t.PageType)).map((t=>({PageId:t.PageId,PageName:t.PageName,TileName:t.PageName})))}catch(t){throw console.error("Error fetching pages:",t),t}}))}getPages(){return wa(this,void 0,void 0,(function*(){var t;try{return((null===(t=(yield this.toolBoxService.getVersions()).AppVersions.find((t=>t.IsActive)))||void 0===t?void 0:t.Pages)||[]).filter((t=>"Menu"==t.PageType&&"Home"!==t.PageName&&"My Care"!==t.PageName&&"My Living"!==t.PageName&&"My Services"!==t.PageName)).map((t=>({PageId:t.PageId,PageName:t.PageName,TileName:t.PageName})))}catch(t){throw console.error("Error fetching pages:",t),t}}))}getPredefinedPages(){return wa(this,void 0,void 0,(function*(){var t;try{return((null===(t=(yield this.toolBoxService.getVersions()).AppVersions.find((t=>t.IsActive)))||void 0===t?void 0:t.Pages)||[]).filter((t=>"Content"==t.PageType&&"Home"!==t.PageName)).map((t=>({PageId:t.PageId,PageName:t.PageName,TileName:t.PageName})))}catch(t){throw console.error("Error fetching pages:",t),t}}))}render(t){t.appendChild(this.container)}}class Ca{constructor(){this.container=document.createElement("div"),this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.className="sidebar-section custom-select-container",this.container.id="select-container";const t=document.createElement("div");t.className="tb-dropdown",this.dropDownHeader=document.createElement("div"),this.dropDownHeader.className="tb-dropdown-header",this.dropDownHeader.innerHTML='\n            <span id="sidebar_select_action_label">Select Action</span>\n            <i class="fa fa-angle-down"></i>\n        ',this.actionListDropDown=new xa,this.dropDownHeader.addEventListener("click",(t=>{t.stopPropagation(),t.preventDefault(),this.toggleDropdown()})),t.appendChild(this.dropDownHeader),this.actionListDropDown.render(t),this.container.appendChild(t)}toggleDropdown(){const t=this.dropDownHeader.querySelector("i");t&&(t.classList.toggle("fa-angle-up"),t.classList.toggle("fa-angle-down"));const e=this.actionListDropDown.container;e.style.display="block"===e.style.display?"none":"block"}closeDropdown(){const t=this.dropDownHeader.querySelector("i");t&&(t.classList.remove("fa-angle-up"),t.classList.add("fa-angle-down")),this.actionListDropDown.container.style.display="none"}handleOutsideClick(t){"block"!==this.actionListDropDown.container.style.display||this.container.contains(t.target)||this.closeDropdown()}destroy(){document.removeEventListener("click",this.handleOutsideClick.bind(this))}render(t){t.appendChild(this.container)}}class Ea{constructor(){this.container=document.createElement("div"),this.selectionDiv=document.createElement("div"),this.categoryOptions=document.createElement("div"),this.selectedCategory=document.createElement("span"),this.themeManager=new I,this.init(),document.addEventListener("click",this.handleOutsideClick.bind(this))}init(){this.container.className="sidebar-section services-section",this.container.id="dropdownMenu",this.selectionDiv.className="tb-custom-category-selection";const t=document.createElement("button");t.className="category-select-button",t.setAttribute("aria-haspopup","listbox"),t.setAttribute("aria-expanded","false"),this.selectedCategory.className="selected-category-value",this.selectedCategory.textContent="General",t.appendChild(this.selectedCategory),t.onclick=e=>{e.preventDefault(),t.classList.contains("open")?this.closeSelection():(this.categoryOptions.classList.toggle("show"),t.classList.toggle("open"),t.setAttribute("aria-expanded","true"))},this.selectionDiv.appendChild(t),this.container.appendChild(this.selectionDiv),this.initializeCategoryOptions(),this.loadThemeIcons()}initializeCategoryOptions(){this.categoryOptions.className="category-options-list",this.categoryOptions.setAttribute("role","listbox"),["General","Services","Health","Living"].forEach((t=>{const e=document.createElement("div");e.className="category-option",e.role="option",e.setAttribute("data-value",t),e.textContent=t,e.onclick=()=>{this.categoryOptions.querySelectorAll(".category-option").forEach((t=>t.classList.remove("selected"))),e.classList.add("selected"),this.selectedCategory.textContent=t,this.loadThemeIcons(t),this.closeSelection()},this.categoryOptions.appendChild(e)})),this.selectionDiv.appendChild(this.categoryOptions)}closeSelection(){if(this.categoryOptions.classList.contains("show")){this.categoryOptions.classList.remove("show");const t=this.container.querySelector(".category-select-button");t.setAttribute("aria-expanded","false"),t.classList.toggle("open")}}loadThemeIcons(t="General"){document.querySelectorAll("#icons-list").forEach((t=>t.remove()));const e=document.createElement("div");e.classList.add("icons-list"),e.id="icons-list",new A(this.themeManager,t).render(e),this.container.appendChild(e)}handleOutsideClick(t){this.categoryOptions.classList.contains("show")&&!this.container.contains(t.target)&&this.closeSelection()}render(t){t.appendChild(this.container)}}class Ta extends I{constructor(){super(),this.container=document.createElement("div"),this.init()}init(){this.container.className="sidebar-section theme-section",this.container.style.paddingTop="0px";const t=this.getActiveThemeColors();new d(t,"theme-color-palette").render(this.container)}render(t){t.appendChild(this.container)}}class Aa{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="bg-section";const t=document.createElement("button");t.className="add-image",t.id="image-bg",t.innerHTML='\n            <span class="plus">\n               <i class="fa fa-plus"></i>\n            </span>\n            <span class="image-icon">\n                <i class="fa fa-image"></i>\n            </span>\n        ';const e=document.createElement("div");e.className="slider-wrapper",e.id="slider-wrapper",e.style.display="none";const n=document.createElement("input");n.type="range",n.id="bg-opacity",n.min="0",n.max="100",n.value="0",n.addEventListener("input",(t=>{const e=t.target.value,n=document.getElementById("valueDisplay");n&&(n.innerHTML=`${e}%`),this.updateImageOpacity(e)}));const i=document.createElement("span");i.id="valueDisplay",i.innerHTML="0%",e.appendChild(n),e.appendChild(i),t.addEventListener("click",(t=>{if(t.preventDefault(),!globalThis.selectedComponent)return;const e=document.createElement("div");e.classList.add("tb-modal"),e.style.display="flex",new qo("tile").render(e);const n=document.createElement("input");n.type="file",n.multiple=!0,n.accept="image/jpeg, image/jpg, image/png",n.id="fileInput",n.style.display="none",document.body.appendChild(e),document.body.appendChild(n)})),this.container.appendChild(t),this.container.appendChild(e)}updateImageOpacity(t){const e=globalThis.selectedComponent;if(!e)return;const n=t/100;e.getEl().style.backgroundColor=`rgba(0, 0, 0, ${n})`,globalThis.tileMapper.updateTile(e.parent().getId(),"Opacity",t)}render(t){t.appendChild(this.container)}}class Na{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tile-img-container"),this.container.id="tile-img-container";const t=document.createElement("img");t.alt="Tile Image",t.src="https://staging.comforta.yukon.software/media/receptie-197@3x.png",t.className="tile-img-thumbnail";const e=document.createElement("button");let n;e.className="tile-img-delete-button",e.id="tile-img-delete-button",e.innerHTML='<i class="fa fa-xmark"></i>',e.addEventListener("click",(t=>{t.preventDefault();const e=globalThis.selectedComponent;if(!e)return;const i=e.parent(),r=i.parent();n=globalThis.tileMapper.getTile(r.getId(),i.getId());const s=e.getStyle();delete s["background-image"],s["background-color"]=n.BGColor,e.setStyle(s),globalThis.tileMapper.updateTile(e.parent().getId(),"BGImageUrl",""),globalThis.tileMapper.updateTile(e.parent().getId(),"Opacity","0"),this.container.style.display="none",document.getElementById("slider-wrapper").style.display="none"})),console.log("TileImgContainer: ",n),this.container.appendChild(t),this.container.appendChild(e)}render(t){t.appendChild(this.container)}}class Sa{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("tile-img-section");const t=new Na;(new Aa).render(this.container),t.render(this.container)}render(t){t.appendChild(this.container)}}class La{constructor(){this.input=document.createElement("input"),this.init()}init(){this.input.type="text",this.input.placeholder="Enter a title",this.input.classList.add("tb-form-control"),this.input.id="tile-title",this.input.addEventListener("input",(t=>{const e=globalThis.selectedComponent;if(!e)return;const n=e.closest(".container-row").components().length,i=e.find(".tile-title")[0];if(i){const t=3===n?this.truncate(11):2===n?this.truncate(14):this.truncate(25);i.components(t),i.addAttributes({title:this.input.value})}globalThis.tileMapper.updateTile(e.parent().getId(),"Text",this.input.value.trim())}))}truncate(t){return this.input.value.length>t?this.input.value.substring(0,t)+"..":this.input.value}render(t){t.appendChild(this.input)}}class Ia{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="text-color-palette text-colors",this.container.id="text-color-palette",Object.entries({color1:"#ffffff",color2:"#333333"}).forEach((([t,e])=>{const n=document.createElement("div");n.className="color-item";const i=document.createElement("input");i.type="radio",i.id=`text-color-${t}`,i.name="text-color",i.value=e;const r=document.createElement("label");r.className="color-box",r.setAttribute("for",`text-color-${t}`),r.style.backgroundColor=e,r.setAttribute("data-tile-color",e),n.appendChild(i),n.appendChild(r),this.container.appendChild(n),r.onclick=t=>{t.preventDefault();const n=globalThis.selectedComponent;if(!n)return;const r=n.find("path")[0];r&&r.addAttributes({fill:e}),n.addStyle({color:e}),globalThis.tileMapper.updateTile(n.parent().getId(),"Color",e),i.checked=!0}}))}render(t){t.appendChild(this.container)}}class _a{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("text-alignment");const t=document.createElement("div");t.classList.add("align-item"),t.innerHTML='\n            <input type="radio" id="tile-left"\n                name="alignment" value="left" />\n            <label for="tile-left" class="fas fa-align-left">\n            </label>\n        ';const e=document.createElement("div");e.classList.add("align-item"),e.innerHTML='\n            <input type="radio" id="tile-center"\n                     name="alignment" value="center" />\n            <label for="tile-center">\n                <svg xmlns="http://www.w3.org/2000/svg"\n                width="12.7" height="14.626"\n                viewBox="0 0 12.7 14.626">\n                <path id="Group_2344-converted"\n                    data-name="Group 2344-converted"\n                    d="M5.863,1.868V3.736L5.031,2.9,4.2,2.073l-.336.341-.336.342,1.411,1.41L6.35,5.577,7.758,4.17,9.165,2.762l-.333-.333L8.5,2.1l-.831.817-.83.817V0H5.863V1.868M0,7.313v.794H12.7V6.519H0v.794m4.937,3.149-1.4,1.4.333.333.334.333.83-.816.831-.817v3.729h.974V10.89l.832.832.831.832.336-.342.336-.341L7.766,10.465c-.773-.773-1.41-1.406-1.416-1.406s-.642.631-1.413,1.4"\n                    fill-rule="evenodd" fill="#696969" />\n                </svg>\n            </label>\n        ',t.onclick=t=>{t.preventDefault();const e=document.getElementById("tile-left"),n=globalThis.selectedComponent;if(!n)return;n.addStyle({"justify-content":"start","align-items":"start"});const i=n.find(".tile-title")[0];i&&i.addStyle({"text-align":"left"}),globalThis.tileMapper.updateTile(n.parent().getId(),"Align","left"),globalThis.tileMapper.updateTile2(n),e.checked=!0},e.onclick=t=>{t.preventDefault();const e=document.getElementById("tile-center"),n=globalThis.selectedComponent;if(!n)return;n.addStyle({"justify-content":"center","align-items":"center"});const i=n.find(".tile-title")[0];i&&i.addStyle({"text-align":"center"}),globalThis.tileMapper.updateTile(n.parent().getId(),"Align","center"),e.checked=!0},this.container.appendChild(t),this.container.appendChild(e)}render(t){t.appendChild(this.container)}}class Oa{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.classList.add("title-style");const t=new Ia,e=new _a;t.render(this.container),e.render(this.container)}render(t){t.appendChild(this.container)}}class ka{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="sidebar-section title-section";const t=new La,e=new Oa;t.render(this.container),e.render(this.container)}render(t){t.appendChild(this.container)}}class ja{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.id="menu-page-section";const t=new Ta,e=new Sa,n=new ka,i=new Ca,r=new Ea;t.render(this.container),e.render(this.container),n.render(this.container),i.render(this.container),r.render(this.container)}render(t){t.appendChild(this.container)}}class Pa{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="tb-tab-content active-tab",this.container.id="pages-content",(new ja).render(this.container)}render(t){t.appendChild(this.container)}}const Ma={Templates:[{Id:"template-one",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"center",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"ZngzLIvl20250326202112011",Tiles:[{Id:"cBggkiXC20250326202112011",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"FjjiLxOp20250326202113039",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"qnDgmZMJ20250326202115737",Tiles:[{Id:"vWMSlmsk20250326202115736",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"MyHZFUgV20250326202119203",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"ilvtXnXw20250326202119576",Name:"Title",Text:"Title",Color:"#333333",Align:"center",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-two",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"center",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-three",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"left",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}},{Id:"ntcFxRKO20250326202614640",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"hGqxooDx20250326202118005",Tiles:[{Id:"jHltKWiP20250326202118005",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"pbaPLIje20250326202617562",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"yCtmNReZ20250326202618523",Tiles:[{Id:"dgXzpgXE20250326202618523",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"omnlZjhw20250326202619269",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]},{Id:"template-four",Rows:[{Id:"8024f98a-fef5-410c-8350-916b7394862e",Tiles:[{Id:"MQhNnVTdyWtKhTq",Name:"Title",Text:"Title",Color:"#000000",Align:"left",Icon:"",BGColor:"",BGImageUrl:"",Opacity:0,Action:{ObjectType:"",ObjectId:"",ObjectUrl:""}}]},{Id:"ZvCzVboB20250326202531961",Tiles:[{Id:"ipSbryyM20250326202531961",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"pbaPLIje20250326202617562",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]},{Id:"yCtmNReZ20250326202618523",Tiles:[{Id:"dgXzpgXE20250326202618523",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""},{Id:"omnlZjhw20250326202619269",Name:"Title",Text:"Title",Color:"#333333",Align:"left",Icon:"",BGColor:"transparent",BGImageUrl:"",Opacity:"0",Action:{ObjectType:"",ObjectId:"",ObjectUrl:""},TilePermissionName:""}]}]}]};class qa{constructor(t,e,n){this.pageId=t,this.editor=e,this.templateId=n,this.init()}init(){return t=this,e=void 0,i=function*(){var t;const e=null===(t=Ma.Templates.find((t=>t.Id===this.templateId)))||void 0===t?void 0:t.Rows,n=new S,i=yield n.getActiveVersion(),r=null==i?void 0:i.Pages.find((t=>t.PageId===this.pageId));if(r){const t=this.getUpdatedPageData(e,r);this.editor.DomComponents.clear(),this.applyTemplate(t)}},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}));var t,e,n,i}getUpdatedPageData(t,e){const n=JSON.parse(JSON.stringify(t));let i=JSON.parse(JSON.stringify(e));return i.PageMenuStructure.Rows=n,i=JSON.parse(JSON.stringify(i)),i}applyTemplate(t){const e=new q(t).generateHTML();this.editor.setComponents(e),localStorage.setItem(`data-${this.pageId}`,JSON.stringify(t))}}class Ba{constructor(t){this.templateList=document.createElement("div"),this.templateList.id="page-templates",t.forEach(((t,e)=>{const n=document.createElement("div");n.className="page-template-wrapper",n.id=t.id;const i=document.createElement("div");i.className="page-template-block-number";const r=document.createElement("div");r.className="page-template-block",r.title="Click to select template";const s=document.createElement("div"),o=document.createElement("img");o.style.width="100%",o.style.height="100%",o.src=t.image,s.appendChild(o),r.appendChild(s),i.innerHTML=`${e+1}`,n.appendChild(i),n.appendChild(r),n.addEventListener("click",(t=>{t.preventDefault();const e=globalThis.activeEditor,i=globalThis.pageData;e||(null==i?void 0:i.PageId)?i&&"Menu"===i.PageType?new ko("When you continue, all the changes you have made will be cleared.","Confirmation",(()=>{return t=this,r=void 0,o=function*(){new qa(i.PageId,e,n.id)},new((s=void 0)||(s=Promise))((function(e,n){function i(t){try{l(o.next(t))}catch(t){n(t)}}function a(t){try{l(o.throw(t))}catch(t){n(t)}}function l(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(t){t(n)}))).then(i,a)}l((o=o.apply(t,r||[])).next())}));var t,r,s,o})).render(document.body):new $o("error","Templates can only be applied to menu pages"):new $o("error","No active page selected")})),this.templateList.appendChild(n)}))}render(t){t.appendChild(this.templateList)}}class Da{constructor(){this.container=document.createElement("div"),this.init()}init(){this.container.className="tb-tab-content active-tab",this.container.id="templates-content",this.container.style.display="none";const t=document.createElement("div");t.className="sidebar-section",t.id="page-templates",new Ba([{id:"template-one",image:"/Resources/UCGrapes1/src/images/template-1.png"},{id:"template-two",image:"/Resources/UCGrapes1/src/images/template-2.png"},{id:"template-three",image:"/Resources/UCGrapes1/src/images/template-3.png"},{id:"template-four",image:"/Resources/UCGrapes1/src/images/template-4.png"}]).render(t),this.container.appendChild(t)}render(t){t.appendChild(this.container)}}class $a{constructor(){this.container=document.getElementById("tools-section"),this.init()}init(){const t=new va,e=new Pa,n=new Da;t.render(this.container),e.render(this.container),n.render(this.container)}render(t){t.appendChild(this.container)}}class Ra{constructor(t){this.activeFilter=null,this.debugResults=t,this.container=document.createElement("div"),this.container.classList.add("tb_debug_dashboard")}debugSummary(){const t=document.createElement("div");t.classList.add("tb_debug_summary");const e=this.createSummaryItem(this.debugResults.Summary.TotalUrls,"Total URLs",!0),n=this.createSummaryItem(this.debugResults.Summary.SuccessCount,"Successful"),i=this.createSummaryItem(this.debugResults.Summary.FailureCount,"Failed");return t.appendChild(e),t.appendChild(n),t.appendChild(i),t}createSummaryItem(t,e,n=!1){const i=document.createElement("div");return i.classList.add("tb_debug_summary_item"),n&&i.classList.add("active"),i.innerHTML=`\n            <h3>${parseFloat(t).toString()}</h3>\n            <p>${e}</p>\n        `,i.addEventListener("click",(()=>{this.container.querySelectorAll(".tb_debug_summary_item").forEach((t=>t.classList.remove("active"))),i.classList.add("active"),this.activeFilter="Total URLs"===e?null:e,this.filterPageSections()})),i}filterPageSections(){this.container.querySelectorAll(".tb_debug_page-section").forEach((t=>{const e=t.querySelector(".tb_debug_url-list");if(!e)return;const n=e.querySelectorAll(".tb_debug_url-item");let i=!1;n.forEach((t=>{const e=t.querySelector(".tb_debug_url-status"),n=this.shouldShowUrlItem(e);t.classList.toggle("hidden",!n),n&&(i=!0)})),t.classList.toggle("hidden",!i)}))}shouldShowUrlItem(t){var e,n;return!t||null===this.activeFilter||("Successful"===this.activeFilter?t.classList.contains("tb_debug_status-200"):"Failed"!==this.activeFilter||Number(null===(e=t.textContent)||void 0===e?void 0:e.split(" ")[0])>=400||0==Number(null===(n=t.textContent)||void 0===n?void 0:n.split(" ")[0]))}debugPageSections(){const t=document.createElement("div");return t.classList.add("tb_debug_page-sections"),this.debugResults.Pages.forEach((e=>{const n=this.debugPageSection(e);t.appendChild(n)})),t}debugPageSection(t){const e=document.createElement("div");e.classList.add("tb_debug_page-section");const n=document.createElement("div");n.classList.add("tb_debug_page-title"),n.innerText=t.Page,e.appendChild(n);const i=this.createUrlList(t.UrlList);return e.appendChild(i),e}createUrlList(t){const e=document.createElement("div");return e.classList.add("tb_debug_url-list"),t.forEach(((t,n)=>{const i=this.createUrlItem(t);e.appendChild(i)})),e}createUrlItem(t){const e=document.createElement("div");return e.classList.add("tb_debug_url-item"),e.innerHTML=`\n            <details>\n                <summary class="tb_debug_url-header">\n                    <div class="tb_debug_url-text">${w(t.Url,70)}</div>\n                    <div class="tb_debug_url-status tb_debug_status-${t.StatusCode}">${t.StatusCode} ${w(t.StatusMessage,10)}</div>\n                </summary>\n                <div class="tb_debug_details-content">\n                    <strong>Full URL:</strong> ${t.Url}\n                    <br><strong>Status Code:</strong> ${t.StatusCode}\n                    <br><strong>Status Message:</strong> ${t.StatusMessage}\n                    ${t.StatusCode>=400||0==t.StatusCode?`${this.getAffectedTiles(t)}`:""}\n                </div>\n            </details>\n        `,e}getAffectedTiles(t){return"Tile"===t.AffectedType?`<br><strong>Affected Tile:</strong> <div class="tb_debug-badge">${t.AffectedName}</div>`:"Cta"===t.AffectedType?`<br><strong>Affected Call to Action: </strong><div class="tb_debug-badge">${t.AffectedName}</div>`:"Content"===t.AffectedType?`<br><strong>Affected Content: </strong><div class="tb_debug-badge">${t.AffectedName}</div>`:""}buildDebugUI(){return this.container.appendChild(this.debugSummary()),this.container.appendChild(this.debugPageSections()),this.filterPageSections(),this.container}}var Ua=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class Va{constructor(){this.appVersions=new S}init(){return Ua(this,void 0,void 0,(function*(){const t=yield this.getUrls();console.log("DebugController initialized",t),this.debugProcess(t)}))}debugProcess(t){return Ua(this,void 0,void 0,(function*(){let e;try{const n=new o,i=yield n.debugApp(t);i&&(e=i.DebugResults,console.log("DebugController results",e))}catch(t){console.error(t)}finally{this.displayResults(e)}}))}getUrls(){return Ua(this,void 0,void 0,(function*(){var t,e,n,i;let r=[];const s=(yield this.appVersions.getActiveVersion()).Pages;for(const o of s){let a=[];const l=null===(t=o.PageMenuStructure)||void 0===t?void 0:t.Rows;if(l)for(const t of l){const n=t.Tiles;if(n)for(const t of n)(null===(e=t.Action)||void 0===e?void 0:e.ObjectUrl)&&a.push({url:t.Action.ObjectUrl,affectedType:"Tile",affectedName:t.Name||"Unnamed Tile"}),t.BGImageUrl&&a.push({url:t.BGImageUrl,affectedType:"Tile",affectedName:t.Name||"Unnamed Tile"})}const c=null===(n=o.PageContentStructure)||void 0===n?void 0:n.Content;if(c)for(const t of c)"Image"===t.ContentType&&t.ContentValue&&a.push({url:t.ContentValue,affectedType:"Content",affectedName:t.ContentType||"Unnamed Content"});const d=null===(i=o.PageContentStructure)||void 0===i?void 0:i.Cta;if(d)for(const t of d)t.CtaButtonImgUrl&&a.push({url:t.CtaButtonImgUrl,affectedType:"Cta",affectedName:t.CtaLabel||"Unnamed CTA"}),"SiteUrl"==t.CtaType&&t.CtaAction&&a.push({url:t.CtaAction,affectedType:"Cta",affectedName:t.CtaLabel||"Unnamed CTA"}),"Form"==t.CtaType&&t.CtaAction&&a.push({url:t.CtaAction,affectedType:"Cta",affectedName:t.CtaLabel||"Unnamed CTA"});a.length>0&&r.push({page:o.PageName||`Page-${s.indexOf(o)+1}`,urls:a})}return r}))}displayResults(t){const e=new Ra(t),n=document.getElementById("tb-debugging");n&&(n.innerHTML="",n.appendChild(e.buildDebugUI()))}}var Fa=n(8156),Ha=n.n(Fa),za=n(1448),Ga=n.n(za),Za=n(5364),Wa=n.n(Za),Ka=n(3375),Ja=n.n(Ka);const Ya=(t,e)=>{const n=[],i=[];return n.push(e),e||n.push(t.locale),t.enableFallback&&n.push(t.defaultLocale),n.filter(Boolean).map((t=>t.toString())).forEach((function(e){if(i.includes(e)||i.push(e),!t.enableFallback)return;const n=e.split("-");3===n.length&&i.push(`${n[0]}-${n[1]}`),i.push(n[0])})),Ja()(i)};class Xa{constructor(t){this.i18n=t,this.registry={},this.register("default",Ya)}register(t,e){if("function"!=typeof e){const t=e;e=()=>t}this.registry[t]=e}get(t){let e=this.registry[t]||this.registry[this.i18n.locale]||this.registry.default;return"function"==typeof e&&(e=e(this.i18n,t)),e instanceof Array||(e=[e]),e}}const Qa=function({pluralizer:t,includeZero:e=!0,ordinal:n=!1}){return function(i,r){return[e&&0===r?"zero":"",t(r,n)].filter(Boolean)}}({pluralizer:(t,e)=>{const n=String(t).split("."),i=!n[1],r=Number(n[0])==t,s=r&&n[0].slice(-1),o=r&&n[0].slice(-2);return e?1==s&&11!=o?"one":2==s&&12!=o?"two":3==s&&13!=o?"few":"other":1==t&&i?"one":"other"},includeZero:!0});class tl{constructor(t){this.i18n=t,this.registry={},this.register("default",Qa)}register(t,e){this.registry[t]=e}get(t){return this.registry[t]||this.registry[this.i18n.locale]||this.registry.default}}var el=n(4058),nl=n.n(el);function il(t){return t?Object.keys(t).reduce(((e,n)=>(e[nl()(n)]=t[n],e)),{}):{}}function rl(t){return null!=t}var sl=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ol=Math.ceil,al=Math.floor,ll="[BigNumber Error] ",cl=ll+"Number primitive has more than 15 significant digits: ",dl=1e14,ul=14,hl=9007199254740991,pl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],fl=1e7,gl=1e9;function ml(t){var e=0|t;return t>0||t===e?e:e-1}function vl(t){for(var e,n,i=1,r=t.length,s=t[0]+"";i<r;){for(e=t[i++]+"",n=ul-e.length;n--;e="0"+e);s+=e}for(r=s.length;48===s.charCodeAt(--r););return s.slice(0,r+1||1)}function bl(t,e){var n,i,r=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=r&&!r[0],i=s&&!s[0],n||i)return n?i?0:-a:o;if(o!=a)return o;if(n=o<0,i=l==c,!r||!s)return i?0:!r^n?1:-1;if(!i)return l>c^n?1:-1;for(a=(l=r.length)<(c=s.length)?l:c,o=0;o<a;o++)if(r[o]!=s[o])return r[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function yl(t,e,n,i){if(t<e||t>n||t!==al(t))throw Error(ll+(i||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function wl(t){var e=t.c.length-1;return ml(t.e/ul)==e&&t.c[e]%2!=0}function xl(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function Cl(t,e,n){var i,r;if(e<0){for(r=n+".";++e;r+=n);t=r+t}else if(++e>(i=t.length)){for(r=n,e-=i;--e;r+=n);t+=r}else e<i&&(t=t.slice(0,e)+"."+t.slice(e));return t}var El,Tl=function t(e){var n,i,r,s,o,a,l,c,d,u,h=N.prototype={constructor:N,toString:null,valueOf:null},p=new N(1),f=20,g=4,m=-7,v=21,b=-1e7,y=1e7,w=!1,x=1,C=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},T="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function N(t,e){var n,s,o,a,l,c,d,u,h=this;if(!(h instanceof N))return new N(t,e);if(null==e){if(t&&!0===t._isBigNumber)return h.s=t.s,void(!t.c||t.e>y?h.c=h.e=null:t.e<b?h.c=[h.e=0]:(h.e=t.e,h.c=t.c.slice()));if((c="number"==typeof t)&&0*t==0){if(h.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,l=t;l>=10;l/=10,a++);return void(a>y?h.c=h.e=null:(h.e=a,h.c=[t]))}u=String(t)}else{if(!sl.test(u=String(t)))return r(h,u,c);h.s=45==u.charCodeAt(0)?(u=u.slice(1),-1):1}(a=u.indexOf("."))>-1&&(u=u.replace(".","")),(l=u.search(/e/i))>0?(a<0&&(a=l),a+=+u.slice(l+1),u=u.substring(0,l)):a<0&&(a=u.length)}else{if(yl(e,2,T.length,"Base"),10==e&&A)return _(h=new N(t),f+h.e+1,g);if(u=String(t),c="number"==typeof t){if(0*t!=0)return r(h,u,c,e);if(h.s=1/t<0?(u=u.slice(1),-1):1,N.DEBUG&&u.replace(/^0\.0*|\./,"").length>15)throw Error(cl+t)}else h.s=45===u.charCodeAt(0)?(u=u.slice(1),-1):1;for(n=T.slice(0,e),a=l=0,d=u.length;l<d;l++)if(n.indexOf(s=u.charAt(l))<0){if("."==s){if(l>a){a=d;continue}}else if(!o&&(u==u.toUpperCase()&&(u=u.toLowerCase())||u==u.toLowerCase()&&(u=u.toUpperCase()))){o=!0,l=-1,a=0;continue}return r(h,String(t),c,e)}c=!1,(a=(u=i(u,e,10,h.s)).indexOf("."))>-1?u=u.replace(".",""):a=u.length}for(l=0;48===u.charCodeAt(l);l++);for(d=u.length;48===u.charCodeAt(--d););if(u=u.slice(l,++d)){if(d-=l,c&&N.DEBUG&&d>15&&(t>hl||t!==al(t)))throw Error(cl+h.s*t);if((a=a-l-1)>y)h.c=h.e=null;else if(a<b)h.c=[h.e=0];else{if(h.e=a,h.c=[],l=(a+1)%ul,a<0&&(l+=ul),l<d){for(l&&h.c.push(+u.slice(0,l)),d-=ul;l<d;)h.c.push(+u.slice(l,l+=ul));l=ul-(u=u.slice(l)).length}else l-=d;for(;l--;u+="0");h.c.push(+u)}}else h.c=[h.e=0]}function S(t,e,n,i){var r,s,o,a,l;if(null==n?n=g:yl(n,0,8),!t.c)return t.toString();if(r=t.c[0],o=t.e,null==e)l=vl(t.c),l=1==i||2==i&&(o<=m||o>=v)?xl(l,o):Cl(l,o,"0");else if(s=(t=_(new N(t),e,n)).e,a=(l=vl(t.c)).length,1==i||2==i&&(e<=s||s<=m)){for(;a<e;l+="0",a++);l=xl(l,s)}else if(e-=o,l=Cl(l,s,"0"),s+1>a){if(--e>0)for(l+=".";e--;l+="0");}else if((e+=s-a)>0)for(s+1==a&&(l+=".");e--;l+="0");return t.s<0&&r?"-"+l:l}function L(t,e){for(var n,i,r=1,s=new N(t[0]);r<t.length;r++)(!(i=new N(t[r])).s||(n=bl(s,i))===e||0===n&&s.s===e)&&(s=i);return s}function I(t,e,n){for(var i=1,r=e.length;!e[--r];e.pop());for(r=e[0];r>=10;r/=10,i++);return(n=i+n*ul-1)>y?t.c=t.e=null:n<b?t.c=[t.e=0]:(t.e=n,t.c=e),t}function _(t,e,n,i){var r,s,o,a,l,c,d,u=t.c,h=pl;if(u){t:{for(r=1,a=u[0];a>=10;a/=10,r++);if((s=e-r)<0)s+=ul,o=e,l=u[c=0],d=al(l/h[r-o-1]%10);else if((c=ol((s+1)/ul))>=u.length){if(!i)break t;for(;u.length<=c;u.push(0));l=d=0,r=1,o=(s%=ul)-ul+1}else{for(l=a=u[c],r=1;a>=10;a/=10,r++);d=(o=(s%=ul)-ul+r)<0?0:al(l/h[r-o-1]%10)}if(i=i||e<0||null!=u[c+1]||(o<0?l:l%h[r-o-1]),i=n<4?(d||i)&&(0==n||n==(t.s<0?3:2)):d>5||5==d&&(4==n||i||6==n&&(s>0?o>0?l/h[r-o]:0:u[c-1])%10&1||n==(t.s<0?8:7)),e<1||!u[0])return u.length=0,i?(e-=t.e+1,u[0]=h[(ul-e%ul)%ul],t.e=-e||0):u[0]=t.e=0,t;if(0==s?(u.length=c,a=1,c--):(u.length=c+1,a=h[ul-s],u[c]=o>0?al(l/h[r-o]%h[o])*a:0),i)for(;;){if(0==c){for(s=1,o=u[0];o>=10;o/=10,s++);for(o=u[0]+=a,a=1;o>=10;o/=10,a++);s!=a&&(t.e++,u[0]==dl&&(u[0]=1));break}if(u[c]+=a,u[c]!=dl)break;u[c--]=0,a=1}for(s=u.length;0===u[--s];u.pop());}t.e>y?t.c=t.e=null:t.e<b&&(t.c=[t.e=0])}return t}function O(t){var e,n=t.e;return null===n?t.toString():(e=vl(t.c),e=n<=m||n>=v?xl(e,n):Cl(e,n,"0"),t.s<0?"-"+e:e)}return N.clone=t,N.ROUND_UP=0,N.ROUND_DOWN=1,N.ROUND_CEIL=2,N.ROUND_FLOOR=3,N.ROUND_HALF_UP=4,N.ROUND_HALF_DOWN=5,N.ROUND_HALF_EVEN=6,N.ROUND_HALF_CEIL=7,N.ROUND_HALF_FLOOR=8,N.EUCLID=9,N.config=N.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(ll+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(yl(n=t[e],0,gl,e),f=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(yl(n=t[e],0,8,e),g=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(yl(n[0],-gl,0,e),yl(n[1],0,gl,e),m=n[0],v=n[1]):(yl(n,-gl,gl,e),m=-(v=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)yl(n[0],-gl,-1,e),yl(n[1],1,gl,e),b=n[0],y=n[1];else{if(yl(n,-gl,gl,e),!n)throw Error(ll+e+" cannot be zero: "+n);b=-(y=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(ll+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw w=!n,Error(ll+"crypto unavailable");w=n}else w=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(yl(n=t[e],0,9,e),x=n),t.hasOwnProperty(e="POW_PRECISION")&&(yl(n=t[e],0,gl,e),C=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(ll+e+" not an object: "+n);E=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(ll+e+" invalid: "+n);A="0123456789"==n.slice(0,10),T=n}}return{DECIMAL_PLACES:f,ROUNDING_MODE:g,EXPONENTIAL_AT:[m,v],RANGE:[b,y],CRYPTO:w,MODULO_MODE:x,POW_PRECISION:C,FORMAT:E,ALPHABET:T}},N.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!N.DEBUG)return!0;var e,n,i=t.c,r=t.e,s=t.s;t:if("[object Array]"=={}.toString.call(i)){if((1===s||-1===s)&&r>=-gl&&r<=gl&&r===al(r)){if(0===i[0]){if(0===r&&1===i.length)return!0;break t}if((e=(r+1)%ul)<1&&(e+=ul),String(i[0]).length==e){for(e=0;e<i.length;e++)if((n=i[e])<0||n>=dl||n!==al(n))break t;if(0!==n)return!0}}}else if(null===i&&null===r&&(null===s||1===s||-1===s))return!0;throw Error(ll+"Invalid BigNumber: "+t)},N.maximum=N.max=function(){return L(arguments,-1)},N.minimum=N.min=function(){return L(arguments,1)},N.random=(s=9007199254740992,o=Math.random()*s&2097151?function(){return al(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,i,r,s,a=0,l=[],c=new N(p);if(null==t?t=f:yl(t,0,gl),r=ol(t/ul),w)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(r*=2));a<r;)(s=131072*e[a]+(e[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[a]=n[0],e[a+1]=n[1]):(l.push(s%1e14),a+=2);a=r/2}else{if(!crypto.randomBytes)throw w=!1,Error(ll+"crypto unavailable");for(e=crypto.randomBytes(r*=7);a<r;)(s=281474976710656*(31&e[a])+1099511627776*e[a+1]+4294967296*e[a+2]+16777216*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6])>=9e15?crypto.randomBytes(7).copy(e,a):(l.push(s%1e14),a+=7);a=r/7}if(!w)for(;a<r;)(s=o())<9e15&&(l[a++]=s%1e14);for(r=l[--a],t%=ul,r&&t&&(s=pl[ul-t],l[a]=al(r/s)*s);0===l[a];l.pop(),a--);if(a<0)l=[i=0];else{for(i=-1;0===l[0];l.splice(0,1),i-=ul);for(a=1,s=l[0];s>=10;s/=10,a++);a<ul&&(i-=ul-a)}return c.e=i,c.c=l,c}),N.sum=function(){for(var t=1,e=arguments,n=new N(e[0]);t<e.length;)n=n.plus(e[t++]);return n},i=function(){var t="0123456789";function e(t,e,n,i){for(var r,s,o=[0],a=0,l=t.length;a<l;){for(s=o.length;s--;o[s]*=e);for(o[0]+=i.indexOf(t.charAt(a++)),r=0;r<o.length;r++)o[r]>n-1&&(null==o[r+1]&&(o[r+1]=0),o[r+1]+=o[r]/n|0,o[r]%=n)}return o.reverse()}return function(i,r,s,o,a){var l,c,d,u,h,p,m,v,b=i.indexOf("."),y=f,w=g;for(b>=0&&(u=C,C=0,i=i.replace(".",""),p=(v=new N(r)).pow(i.length-b),C=u,v.c=e(Cl(vl(p.c),p.e,"0"),10,s,t),v.e=v.c.length),d=u=(m=e(i,r,s,a?(l=T,t):(l=t,T))).length;0==m[--u];m.pop());if(!m[0])return l.charAt(0);if(b<0?--d:(p.c=m,p.e=d,p.s=o,m=(p=n(p,v,y,w,s)).c,h=p.r,d=p.e),b=m[c=d+y+1],u=s/2,h=h||c<0||null!=m[c+1],h=w<4?(null!=b||h)&&(0==w||w==(p.s<0?3:2)):b>u||b==u&&(4==w||h||6==w&&1&m[c-1]||w==(p.s<0?8:7)),c<1||!m[0])i=h?Cl(l.charAt(1),-y,l.charAt(0)):l.charAt(0);else{if(m.length=c,h)for(--s;++m[--c]>s;)m[c]=0,c||(++d,m=[1].concat(m));for(u=m.length;!m[--u];);for(b=0,i="";b<=u;i+=l.charAt(m[b++]));i=Cl(i,d,l.charAt(0))}return i}}(),n=function(){function t(t,e,n){var i,r,s,o,a=0,l=t.length,c=e%fl,d=e/fl|0;for(t=t.slice();l--;)a=((r=c*(s=t[l]%fl)+(i=d*s+(o=t[l]/fl|0)*c)%fl*fl+a)/n|0)+(i/fl|0)+d*o,t[l]=r%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,i){var r,s;if(n!=i)s=n>i?1:-1;else for(r=s=0;r<n;r++)if(t[r]!=e[r]){s=t[r]>e[r]?1:-1;break}return s}function n(t,e,n,i){for(var r=0;n--;)t[n]-=r,r=t[n]<e[n]?1:0,t[n]=r*i+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(i,r,s,o,a){var l,c,d,u,h,p,f,g,m,v,b,y,w,x,C,E,T,A=i.s==r.s?1:-1,S=i.c,L=r.c;if(!(S&&S[0]&&L&&L[0]))return new N(i.s&&r.s&&(S?!L||S[0]!=L[0]:L)?S&&0==S[0]||!L?0*A:A/0:NaN);for(m=(g=new N(A)).c=[],A=s+(c=i.e-r.e)+1,a||(a=dl,c=ml(i.e/ul)-ml(r.e/ul),A=A/ul|0),d=0;L[d]==(S[d]||0);d++);if(L[d]>(S[d]||0)&&c--,A<0)m.push(1),u=!0;else{for(x=S.length,E=L.length,d=0,A+=2,(h=al(a/(L[0]+1)))>1&&(L=t(L,h,a),S=t(S,h,a),E=L.length,x=S.length),w=E,b=(v=S.slice(0,E)).length;b<E;v[b++]=0);T=L.slice(),T=[0].concat(T),C=L[0],L[1]>=a/2&&C++;do{if(h=0,(l=e(L,v,E,b))<0){if(y=v[0],E!=b&&(y=y*a+(v[1]||0)),(h=al(y/C))>1)for(h>=a&&(h=a-1),f=(p=t(L,h,a)).length,b=v.length;1==e(p,v,f,b);)h--,n(p,E<f?T:L,f,a),f=p.length,l=1;else 0==h&&(l=h=1),f=(p=L.slice()).length;if(f<b&&(p=[0].concat(p)),n(v,p,b,a),b=v.length,-1==l)for(;e(L,v,E,b)<1;)h++,n(v,E<b?T:L,b,a),b=v.length}else 0===l&&(h++,v=[0]);m[d++]=h,v[0]?v[b++]=S[w]||0:(v=[S[w]],b=1)}while((w++<x||null!=v[0])&&A--);u=null!=v[0],m[0]||m.splice(0,1)}if(a==dl){for(d=1,A=m[0];A>=10;A/=10,d++);_(g,s+(g.e=d+c*ul-1)+1,o,u)}else g.e=c,g.r=+u;return g}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,l=/^([^.]+)\.$/,c=/^\.([^.]+)$/,d=/^-?(Infinity|NaN)$/,u=/^\s*\+(?=[\w.])|^\s+|\s+$/g,r=function(t,e,n,i){var r,s=n?e:e.replace(u,"");if(d.test(s))t.s=isNaN(s)?null:s<0?-1:1;else{if(!n&&(s=s.replace(a,(function(t,e,n){return r="x"==(n=n.toLowerCase())?16:"b"==n?2:8,i&&i!=r?t:e})),i&&(r=i,s=s.replace(l,"$1").replace(c,"0.$1")),e!=s))return new N(s,r);if(N.DEBUG)throw Error(ll+"Not a"+(i?" base "+i:"")+" number: "+e);t.s=null}t.c=t.e=null},h.absoluteValue=h.abs=function(){var t=new N(this);return t.s<0&&(t.s=1),t},h.comparedTo=function(t,e){return bl(this,new N(t,e))},h.decimalPlaces=h.dp=function(t,e){var n,i,r,s=this;if(null!=t)return yl(t,0,gl),null==e?e=g:yl(e,0,8),_(new N(s),t+s.e+1,e);if(!(n=s.c))return null;if(i=((r=n.length-1)-ml(this.e/ul))*ul,r=n[r])for(;r%10==0;r/=10,i--);return i<0&&(i=0),i},h.dividedBy=h.div=function(t,e){return n(this,new N(t,e),f,g)},h.dividedToIntegerBy=h.idiv=function(t,e){return n(this,new N(t,e),0,1)},h.exponentiatedBy=h.pow=function(t,e){var n,i,r,s,o,a,l,c,d=this;if((t=new N(t)).c&&!t.isInteger())throw Error(ll+"Exponent not an integer: "+O(t));if(null!=e&&(e=new N(e)),o=t.e>14,!d.c||!d.c[0]||1==d.c[0]&&!d.e&&1==d.c.length||!t.c||!t.c[0])return c=new N(Math.pow(+O(d),o?t.s*(2-wl(t)):+O(t))),e?c.mod(e):c;if(a=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new N(NaN);(i=!a&&d.isInteger()&&e.isInteger())&&(d=d.mod(e))}else{if(t.e>9&&(d.e>0||d.e<-1||(0==d.e?d.c[0]>1||o&&d.c[1]>=24e7:d.c[0]<8e13||o&&d.c[0]<=9999975e7)))return s=d.s<0&&wl(t)?-0:0,d.e>-1&&(s=1/s),new N(a?1/s:s);C&&(s=ol(C/ul+2))}for(o?(n=new N(.5),a&&(t.s=1),l=wl(t)):l=(r=Math.abs(+O(t)))%2,c=new N(p);;){if(l){if(!(c=c.times(d)).c)break;s?c.c.length>s&&(c.c.length=s):i&&(c=c.mod(e))}if(r){if(0===(r=al(r/2)))break;l=r%2}else if(_(t=t.times(n),t.e+1,1),t.e>14)l=wl(t);else{if(0==(r=+O(t)))break;l=r%2}d=d.times(d),s?d.c&&d.c.length>s&&(d.c.length=s):i&&(d=d.mod(e))}return i?c:(a&&(c=p.div(c)),e?c.mod(e):s?_(c,C,g,void 0):c)},h.integerValue=function(t){var e=new N(this);return null==t?t=g:yl(t,0,8),_(e,e.e+1,t)},h.isEqualTo=h.eq=function(t,e){return 0===bl(this,new N(t,e))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(t,e){return bl(this,new N(t,e))>0},h.isGreaterThanOrEqualTo=h.gte=function(t,e){return 1===(e=bl(this,new N(t,e)))||0===e},h.isInteger=function(){return!!this.c&&ml(this.e/ul)>this.c.length-2},h.isLessThan=h.lt=function(t,e){return bl(this,new N(t,e))<0},h.isLessThanOrEqualTo=h.lte=function(t,e){return-1===(e=bl(this,new N(t,e)))||0===e},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(t,e){var n,i,r,s,o=this,a=o.s;if(e=(t=new N(t,e)).s,!a||!e)return new N(NaN);if(a!=e)return t.s=-e,o.plus(t);var l=o.e/ul,c=t.e/ul,d=o.c,u=t.c;if(!l||!c){if(!d||!u)return d?(t.s=-e,t):new N(u?o:NaN);if(!d[0]||!u[0])return u[0]?(t.s=-e,t):new N(d[0]?o:3==g?-0:0)}if(l=ml(l),c=ml(c),d=d.slice(),a=l-c){for((s=a<0)?(a=-a,r=d):(c=l,r=u),r.reverse(),e=a;e--;r.push(0));r.reverse()}else for(i=(s=(a=d.length)<(e=u.length))?a:e,a=e=0;e<i;e++)if(d[e]!=u[e]){s=d[e]<u[e];break}if(s&&(r=d,d=u,u=r,t.s=-t.s),(e=(i=u.length)-(n=d.length))>0)for(;e--;d[n++]=0);for(e=dl-1;i>a;){if(d[--i]<u[i]){for(n=i;n&&!d[--n];d[n]=e);--d[n],d[i]+=dl}d[i]-=u[i]}for(;0==d[0];d.splice(0,1),--c);return d[0]?I(t,d,c):(t.s=3==g?-1:1,t.c=[t.e=0],t)},h.modulo=h.mod=function(t,e){var i,r,s=this;return t=new N(t,e),!s.c||!t.s||t.c&&!t.c[0]?new N(NaN):!t.c||s.c&&!s.c[0]?new N(s):(9==x?(r=t.s,t.s=1,i=n(s,t,0,3),t.s=r,i.s*=r):i=n(s,t,0,x),(t=s.minus(i.times(t))).c[0]||1!=x||(t.s=s.s),t)},h.multipliedBy=h.times=function(t,e){var n,i,r,s,o,a,l,c,d,u,h,p,f,g,m,v=this,b=v.c,y=(t=new N(t,e)).c;if(!(b&&y&&b[0]&&y[0]))return!v.s||!t.s||b&&!b[0]&&!y||y&&!y[0]&&!b?t.c=t.e=t.s=null:(t.s*=v.s,b&&y?(t.c=[0],t.e=0):t.c=t.e=null),t;for(i=ml(v.e/ul)+ml(t.e/ul),t.s*=v.s,(l=b.length)<(u=y.length)&&(f=b,b=y,y=f,r=l,l=u,u=r),r=l+u,f=[];r--;f.push(0));for(g=dl,m=fl,r=u;--r>=0;){for(n=0,h=y[r]%m,p=y[r]/m|0,s=r+(o=l);s>r;)n=((c=h*(c=b[--o]%m)+(a=p*c+(d=b[o]/m|0)*h)%m*m+f[s]+n)/g|0)+(a/m|0)+p*d,f[s--]=c%g;f[s]=n}return n?++i:f.splice(0,1),I(t,f,i)},h.negated=function(){var t=new N(this);return t.s=-t.s||null,t},h.plus=function(t,e){var n,i=this,r=i.s;if(e=(t=new N(t,e)).s,!r||!e)return new N(NaN);if(r!=e)return t.s=-e,i.minus(t);var s=i.e/ul,o=t.e/ul,a=i.c,l=t.c;if(!s||!o){if(!a||!l)return new N(r/0);if(!a[0]||!l[0])return l[0]?t:new N(a[0]?i:0*r)}if(s=ml(s),o=ml(o),a=a.slice(),r=s-o){for(r>0?(o=s,n=l):(r=-r,n=a),n.reverse();r--;n.push(0));n.reverse()}for((r=a.length)-(e=l.length)<0&&(n=l,l=a,a=n,e=r),r=0;e;)r=(a[--e]=a[e]+l[e]+r)/dl|0,a[e]=dl===a[e]?0:a[e]%dl;return r&&(a=[r].concat(a),++o),I(t,a,o)},h.precision=h.sd=function(t,e){var n,i,r,s=this;if(null!=t&&t!==!!t)return yl(t,1,gl),null==e?e=g:yl(e,0,8),_(new N(s),t,e);if(!(n=s.c))return null;if(i=(r=n.length-1)*ul+1,r=n[r]){for(;r%10==0;r/=10,i--);for(r=n[0];r>=10;r/=10,i++);}return t&&s.e+1>i&&(i=s.e+1),i},h.shiftedBy=function(t){return yl(t,-9007199254740991,hl),this.times("1e"+t)},h.squareRoot=h.sqrt=function(){var t,e,i,r,s,o=this,a=o.c,l=o.s,c=o.e,d=f+4,u=new N("0.5");if(1!==l||!a||!a[0])return new N(!l||l<0&&(!a||a[0])?NaN:a?o:1/0);if(0==(l=Math.sqrt(+O(o)))||l==1/0?(((e=vl(a)).length+c)%2==0&&(e+="0"),l=Math.sqrt(+e),c=ml((c+1)/2)-(c<0||c%2),i=new N(e=l==1/0?"5e"+c:(e=l.toExponential()).slice(0,e.indexOf("e")+1)+c)):i=new N(l+""),i.c[0])for((l=(c=i.e)+d)<3&&(l=0);;)if(s=i,i=u.times(s.plus(n(o,s,d,1))),vl(s.c).slice(0,l)===(e=vl(i.c)).slice(0,l)){if(i.e<c&&--l,"9999"!=(e=e.slice(l-3,l+1))&&(r||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(_(i,i.e+f+2,1),t=!i.times(i).eq(o));break}if(!r&&(_(s,s.e+f+2,0),s.times(s).eq(o))){i=s;break}d+=4,l+=4,r=1}return _(i,i.e+f+1,g,t)},h.toExponential=function(t,e){return null!=t&&(yl(t,0,gl),t++),S(this,t,e,1)},h.toFixed=function(t,e){return null!=t&&(yl(t,0,gl),t=t+this.e+1),S(this,t,e)},h.toFormat=function(t,e,n){var i,r=this;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=E;else if("object"!=typeof n)throw Error(ll+"Argument not an object: "+n);if(i=r.toFixed(t,e),r.c){var s,o=i.split("."),a=+n.groupSize,l=+n.secondaryGroupSize,c=n.groupSeparator||"",d=o[0],u=o[1],h=r.s<0,p=h?d.slice(1):d,f=p.length;if(l&&(s=a,a=l,l=s,f-=s),a>0&&f>0){for(s=f%a||a,d=p.substr(0,s);s<f;s+=a)d+=c+p.substr(s,a);l>0&&(d+=c+p.slice(s)),h&&(d="-"+d)}i=u?d+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?u.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):u):d}return(n.prefix||"")+i+(n.suffix||"")},h.toFraction=function(t){var e,i,r,s,o,a,l,c,d,u,h,f,m=this,v=m.c;if(null!=t&&(!(l=new N(t)).isInteger()&&(l.c||1!==l.s)||l.lt(p)))throw Error(ll+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+O(l));if(!v)return new N(m);for(e=new N(p),d=i=new N(p),r=c=new N(p),f=vl(v),o=e.e=f.length-m.e-1,e.c[0]=pl[(a=o%ul)<0?ul+a:a],t=!t||l.comparedTo(e)>0?o>0?e:d:l,a=y,y=1/0,l=new N(f),c.c[0]=0;u=n(l,e,0,1),1!=(s=i.plus(u.times(r))).comparedTo(t);)i=r,r=s,d=c.plus(u.times(s=d)),c=s,e=l.minus(u.times(s=e)),l=s;return s=n(t.minus(i),r,0,1),c=c.plus(s.times(d)),i=i.plus(s.times(r)),c.s=d.s=m.s,h=n(d,r,o*=2,g).minus(m).abs().comparedTo(n(c,i,o,g).minus(m).abs())<1?[d,r]:[c,i],y=a,h},h.toNumber=function(){return+O(this)},h.toPrecision=function(t,e){return null!=t&&yl(t,1,gl),S(this,t,e,2)},h.toString=function(t){var e,n=this,r=n.s,s=n.e;return null===s?r?(e="Infinity",r<0&&(e="-"+e)):e="NaN":(null==t?e=s<=m||s>=v?xl(vl(n.c),s):Cl(vl(n.c),s,"0"):10===t&&A?e=Cl(vl((n=_(new N(n),f+s+1,g)).c),n.e,"0"):(yl(t,2,T.length,"Base"),e=i(Cl(vl(n.c),s,"0"),10,t,r,!0)),r<0&&n.c[0]&&(e="-"+e)),e},h.valueOf=h.toJSON=function(){return O(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=e&&N.set(e),N}();function Al(t){var e;return null!==(e=El[t])&&void 0!==e?e:El.default}!function(t){t[t.up=Tl.ROUND_UP]="up",t[t.down=Tl.ROUND_DOWN]="down",t[t.truncate=Tl.ROUND_DOWN]="truncate",t[t.halfUp=Tl.ROUND_HALF_UP]="halfUp",t[t.default=Tl.ROUND_HALF_UP]="default",t[t.halfDown=Tl.ROUND_HALF_DOWN]="halfDown",t[t.halfEven=Tl.ROUND_HALF_EVEN]="halfEven",t[t.banker=Tl.ROUND_HALF_EVEN]="banker",t[t.ceiling=Tl.ROUND_CEIL]="ceiling",t[t.ceil=Tl.ROUND_CEIL]="ceil",t[t.floor=Tl.ROUND_FLOOR]="floor"}(El||(El={}));var Nl=n(2493),Sl=n.n(Nl);function Ll(t,e){const n=function(t,{precision:e,significant:n}){return n&&null!==e&&e>0?e-function(t){return t.isZero()?1:Math.floor(Math.log10(t.abs().toNumber())+1)}(t):e}(t,e);if(null===n)return t.toString();const i=Al(e.roundMode);if(n>=0)return t.toFixed(n,i);const r=Math.pow(10,Math.abs(n));return(t=new Tl(t.div(r).toFixed(0,i)).times(r)).toString()}function Il(t,e){var n,i,r;const s=new Tl(t);if(e.raise&&!s.isFinite())throw new Error(`"${t}" is not a valid numeric value`);const o=Ll(s,e),a=new Tl(o),l=a.lt(0),c=a.isZero();let[d,u]=o.split(".");const h=[];let p;const f=null!==(n=e.format)&&void 0!==n?n:"%n",g=null!==(i=e.negativeFormat)&&void 0!==i?i:`-${f}`,m=l&&!c?g:f;for(d=d.replace("-","");d.length>0;)h.unshift(d.substr(Math.max(0,d.length-3),3)),d=d.substr(0,d.length-3);return d=h.join(""),p=h.join(e.delimiter),u=e.significant?function({significand:t,whole:e,precision:n}){if("0"===e||null===n)return t;const i=Math.max(0,n-e.length);return(null!=t?t:"").substr(0,i)}({whole:d,significand:u,precision:e.precision}):null!=u?u:Sl()("0",null!==(r=e.precision)&&void 0!==r?r:0),e.stripInsignificantZeros&&u&&(u=u.replace(/0+$/,"")),s.isNaN()&&(p=t.toString()),u&&s.isFinite()&&(p+=(e.separator||".")+u),function(t,{formattedNumber:e,unit:n}){return t.replace("%n",e).replace("%u",n)}(m,{formattedNumber:p,unit:e.unit})}function _l(t,e,n){let i="";return(e instanceof String||"string"==typeof e)&&(i=e),e instanceof Array&&(i=e.join(t.defaultSeparator)),n.scope&&(i=[n.scope,i].join(t.defaultSeparator)),i}function Ol(t){var e,n;if(null===t)return"null";const i=typeof t;return"object"!==i?i:(null===(n=null===(e=null==t?void 0:t.constructor)||void 0===e?void 0:e.name)||void 0===n?void 0:n.toLowerCase())||"object"}function kl(t,e,n){n=Object.keys(n).reduce(((e,i)=>(e[t.transformKey(i)]=n[i],e)),{});const i=e.match(t.placeholder);if(!i)return e;for(;i.length;){let r;const s=i.shift(),o=s.replace(t.placeholder,"$1");r=rl(n[o])?n[o].toString().replace(/\$/gm,"_#$#_"):o in n?t.nullPlaceholder(t,s,e,n):t.missingPlaceholder(t,s,e,n);const a=new RegExp(s.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"),"g");e=e.replace(a,r)}return e.replace(/_#\$#_/g,"$")}function jl(t,e,n={}){const i="locale"in(n=Object.assign({},n))?n.locale:t.locale,r=Ol(i),s=t.locales.get("string"===r?i:typeof i).slice(),o=_l(t,e,n).split(t.defaultSeparator).map((e=>t.transformKey(e))),a=s.map((e=>o.reduce(((t,e)=>t&&t[e]),t.translations[e])));return a.push(n.defaultValue),a.find((t=>rl(t)))}var Pl=n(3031),Ml=n.n(Pl),ql=n(7248);const Bl={0:"unit",1:"ten",2:"hundred",3:"thousand",6:"million",9:"billion",12:"trillion",15:"quadrillion","-1":"deci","-2":"centi","-3":"mili","-6":"micro","-9":"nano","-12":"pico","-15":"femto"},Dl=n.n(ql)()(Object.values(Bl),Object.keys(Bl).map((t=>parseInt(t,10))));const $l=["byte","kb","mb","gb","tb","pb","eb"];function Rl(t){if(t instanceof Date)return t;if("number"==typeof t){const e=new Date;return e.setTime(t),e}const e=new String(t).match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})(?:[.,](\d{1,3}))?)?(Z|\+00:?00)?/);if(e){const t=e.slice(1,8).map((t=>parseInt(t,10)||0));t[1]-=1;const[n,i,r,s,o,a,l]=t;return e[8]?new Date(Date.UTC(n,i,r,s,o,a,l)):new Date(n,i,r,s,o,a,l)}t.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)&&(new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")));const n=new Date;return n.setTime(Date.parse(t)),n}function Ul({i18n:t,count:e,scope:n,options:i,baseScope:r}){let s,o;if(i=Object.assign({},i),s="object"==typeof n&&n?n:jl(t,n,i),!s)return t.missingTranslation.get(n,i);const a=t.pluralization.get(i.locale)(t,e),l=[];for(;a.length;){const t=a.shift();if(rl(s[t])){o=s[t];break}l.push(t)}return rl(o)?(i.count=e,t.interpolate(t,o,i)):t.missingTranslation.get(r.split(t.defaultSeparator).concat([l[0]]),i)}const Vl={meridian:{am:"AM",pm:"PM"},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};var Fl=n(3181),Hl=n.n(Fl);const zl=(t,e,n)=>n>=t&&n<=e,Gl=function(t,e){e instanceof Array&&(e=e.join(t.defaultSeparator));const n=e.split(t.defaultSeparator).slice(-1)[0];return t.missingTranslationPrefix+n.replace("_"," ").replace(/([a-z])([A-Z])/g,((t,e,n)=>`${e} ${n.toLowerCase()}`))},Zl=(t,e,n)=>{const i=_l(t,e,n),r="locale"in n?n.locale:t.locale,s=Ol(r);return`[missing "${["string"==s?r:s,i].join(t.defaultSeparator)}" translation]`},Wl=(t,e,n)=>{const i=_l(t,e,n),r=[t.locale,i].join(t.defaultSeparator);throw new Error(`Missing translation: ${r}`)};class Kl{constructor(t){this.i18n=t,this.registry={},this.register("guess",Gl),this.register("message",Zl),this.register("error",Wl)}register(t,e){this.registry[t]=e}get(t,e){var n;return this.registry[null!==(n=e.missingBehavior)&&void 0!==n?n:this.i18n.missingBehavior](this.i18n,t,e)}}const Jl={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,enableFallback:!1,missingBehavior:"message",missingTranslationPrefix:"",missingPlaceholder:(t,e)=>`[missing "${e}" value]`,nullPlaceholder:(t,e,n,i)=>t.missingPlaceholder(t,e,n,i),transformKey:t=>t},Yl=new class{constructor(t={},e={}){this._locale=Jl.locale,this._defaultLocale=Jl.defaultLocale,this._version=0,this.onChangeHandlers=[],this.translations={},this.t=this.translate,this.p=this.pluralize,this.l=this.localize,this.distanceOfTimeInWords=this.timeAgoInWords;const{locale:n,enableFallback:i,missingBehavior:r,missingTranslationPrefix:s,missingPlaceholder:o,nullPlaceholder:a,defaultLocale:l,defaultSeparator:c,placeholder:d,transformKey:u}=Object.assign(Object.assign({},Jl),e);this.locale=n,this.defaultLocale=l,this.defaultSeparator=c,this.enableFallback=i,this.locale=n,this.missingBehavior=r,this.missingTranslationPrefix=s,this.missingPlaceholder=o,this.nullPlaceholder=a,this.placeholder=d,this.pluralization=new tl(this),this.locales=new Xa(this),this.missingTranslation=new Kl(this),this.transformKey=u,this.interpolate=kl,this.store(t)}store(t){Wa()(this.translations,t),this.hasChanged()}get locale(){return this._locale||this.defaultLocale||"en"}set locale(t){if("string"!=typeof t)throw new Error(`Expected newLocale to be a string; got ${Ol(t)}`);const e=this._locale!==t;this._locale=t,e&&this.hasChanged()}get defaultLocale(){return this._defaultLocale||"en"}set defaultLocale(t){if("string"!=typeof t)throw new Error(`Expected newLocale to be a string; got ${Ol(t)}`);const e=this._defaultLocale!==t;this._defaultLocale=t,e&&this.hasChanged()}translate(t,e){const n=function(t,e,n){let i=[{scope:e}];if(rl(n.defaults)&&(i=i.concat(n.defaults)),rl(n.defaultValue)){const r="function"==typeof n.defaultValue?n.defaultValue(t,e,n):n.defaultValue;i.push({message:r}),delete n.defaultValue}return i}(this,t,e=Object.assign({},e));let i;return n.some((t=>(rl(t.scope)?i=jl(this,t.scope,e):rl(t.message)&&(i=t.message),null!=i)))?("string"==typeof i?i=this.interpolate(this,i,e):"object"==typeof i&&i&&rl(e.count)&&(i=Ul({i18n:this,count:e.count||0,scope:i,options:e,baseScope:_l(this,t,e)})),e&&i instanceof Array&&(i=i.map((t=>"string"==typeof t?kl(this,t,e):t))),i):this.missingTranslation.get(t,e)}pluralize(t,e,n){return Ul({i18n:this,count:t,scope:e,options:Object.assign({},n),baseScope:_l(this,e,null!=n?n:{})})}localize(t,e,n){if(n=Object.assign({},n),null==e)return"";switch(t){case"currency":return this.numberToCurrency(e);case"number":return Il(e,Object.assign({delimiter:",",precision:3,separator:".",significant:!1,stripInsignificantZeros:!1},jl(this,"number.format")));case"percentage":return this.numberToPercentage(e);default:{let i;return i=t.match(/^(date|time)/)?this.toTime(t,e):e.toString(),kl(this,i,n)}}}toTime(t,e){const n=Rl(e),i=jl(this,t);return n.toString().match(/invalid/i)?n.toString():i?this.strftime(n,i):n.toString()}numberToCurrency(t,e={}){return Il(t,Object.assign(Object.assign(Object.assign({delimiter:",",format:"%u%n",precision:2,separator:".",significant:!1,stripInsignificantZeros:!1,unit:"$"},il(this.get("number.format"))),il(this.get("number.currency.format"))),e))}numberToPercentage(t,e={}){return Il(t,Object.assign(Object.assign(Object.assign({delimiter:"",format:"%n%",precision:3,stripInsignificantZeros:!1,separator:".",significant:!1},il(this.get("number.format"))),il(this.get("number.percentage.format"))),e))}numberToHumanSize(t,e={}){return function(t,e,n){const i=Al(n.roundMode),r=1024,s=new Tl(e).abs(),o=s.lt(r);let a;const l=((t,e)=>{const n=e.length-1,i=new Tl(Math.log(t.toNumber())).div(Math.log(r)).integerValue(Tl.ROUND_DOWN).toNumber();return Math.min(n,i)})(s,$l);a=o?s.integerValue():new Tl(Ll(s.div(Math.pow(r,l)),{significant:n.significant,precision:n.precision,roundMode:n.roundMode}));const c=t.translate("number.human.storage_units.format",{defaultValue:"%n %u"}),d=t.translate(`number.human.storage_units.units.${o?"byte":$l[l]}`,{count:s.integerValue().toNumber()});let u=a.toFixed(n.precision,i);return n.stripInsignificantZeros&&(u=u.replace(/(\..*?)0+$/,"$1").replace(/\.$/,"")),c.replace("%n",u).replace("%u",d)}(this,t,Object.assign(Object.assign(Object.assign({delimiter:"",precision:3,significant:!0,stripInsignificantZeros:!0,units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},il(this.get("number.human.format"))),il(this.get("number.human.storage_units"))),e))}numberToHuman(t,e={}){return function(t,e,n){const i={roundMode:n.roundMode,precision:n.precision,significant:n.significant};let r;if("string"===Ol(n.units)){const e=n.units;if(r=jl(t,e),!r)throw new Error(`The scope "${t.locale}${t.defaultSeparator}${_l(t,e,{})}" couldn't be found`)}else r=n.units;let s=Ll(new Tl(e),i);const o=((t,e)=>{const n=t.isZero()?0:Math.floor(Math.log10(t.abs().toNumber()));return(t=>Ml()(Object.keys(t).map((t=>Dl[t])),(t=>-1*t)))(e).find((t=>n>=t))||0})(new Tl(s),r),a=((t,e)=>t[Bl[e.toString()]]||"")(r,o);if(s=Ll(new Tl(s).div(Math.pow(10,o)),i),n.stripInsignificantZeros){let[t,e]=s.split(".");e=(e||"").replace(/0+$/,""),s=t,e&&(s+=`${n.separator}${e}`)}return n.format.replace("%n",s||"0").replace("%u",a).trim()}(this,t,Object.assign(Object.assign(Object.assign({delimiter:"",separator:".",precision:3,significant:!0,stripInsignificantZeros:!0,format:"%n %u",roundMode:"default",units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},il(this.get("number.human.format"))),il(this.get("number.human.decimal_units"))),e))}numberToRounded(t,e){return Il(t,Object.assign({unit:"",precision:3,significant:!1,separator:".",delimiter:"",stripInsignificantZeros:!1},e))}numberToDelimited(t,e={}){return function(t,e){const n=new Tl(t);if(!n.isFinite())return t.toString();if(!e.delimiterPattern.global)throw new Error(`options.delimiterPattern must be a global regular expression; received ${e.delimiterPattern}`);let[i,r]=n.toString().split(".");return i=i.replace(e.delimiterPattern,(t=>`${t}${e.delimiter}`)),[i,r].filter(Boolean).join(e.separator)}(t,Object.assign({delimiterPattern:/(\d)(?=(\d\d\d)+(?!\d))/g,delimiter:",",separator:"."},e))}withLocale(t,e){return n=this,i=void 0,s=function*(){const n=this.locale;try{this.locale=t,yield e()}finally{this.locale=n}},new((r=void 0)||(r=Promise))((function(t,e){function o(t){try{l(s.next(t))}catch(t){e(t)}}function a(t){try{l(s.throw(t))}catch(t){e(t)}}function l(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,a)}l((s=s.apply(n,i||[])).next())}));var n,i,r,s}strftime(t,e,n={}){return function(t,e,n={}){const{abbrDayNames:i,dayNames:r,abbrMonthNames:s,monthNames:o,meridian:a,utc:l}=Object.assign(Object.assign({},Vl),n);if(isNaN(t.getTime()))throw new Error("strftime() requires a valid date object, but received an invalid date.");const c=l?t.getUTCDay():t.getDay(),d=l?t.getUTCDate():t.getDate(),u=l?t.getUTCFullYear():t.getFullYear(),h=(l?t.getUTCMonth():t.getMonth())+1,p=l?t.getUTCHours():t.getHours();let f=p;const g=p>11?"pm":"am",m=l?t.getUTCSeconds():t.getSeconds(),v=l?t.getUTCMinutes():t.getMinutes(),b=l?0:t.getTimezoneOffset(),y=Math.floor(Math.abs(b/60)),w=Math.abs(b)-60*y,x=(b>0?"-":"+")+(y.toString().length<2?"0"+y:y)+(w.toString().length<2?"0"+w:w);return f>12?f-=12:0===f&&(f=12),(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace("%a",i[c])).replace("%A",r[c])).replace("%b",s[h])).replace("%B",o[h])).replace("%d",d.toString().padStart(2,"0"))).replace("%e",d.toString())).replace("%-d",d.toString())).replace("%H",p.toString().padStart(2,"0"))).replace("%-H",p.toString())).replace("%k",p.toString())).replace("%I",f.toString().padStart(2,"0"))).replace("%-I",f.toString())).replace("%l",f.toString())).replace("%m",h.toString().padStart(2,"0"))).replace("%-m",h.toString())).replace("%M",v.toString().padStart(2,"0"))).replace("%-M",v.toString())).replace("%p",a[g])).replace("%P",a[g].toLowerCase())).replace("%S",m.toString().padStart(2,"0"))).replace("%-S",m.toString())).replace("%w",c.toString())).replace("%y",u.toString().padStart(2,"0").substr(-2))).replace("%-y",u.toString().padStart(2,"0").substr(-2).replace(/^0+/,""))).replace("%Y",u.toString())).replace(/%z/i,x)}(t,e,Object.assign(Object.assign(Object.assign({},il(jl(this,"date"))),{meridian:{am:jl(this,"time.am")||"AM",pm:jl(this,"time.pm")||"PM"}}),n))}update(t,e,n={strict:!1}){if(n.strict&&!Ga()(this.translations,t))throw new Error(`The path "${t}" is not currently defined`);const i=Ha()(this.translations,t),r=Ol(i),s=Ol(e);if(n.strict&&r!==s)throw new Error(`The current type for "${t}" is "${r}", but you're trying to override it with "${s}"`);let o;o="object"===s?Object.assign(Object.assign({},i),e):e;const a=t.split(this.defaultSeparator),l=a.pop();let c=this.translations;for(const t of a)c[t]||(c[t]={}),c=c[t];c[l]=o,this.hasChanged()}toSentence(t,e={}){const{wordsConnector:n,twoWordsConnector:i,lastWordConnector:r}=Object.assign(Object.assign({wordsConnector:", ",twoWordsConnector:" and ",lastWordConnector:", and "},il(jl(this,"support.array"))),e),s=t.length;switch(s){case 0:return"";case 1:return`${t[0]}`;case 2:return t.join(i);default:return[t.slice(0,s-1).join(n),r,t[s-1]].join("")}}timeAgoInWords(t,e,n={}){return function(t,e,n,i={}){const r=i.scope||"datetime.distance_in_words",s=(e,n=0)=>t.t(e,{count:n,scope:r});e=Rl(e),n=Rl(n);let o=e.getTime()/1e3,a=n.getTime()/1e3;o>a&&([e,n,o,a]=[n,e,a,o]);const l=Math.round(a-o),c=Math.round((a-o)/60),d=c/60/24,u=Math.round(c/60),h=Math.round(d),p=Math.round(h/30);if(zl(0,1,c))return i.includeSeconds?zl(0,4,l)?s("less_than_x_seconds",5):zl(5,9,l)?s("less_than_x_seconds",10):zl(10,19,l)?s("less_than_x_seconds",20):zl(20,39,l)?s("half_a_minute"):zl(40,59,l)?s("less_than_x_minutes",1):s("x_minutes",1):0===c?s("less_than_x_minutes",1):s("x_minutes",c);if(zl(2,44,c))return s("x_minutes",c);if(zl(45,89,c))return s("about_x_hours",1);if(zl(90,1439,c))return s("about_x_hours",u);if(zl(1440,2519,c))return s("x_days",1);if(zl(2520,43199,c))return s("x_days",h);if(zl(43200,86399,c))return s("about_x_months",Math.round(c/43200));if(zl(86400,525599,c))return s("x_months",p);let f=e.getFullYear();e.getMonth()+1>=3&&(f+=1);let g=n.getFullYear();n.getMonth()+1<3&&(g-=1);const m=525600,v=c-1440*(f>g?0:Hl()(f,g).filter((t=>1==new Date(t,1,29).getMonth())).length),b=Math.trunc(v/m),y=parseFloat((v/m-b).toPrecision(3));return y<.25?s("about_x_years",b):y<.75?s("over_x_years",b):s("almost_x_years",b+1)}(this,t,e,n)}onChange(t){return this.onChangeHandlers.push(t),()=>{this.onChangeHandlers.splice(this.onChangeHandlers.indexOf(t),1)}}get version(){return this._version}formatNumber(t,e={}){return Il(t,e=Object.assign(Object.assign({delimiter:",",precision:3,separator:".",unit:"",format:"%u%n",significant:!1,stripInsignificantZeros:!1},il(this.get("number.format"))),e))}get(t){return jl(this,t)}runCallbacks(){this.onChangeHandlers.forEach((t=>t(this)))}hasChanged(){this._version+=1,this.runCallbacks()}}({en:{hello:"Hi!",inbox:{zero:"You have no messages",one:"You have one message",other:"You have %{count} messages"}},nl:{hello:"Ola!",inbox:{zero:"Você não tem mensagens",one:"Você tem uma mensagem",other:"Você tem %{count} mensagens"}}});var Xl=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class Ql{constructor(){this.appVersionController=new ua}createButton(t,e,n){const i=document.createElement("button");return i.id=t,i.classList.add("tb-btn",e),i.innerText=n,i}openShareLinkModal(){return Xl(this,void 0,void 0,(function*(){try{const t=this.createModalContent(),e=new F({title:"Share link for a preview",width:"500px",body:t});e.open(),this.setupModalEventListeners(t,e)}catch(t){console.error("Error opening share link modal:",t)}}))}createModalContent(){const t=document.createElement("div"),e=document.createElement("p");e.innerText=Yl.t("hello");const n=this.createLinkSection(),i=this.createSubmitSection(n);return t.appendChild(e),t.appendChild(n),t.appendChild(i),t}createLinkSection(){const t=document.createElement("div");t.classList.add("share-link-body"),t.style.display="flex",t.style.flexDirection="column",t.style.padding="10px";const e=document.createElement("a");return e.target="_blank",e.style.overflowWrap="break-word",e.style.maxWidth="100%",this.populateLinkAsync(e),t.appendChild(e),t}populateLinkAsync(t){return Xl(this,void 0,void 0,(function*(){try{const e=yield this.appVersionController.generateShareLink();t.href=e,t.innerText=e}catch(e){t.innerText="Failed to generate link",t.href="#"}}))}createSubmitSection(t){const e=document.createElement("div");e.classList.add("popup-footer"),e.style.marginBottom="-12px";const n=this.createButton("copy-link","tb-btn-primary","Copy"),i=this.createButton("cancel","tb-btn-outline","Close");return e.appendChild(n),e.appendChild(i),e}setupModalEventListeners(t,e){const n=t.querySelector("a"),i=t.querySelector("#copy-link"),r=t.querySelector("#cancel");i&&n&&i.addEventListener("click",(t=>Xl(this,void 0,void 0,(function*(){t.preventDefault(),n.href&&((yield this.appVersionController.copyToClipboard(n.href))?alert("Link copied to clipboard"):alert("Failed to copy link")),e.close()})))),r&&r.addEventListener("click",(t=>{t.preventDefault(),e.close()}))}}class tc{constructor(){this.appVersions=new S,this.debugController=new Va,this.container=document.getElementById("navbar-buttons-left"),this.init()}init(){let t=new aa("debug-button","Debug",{labelId:"debug_button_label"});t.button.style.marginRight="10px",t.button.addEventListener("click",(t=>{t.preventDefault(),this.initialiseDebug(),this.debugController.init()}));let e=new aa("open-mapping","Share",{svg:'\n        <svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.293 2.293a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.414L13 5.414V15a1 1 0 1 1-2 0V5.414L9.707 6.707a1 1 0 0 1-1.414-1.414l3-3zM4 11a2 2 0 0 1 2-2h2a1 1 0 0 1 0 2H6v9h12v-9h-2a1 1 0 1 1 0-2h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-9z" fill="#0D0D0D"/>\n        </svg>\n    ',variant:"outline",labelId:"navbar_tree_label"});t.render(this.container),e.render(this.container),e.button.addEventListener("click",(t=>{t.preventDefault(),(new Ql).openShareLinkModal()}))}initialiseDebug(){const t=document.createElement("div");t.id="tb-debugging",t.innerHTML='\n      <div class="tb_debug-spinner-container">\n          <div class="tb_debug-spinner"></div>\n      </div>\n      <p style="text-align: center; font-size: 14px; margin-top: 10px">Please wait while we are checking the urls...</p>\n    ',new F({title:"App Debugging",width:"800px",body:t}).open()}render(t){t.appendChild(this.container)}}var ec=function(t,e,n,i){return new(n||(n=Promise))((function(r,s){function o(t){try{l(i.next(t))}catch(t){s(t)}}function a(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}l((i=i.apply(t,e||[])).next())}))};class nc{constructor(){this.appVersions=new S,this.toolboxService=new o,this.pageAttacher=new Go}setUpNavBar(){this.autoSave();const t=document.getElementById("tb-navbar"),e=new ma;(new tc).render(t),e.render(t)}setUpSideBar(){const t=document.getElementById("tb-sidebar");(new $a).render(t)}setUpScrollButtons(){const t=document.getElementById("child-container"),e=document.querySelector(".navigator .page-navigator-left"),n=document.querySelector(".navigator .page-navigator-right"),i=()=>{e.style.display=t.scrollLeft>0?"none":"block";const i=t.scrollWidth-t.clientWidth;n.style.display=t.scrollLeft<i-5?"none":"block"};e.onclick=()=>{t.scrollLeft-=300},n.onclick=()=>{t.scrollLeft+=300},t.addEventListener("scroll",i),window.addEventListener("resize",i),i()}autoSave(){setInterval((()=>ec(this,void 0,void 0,(function*(){this.savePages()}))),1e4)}savePages(){return ec(this,arguments,void 0,(function*(t=!1){const e=new Map,n=yield this.appVersions.getActiveVersion();n.Pages.forEach((i=>ec(this,void 0,void 0,(function*(){const r=i.PageId,s=`data-${r}`,o=JSON.parse(localStorage.getItem(s)||"{}");let a=null;if("Menu"===i.PageType?a="PageMenuStructure":"Content"===i.PageType&&(a="PageContentStructure"),!a||!o[a])return;const l=JSON.stringify(o[a]);if(console.log(a),console.log(i.PageStructure),l!==i.PageStructure){const s={AppVersionId:n.AppVersionId,PageId:r,PageName:i.PageName,PageType:i.PageType,PageStructure:l};try{yield this.toolboxService.autoSavePage(s),e.set(r,l),t||this.openToastMessage()}catch(t){console.error(`Failed to save page ${i.PageName}:`,t)}}}))))}))}openToastMessage(){const t=document.createElement("div");t.id="toast",t.textContent="Your changes are saved",document.body.appendChild(t),setTimeout((()=>{t.style.opacity="1",t.style.transform="translateX(-50%) translateY(0)"}),100),setTimeout((()=>{t.style.opacity="0",setTimeout((()=>{document.body.removeChild(t)}),500)}),3e3)}closeDropDowns(){}}const ic=class{constructor(){this.config=e.getInstance(),this.toolboxManager=new nc,this.editor=new sa,this.config.isInitialized||console.error("ToolboxApp created before AppConfig was initialized!"),this.initialiseLocalisation(),this.initialise()}initialise(){this.toolboxManager.setUpNavBar(),this.toolboxManager.setUpSideBar(),this.toolboxManager.closeDropDowns(),this.editor.init()}initialiseLocalisation(){console.log(this.config.currentLanguage),"Dutch"==this.config.currentLanguage?Yl.locale="nl":Yl.locale="en",console.log("i18n.locale",Yl.locale)}};window.App=class{constructor(t,n,i,r,s,o,a,l){e.getInstance().init(t,n,i,r,s,o,a,l),this.toolboxApp=new ic}}})()})();